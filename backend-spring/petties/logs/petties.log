2025-12-25T01:46:42.597+07:00  INFO 21824 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Starting UserControllerUnitTest using Java 21.0.9 with PID 21824 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-25T01:46:42.699+07:00 DEBUG 21824 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T01:46:42.700+07:00  INFO 21824 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T01:46:42.807+07:00 DEBUG 21824 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@45e140ae
2025-12-25T01:46:45.590+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-25T01:46:45.778+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T01:46:45.982+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T01:46:46.058+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T01:46:46.194+07:00  WARN 21824 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T01:46:46.194+07:00 DEBUG 21824 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T01:46:46.348+07:00 DEBUG 21824 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T01:46:46.417+07:00  INFO 21824 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T01:46:46.417+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T01:46:46.419+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-25T01:46:46.486+07:00  INFO 21824 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Started UserControllerUnitTest in 4.901 seconds (process running for 8.717)
2025-12-25T01:46:46.589+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:46.640+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=12345)]
2025-12-25T01:46:46.764+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:46.787+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.792+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:46.765745600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:46.805+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [12345]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T01:46:46.841+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T01:46:46.842+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@4628f386]
2025-12-25T01:46:46.850+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:46.850+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.850+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:46.850926400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:46.853+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'phone': rejected value [not-a-number]; codes [Pattern.updateProfileRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^0\d{9,10}$]; default message [Số điện thoại không hợp lệ (10-11 số, bắt đầu bằng 0)]] ]
2025-12-25T01:46:46.864+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T01:46:46.866+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@4d5d945d]
2025-12-25T01:46:46.867+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:46.868+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.868+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:46.867427, status=400, error=Validation Failed, message=Họ  (truncated)...]
2025-12-25T01:46:46.869+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'fullName': rejected value []; codes [Size.updateProfileRequest.fullName,Size.fullName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.fullName,fullName]; arguments []; default message [fullName],100,2]; default message [Họ tên phải từ 2-100 ký tự]] ]
2025-12-25T01:46:46.887+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T01:46:46.897+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.899+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@31d791c0]
2025-12-25T01:46:46.952+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T01:46:46.961+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.961+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@54644470]
2025-12-25T01:46:46.971+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T01:46:46.973+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:46.973+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/resend-otp: User not authenticated
2025-12-25T01:46:46.973+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.974+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:46.973962100, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T01:46:46.975+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:46.985+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T01:46:46.986+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:46.987+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T01:46:46.987+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:46.987+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:46.987036, status=401, error=Unauthorized, message=User not (truncated)...]
2025-12-25T01:46:46.988+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:46.999+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.001+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=)]
2025-12-25T01:46:47.004+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.005+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.005+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.005128400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.006+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T01:46:47.014+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.016+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=1234567)]
2025-12-25T01:46:47.017+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.018+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.018+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.018182400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.019+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [1234567]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T01:46:47.033+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T01:46:47.035+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@420dde28]
2025-12-25T01:46:47.042+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.043+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.043+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.042584500, status=400, error=Bad Request, message=Mật kh (truncated)...]
2025-12-25T01:46:47.044+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Mật khẩu hiện tại không chính xác]
2025-12-25T01:46:47.052+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.055+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=not-an-email)]
2025-12-25T01:46:47.056+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.057+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.057+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.056757900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.057+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@2e07dc23,.*]; default message [Email khong hop le]] ]
2025-12-25T01:46:47.067+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T01:46:47.069+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@41d6d6c4]
2025-12-25T01:46:47.074+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.075+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Doi mat khau thanh cong}]
2025-12-25T01:46:47.084+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T01:46:47.086+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.086+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@278df226]
2025-12-25T01:46:47.093+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.094+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=)]
2025-12-25T01:46:47.095+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.096+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.096+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.096362800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.097+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest) with 2 errors: [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [NotBlank.emailChangeVerifyRequest.otp,NotBlank.otp,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp]]; default message [Ma OTP khong duoc de trong]] [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T01:46:47.104+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T01:46:47.107+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.107+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.107+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.107014700, status=400, error=Bad Request, message=File i (truncated)...]
2025-12-25T01:46:47.107+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: File is empty]
2025-12-25T01:46:47.113+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.116+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=not-an-email, otp=123456)]
2025-12-25T01:46:47.117+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.117+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.117+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.117803600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.118+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeVerifyRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@2e07dc23,.*]; default message [Email khong hop le]] ]
2025-12-25T01:46:47.126+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T01:46:47.127+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@7a553110]
2025-12-25T01:46:47.128+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:47.129+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T01:46:47.130+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.130+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.130349, status=401, error=Unauthorized, message=User not (truncated)...]
2025-12-25T01:46:47.131+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:47.143+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.145+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T01:46:47.146+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.147+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=OTP da duoc gui den email moi}]
2025-12-25T01:46:47.154+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T01:46:47.155+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:47.156+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T01:46:47.156+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.156+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.156099100, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T01:46:47.156+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:47.164+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T01:46:47.166+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.167+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.167+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.167139300, status=400, error=Bad Request, message=Khong  (truncated)...]
2025-12-25T01:46:47.167+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Khong co yeu cau thay doi email. Vui long tao yeu cau moi.]
2025-12-25T01:46:47.176+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.177+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=test@example.com)]
2025-12-25T01:46:47.178+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.179+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.179+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.178808800, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T01:46:47.180+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi phai khac email hien tai]
2025-12-25T01:46:47.187+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.188+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T01:46:47.190+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:47.190+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/request-change: User not authenticated
2025-12-25T01:46:47.190+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.190+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.190261500, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T01:46:47.190+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:47.200+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T01:46:47.200+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@5c94d4b8]
2025-12-25T01:46:47.202+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.202+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@308d8de8]
2025-12-25T01:46:47.210+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.211+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T01:46:47.212+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.213+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.213+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.212167400, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T01:46:47.213+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 45 giay truoc khi gui lai ma OTP]
2025-12-25T01:46:47.221+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.222+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T01:46:47.223+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.224+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.225+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.224485800, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-25T01:46:47.225+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong chinh xac hoac da het han]
2025-12-25T01:46:47.232+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T01:46:47.234+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.234+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Ma OTP moi da duoc gui den email moi}]
2025-12-25T01:46:47.243+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.244+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T01:46:47.245+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.245+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.245+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.245561900, status=400, error=Bad Request, message=Ban da (truncated)...]
2025-12-25T01:46:47.245+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ban da nhap sai ma OTP qua nhieu lan. Vui long yeu cau gui ma OTP moi.]
2025-12-25T01:46:47.253+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.253+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=, otp=123456)]
2025-12-25T01:46:47.254+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.255+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.255+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.254891900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.256+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeVerifyRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T01:46:47.263+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.264+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=different@example.com, otp=123456)]
2025-12-25T01:46:47.265+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.265+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.266+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.265771200, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T01:46:47.266+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi khong khop voi yeu cau truoc do]
2025-12-25T01:46:47.272+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T01:46:47.274+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=existing@example.com)]
2025-12-25T01:46:47.276+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.277+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.277+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.277096, status=400, error=Bad Request, message=Email da  (truncated)...]
2025-12-25T01:46:47.278+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T01:46:47.285+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.286+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T01:46:47.287+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.287+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@2943e61c]
2025-12-25T01:46:47.295+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.296+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T01:46:47.297+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.298+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.298+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.298530, status=400, error=Bad Request, message=Ma OTP kh (truncated)...]
2025-12-25T01:46:47.299+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong dung. Ban con 4 lan thu.]
2025-12-25T01:46:47.305+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T01:46:47.305+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:47.306+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T01:46:47.306+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.307+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.306600, status=401, error=Unauthorized, message=User not (truncated)...]
2025-12-25T01:46:47.307+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:47.313+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T01:46:47.314+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.314+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.314+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.314740500, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T01:46:47.316+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 30 giay truoc khi gui lai ma OTP]
2025-12-25T01:46:47.321+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.322+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=abc123)]
2025-12-25T01:46:47.322+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:47.323+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.323+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.322614900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:47.324+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [abc123]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T01:46:47.329+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T01:46:47.330+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@145ce025]
2025-12-25T01:46:47.331+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:47.332+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/password: User not authenticated
2025-12-25T01:46:47.332+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.332+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.332183400, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T01:46:47.332+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:47.339+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T01:46:47.340+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.341+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.341+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.341001, status=400, error=Bad Request, message=User not  (truncated)...]
2025-12-25T01:46:47.342+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: User not found]
2025-12-25T01:46:47.347+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T01:46:47.348+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:47.349+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.349+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.348985200, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T01:46:47.350+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T01:46:47.356+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T01:46:47.356+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T01:46:47.358+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:47.358+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/verify-change: User not authenticated
2025-12-25T01:46:47.358+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.358+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:47.358212400, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T01:46:47.358+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T01:46:47.371+07:00  INFO 21824 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicControllerUnitTest]: ClinicControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T01:46:47.388+07:00  INFO 21824 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicControllerUnitTest
2025-12-25T01:46:47.392+07:00  INFO 21824 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T01:46:47.425+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Starting ClinicControllerUnitTest using Java 21.0.9 with PID 21824 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-25T01:46:47.425+07:00 DEBUG 21824 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T01:46:47.425+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : The following 1 profile is active: "dev"
2025-12-25T01:46:47.429+07:00 DEBUG 21824 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3a72517e
2025-12-25T01:46:47.802+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 18 mappings in 'requestMappingHandlerMapping'
2025-12-25T01:46:47.842+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T01:46:47.849+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T01:46:47.856+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T01:46:47.885+07:00  WARN 21824 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T01:46:47.885+07:00 DEBUG 21824 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T01:46:47.897+07:00 DEBUG 21824 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T01:46:47.909+07:00  INFO 21824 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T01:46:47.909+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T01:46:47.910+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T01:46:47.923+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Started ClinicControllerUnitTest in 0.53 seconds (process running for 10.153)
2025-12-25T01:46:47.935+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicImage(UUID, MultipartFile, String, Integer, Boolean)
2025-12-25T01:46:47.940+07:00  INFO 21824 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading image for clinic: c048077f-2320-4ee8-a1b7-14811b0fbc21, file size: 10, content type: image/jpeg
2025-12-25T01:46:47.941+07:00  INFO 21824 --- [petties] [main] c.p.petties.controller.ClinicController  : File uploaded to Cloudinary: http://cloudinary.com/image.jpg
2025-12-25T01:46:47.941+07:00  INFO 21824 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic image saved successfully for clinic: c048077f-2320-4ee8-a1b7-14811b0fbc21
2025-12-25T01:46:47.955+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.955+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@48306567]
2025-12-25T01:46:47.982+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T01:46:47.991+07:00  WARN 21824 --- [petties] [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-12-25T01:46:47.993+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:47.994+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T01:46:48.010+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicLogo(UUID, MultipartFile)
2025-12-25T01:46:48.010+07:00  INFO 21824 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading logo for clinic: ef69d5a0-f0a0-4800-b950-9bf1c3b3a7e5, file size: 9, content type: image/jpeg
2025-12-25T01:46:48.012+07:00  INFO 21824 --- [petties] [main] c.p.petties.controller.ClinicController  : Logo uploaded to Cloudinary: url
2025-12-25T01:46:48.013+07:00  INFO 21824 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic logo saved successfully for clinic: ef69d5a0-f0a0-4800-b950-9bf1c3b3a7e5
2025-12-25T01:46:48.013+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.013+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@f714749]
2025-12-25T01:46:48.021+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#findNearbyClinics(BigDecimal, BigDecimal, double, int, int)
2025-12-25T01:46:48.030+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.030+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T01:46:48.041+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T01:46:48.046+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@5d27a744]
2025-12-25T01:46:48.059+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.059+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@18bd3135]
2025-12-25T01:46:48.067+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T01:46:48.070+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.070+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@636d4cdc]
2025-12-25T01:46:48.078+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T01:46:48.080+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.080+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-12-25T01:46:48.089+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#searchClinics(String, int, int)
2025-12-25T01:46:48.092+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.094+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T01:46:48.103+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T01:46:48.105+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@54a98439]
2025-12-25T01:46:48.108+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:48.114+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.114+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:48.108141100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:48.116+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinic.ClinicResponse> com.petties.petties.controller.ClinicController.createClinic(com.petties.petties.dto.clinic.ClinicRequest): [Field error in object 'clinicRequest' on field 'name': rejected value []; codes [NotBlank.clinicRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicRequest.name,name]; arguments []; default message [name]]; default message [Tên phòng khám không được để trống]] ]
2025-12-25T01:46:48.125+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#approveClinic(UUID)
2025-12-25T01:46:48.126+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.126+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@5edeb83e]
2025-12-25T01:46:48.133+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T01:46:48.135+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T01:46:48.136+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.136+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:48.135531100, status=404, error=Not Found, message=Clinic n (truncated)...]
2025-12-25T01:46:48.136+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Clinic not found]
2025-12-25T01:46:48.145+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T01:46:48.146+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@1f6af096]
2025-12-25T01:46:48.148+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T01:46:48.149+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/7c238545-f69c-410f-863c-98a08ad2b073: You can only update your own clinic
2025-12-25T01:46:48.149+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.149+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:48.149835600, status=403, error=Forbidden, message=You can  (truncated)...]
2025-12-25T01:46:48.150+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: You can only update your own clinic]
2025-12-25T01:46:48.158+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T01:46:48.161+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.161+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T01:46:48.174+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#rejectClinic(UUID, Map)
2025-12-25T01:46:48.178+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [{reason=Invalid information}]
2025-12-25T01:46:48.179+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.179+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@45cd5c56]
2025-12-25T01:46:48.185+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#deleteClinic(UUID)
2025-12-25T01:46:48.237+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.238+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Clinic deleted successfully}]
2025-12-25T01:46:48.247+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T01:46:48.248+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@6a4ba6f4]
2025-12-25T01:46:48.249+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:48.250+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@589dac96]
2025-12-25T01:46:48.285+07:00  INFO 21824 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.AuthControllerUnitTest]: AuthControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T01:46:48.365+07:00  INFO 21824 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.AuthControllerUnitTest
2025-12-25T01:46:48.380+07:00  INFO 21824 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T01:46:48.413+07:00  INFO 21824 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Starting AuthControllerUnitTest using Java 21.0.9 with PID 21824 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-25T01:46:48.413+07:00 DEBUG 21824 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T01:46:48.414+07:00  INFO 21824 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T01:46:48.416+07:00 DEBUG 21824 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@541ea657
2025-12-25T01:46:49.089+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-12-25T01:46:49.141+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T01:46:49.149+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T01:46:49.155+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T01:46:49.177+07:00  WARN 21824 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T01:46:49.177+07:00 DEBUG 21824 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T01:46:49.188+07:00 DEBUG 21824 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T01:46:49.197+07:00  INFO 21824 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T01:46:49.198+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T01:46:49.198+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-25T01:46:49.205+07:00  INFO 21824 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Started AuthControllerUnitTest in 0.826 seconds (process running for 11.436)
2025-12-25T01:46:49.217+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.222+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@cd8e702]
2025-12-25T01:46:49.230+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.235+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.237+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.233139800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.237+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [NotBlank.sendOtpRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password]]; default message [Mật khẩu không được để trống]] ]
2025-12-25T01:46:49.245+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.247+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@41737438]
2025-12-25T01:46:49.250+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.251+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.251+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.251600200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.252+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [1234567]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T01:46:49.260+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.262+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@42d039ef]
2025-12-25T01:46:49.267+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.267+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.267+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.267307900, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T01:46:49.267+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T01:46:49.275+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.276+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@57404a8d]
2025-12-25T01:46:49.281+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.281+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@65c2610f]
2025-12-25T01:46:49.287+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T01:46:49.289+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@586f1bef]
2025-12-25T01:46:49.292+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.292+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@65ff1e6d]
2025-12-25T01:46:49.298+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.298+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@2dca3c72]
2025-12-25T01:46:49.299+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.300+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.300+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.300584, status=400, error=Validation Failed, message=Use (truncated)...]
2025-12-25T01:46:49.300+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value [null]; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T01:46:49.307+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.308+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@22816de1]
2025-12-25T01:46:49.309+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.310+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.311+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.310510100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.311+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [NotBlank.resetPasswordRequest.newPassword,NotBlank.newPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword]]; default message [Mật khẩu mới không được để trống]] [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-25T01:46:49.317+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.317+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@312eb]
2025-12-25T01:46:49.319+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.319+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.319+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.319235800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.320+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [NotBlank.resetPasswordRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-25T01:46:49.326+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.327+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@975f349]
2025-12-25T01:46:49.328+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.328+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.328+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.328000100, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T01:46:49.329+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T01:46:49.334+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T01:46:49.337+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.337+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@294ffc88]
2025-12-25T01:46:49.342+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T01:46:49.344+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.345+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.345+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.344583600, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T01:46:49.345+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T01:46:49.350+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.350+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@352df548]
2025-12-25T01:46:49.352+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.352+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.MessageResponse@4dbcc8ce]
2025-12-25T01:46:49.357+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.357+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@1a4eb392]
2025-12-25T01:46:49.358+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.359+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.359+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.358701600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.360+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value []; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T01:46:49.363+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.364+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@2f9a7d6f]
2025-12-25T01:46:49.365+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.366+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.366+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.366390400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.367+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value []; codes [NotBlank.resetPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T01:46:49.371+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.372+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@6eda3ade]
2025-12-25T01:46:49.373+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.374+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.374+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.374241400, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T01:46:49.374+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T01:46:49.379+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.380+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@b632594]
2025-12-25T01:46:49.381+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.381+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@24456c9e]
2025-12-25T01:46:49.385+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.387+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@75a955bf]
2025-12-25T01:46:49.388+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.388+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.389+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.388043300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.389+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value [Pass1]; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-25T01:46:49.394+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.394+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@63f79099]
2025-12-25T01:46:49.395+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.395+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.397+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.395618600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.397+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.resetPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@2e07dc23,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T01:46:49.403+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.404+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@61427cd3]
2025-12-25T01:46:49.405+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.405+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.405+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.405677, status=400, error=Validation Failed, message=Ema (truncated)...]
2025-12-25T01:46:49.405+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value []; codes [NotBlank.sendOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T01:46:49.411+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.412+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@2b3247f8]
2025-12-25T01:46:49.414+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.414+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.414+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.414011500, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T01:46:49.414+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email already exists]
2025-12-25T01:46:49.419+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.419+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@73b6fbd1]
2025-12-25T01:46:49.421+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.421+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@79a1f55c]
2025-12-25T01:46:49.426+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T01:46:49.427+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.427+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.427+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.427746300, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T01:46:49.429+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending password reset found]
2025-12-25T01:46:49.435+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.436+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@91e76b6]
2025-12-25T01:46:49.437+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.437+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.438+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.437634700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.438+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'username': rejected value [ab]; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-25T01:46:49.443+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T01:46:49.444+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.445+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.445+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.444932700, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T01:46:49.445+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T01:46:49.451+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T01:46:49.452+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@3518882c]
2025-12-25T01:46:49.454+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:49.454+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/google: Invalid Google ID token
2025-12-25T01:46:49.455+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.455+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.455413800, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T01:46:49.456+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid Google ID token]
2025-12-25T01:46:49.460+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T01:46:49.464+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@2e90a3de]
2025-12-25T01:46:49.467+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.467+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.468+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.467054, status=400, error=Bad Request, message=Email not (truncated)...]
2025-12-25T01:46:49.468+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email not found]
2025-12-25T01:46:49.472+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T01:46:49.473+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@45488836]
2025-12-25T01:46:49.474+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.474+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.475+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.474629700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.476+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.forgotPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@2e07dc23,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T01:46:49.482+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.483+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@1a6aecec]
2025-12-25T01:46:49.485+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.486+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.486+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.486370900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.487+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value [abc123]; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-25T01:46:49.491+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.492+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@5bf97be9]
2025-12-25T01:46:49.494+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.494+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.494+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.494003200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.495+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [12345]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T01:46:49.500+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.501+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@66a0fae1]
2025-12-25T01:46:49.503+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.504+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.504+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.503385200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.505+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [NotBlank.sendOtpRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username]]; default message [Tên đăng nhập không được để trống]] ]
2025-12-25T01:46:49.511+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T01:46:49.515+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.515+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.517+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.515051800, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T01:46:49.523+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending registration found]
2025-12-25T01:46:49.533+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.535+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@665f19d]
2025-12-25T01:46:49.535+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.536+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.536+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.535829800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.537+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value []; codes [NotBlank.verifyOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T01:46:49.544+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T01:46:49.544+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@891f18f]
2025-12-25T01:46:49.545+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.545+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.545+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.545408100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.547+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'idToken': rejected value []; codes [NotBlank.googleSignInRequest.idToken,NotBlank.idToken,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.idToken,idToken]; arguments []; default message [idToken]]; default message [ID token is required]] ]
2025-12-25T01:46:49.552+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.555+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@5ce1b67b]
2025-12-25T01:46:49.556+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.556+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.556+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.556015200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.558+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'confirmPassword': rejected value []; codes [NotBlank.resetPasswordRequest.confirmPassword,NotBlank.confirmPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.confirmPassword,confirmPassword]; arguments []; default message [confirmPassword]]; default message [Xác nhận mật khẩu không được để trống]] ]
2025-12-25T01:46:49.563+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.563+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@370c9681]
2025-12-25T01:46:49.565+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.566+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.566+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.566019, status=400, error=Validation Failed, message=Họ  (truncated)...]
2025-12-25T01:46:49.567+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'fullName': rejected value []; codes [NotBlank.sendOtpRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T01:46:49.572+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T01:46:49.573+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@34f636a5]
2025-12-25T01:46:49.574+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.575+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@1ae11dd3]
2025-12-25T01:46:49.581+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.582+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@1447bef2]
2025-12-25T01:46:49.584+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.584+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.584+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.584672500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.585+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'password': rejected value [12345]; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T01:46:49.590+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.592+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@688e2e8d]
2025-12-25T01:46:49.592+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.592+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.592+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.592223200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.593+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T01:46:49.599+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.600+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@35645453]
2025-12-25T01:46:49.601+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.601+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.601+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.601292300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.602+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest) with 2 errors: [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [NotBlank.verifyOtpRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T01:46:49.607+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T01:46:49.608+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@81cba04]
2025-12-25T01:46:49.609+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.610+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@2c635953]
2025-12-25T01:46:49.614+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.614+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@1a288163]
2025-12-25T01:46:49.617+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.617+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.617+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.617310, status=400, error=Validation Failed, message=Pas (truncated)...]
2025-12-25T01:46:49.618+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value []; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T01:46:49.623+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.623+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6f21c18f]
2025-12-25T01:46:49.624+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.624+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@54c3b0dd]
2025-12-25T01:46:49.630+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.631+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@8e89c5f]
2025-12-25T01:46:49.631+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.631+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@2f3ba597]
2025-12-25T01:46:49.637+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.637+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@54ff871a]
2025-12-25T01:46:49.639+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.639+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@2ecb7f0c]
2025-12-25T01:46:49.646+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T01:46:49.646+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@43c76550]
2025-12-25T01:46:49.647+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.648+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.648+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.648122800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.649+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value []; codes [NotBlank.forgotPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T01:46:49.655+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T01:46:49.657+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@75f5293c]
2025-12-25T01:46:49.658+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T01:46:49.658+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/login: Invalid username or password
2025-12-25T01:46:49.658+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.659+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.658310900, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T01:46:49.659+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid username or password]
2025-12-25T01:46:49.663+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T01:46:49.665+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.665+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@48515dfc]
2025-12-25T01:46:49.671+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T01:46:49.673+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@5d9ac1ff]
2025-12-25T01:46:49.673+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.674+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.674+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.674896700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.674+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'platform': rejected value []; codes [NotBlank.googleSignInRequest.platform,NotBlank.platform,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.platform,platform]; arguments []; default message [platform]]; default message [Platform is required]] ]
2025-12-25T01:46:49.679+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.681+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@a929b6]
2025-12-25T01:46:49.683+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.684+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.685+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.684584300, status=400, error=Bad Request, message=Passwo (truncated)...]
2025-12-25T01:46:49.685+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Passwords do not match]
2025-12-25T01:46:49.690+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.690+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@1fd2f96d]
2025-12-25T01:46:49.692+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.692+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.692+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.692167400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.693+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'role': rejected value [null]; codes [NotNull.sendOtpRequest.role,NotNull.role,NotNull.com.petties.petties.model.enums.Role,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.role,role]; arguments []; default message [role]]; default message [Vai trò không được để trống]] ]
2025-12-25T01:46:49.700+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T01:46:49.701+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@1a48f55b]
2025-12-25T01:46:49.702+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.702+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.702+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.702623300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.703+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.sendOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@2e07dc23,.*]; default message [Email không hợp lệ]] ]
2025-12-25T01:46:49.708+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T01:46:49.709+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@76c6b12c]
2025-12-25T01:46:49.711+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T01:46:49.711+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.711+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.711093600, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T01:46:49.712+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T01:46:49.716+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T01:46:49.717+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@60af08b2]
2025-12-25T01:46:49.718+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:49.718+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:49.718+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:49.718167100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:49.719+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.verifyOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@2e07dc23,.*]; default message [Email không hợp lệ]] ]
2025-12-25T01:46:49.731+07:00  INFO 21824 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicServiceControllerUnitTest]: ClinicServiceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T01:46:49.760+07:00  INFO 21824 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicServiceControllerUnitTest
2025-12-25T01:46:49.767+07:00  INFO 21824 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T01:46:49.820+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 21824 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-25T01:46:49.821+07:00 DEBUG 21824 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T01:46:49.821+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T01:46:49.823+07:00 DEBUG 21824 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2174fda1
2025-12-25T01:46:50.333+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-25T01:46:50.401+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T01:46:50.411+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T01:46:50.426+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T01:46:50.460+07:00  WARN 21824 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T01:46:50.461+07:00 DEBUG 21824 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T01:46:50.484+07:00 DEBUG 21824 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T01:46:50.507+07:00  INFO 21824 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T01:46:50.508+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T01:46:50.508+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-25T01:46:50.537+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 0.771 seconds (process running for 12.768)
2025-12-25T01:46:50.556+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-25T01:46:50.568+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.570+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T01:46:50.710+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T01:46:50.734+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@2674c88f]
2025-12-25T01:46:50.760+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.760+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@37e44608]
2025-12-25T01:46:50.773+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-25T01:46:50.775+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.775+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@588931b9]
2025-12-25T01:46:50.803+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-25T01:46:50.807+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@6618b9b0]
2025-12-25T01:46:50.816+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.816+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@4041b733]
2025-12-25T01:46:50.824+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-25T01:46:50.830+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.831+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@6b4684b4]]
2025-12-25T01:46:50.843+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T01:46:50.845+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T01:46:50.855+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.856+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:50.847185600, status=404, error=Not Found, message=Service  (truncated)...]
2025-12-25T01:46:50.856+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-25T01:46:50.869+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T01:46:50.870+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@7da324d0]
2025-12-25T01:46:50.875+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:50.876+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.876+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:50.875828800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:50.878+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinicService.ClinicServiceResponse> com.petties.petties.controller.ClinicServiceController.createService(com.petties.petties.dto.clinicService.ClinicServiceRequest) with 3 errors: [Field error in object 'clinicServiceRequest' on field 'basePrice': rejected value [null]; codes [NotNull.clinicServiceRequest.basePrice,NotNull.basePrice,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.basePrice,basePrice]; arguments []; default message [basePrice]]; default message [Giá cơ bản không được để trống]] [Field error in object 'clinicServiceRequest' on field 'slotsRequired': rejected value [null]; codes [NotNull.clinicServiceRequest.slotsRequired,NotNull.slotsRequired,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.slotsRequired,slotsRequired]; arguments []; default message [slotsRequired]]; default message [Số slot yêu cầu không được để trống]] [Field error in object 'clinicServiceRequest' on field 'name': rejected value [null]; codes [NotBlank.clinicServiceRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.name,name]; arguments []; default message [name]]; default message [Tên dịch vụ không được để trống]] ]
2025-12-25T01:46:50.889+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T01:46:50.890+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:50.890+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@736b8ed4]
2025-12-25T01:46:50.909+07:00  INFO 21824 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicStaffControllerUnitTest]: ClinicStaffControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T01:46:50.931+07:00  INFO 21824 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicStaffControllerUnitTest
2025-12-25T01:46:50.936+07:00  INFO 21824 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T01:46:50.984+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Starting ClinicStaffControllerUnitTest using Java 21.0.9 with PID 21824 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-25T01:46:50.984+07:00 DEBUG 21824 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T01:46:50.984+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T01:46:50.991+07:00 DEBUG 21824 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@298f8835
2025-12-25T01:46:51.375+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-25T01:46:51.416+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T01:46:51.424+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T01:46:51.433+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T01:46:51.457+07:00  WARN 21824 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T01:46:51.457+07:00 DEBUG 21824 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T01:46:51.470+07:00 DEBUG 21824 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T01:46:51.480+07:00  INFO 21824 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T01:46:51.480+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T01:46:51.481+07:00  INFO 21824 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-25T01:46:51.488+07:00  INFO 21824 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Started ClinicStaffControllerUnitTest in 0.553 seconds (process running for 13.719)
2025-12-25T01:46:51.498+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.504+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=, phone=0912345678, role=VET)]
2025-12-25T01:46:51.514+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:51.517+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.519+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.514080, status=400, error=Validation Failed, message=Họ  (truncated)...]
2025-12-25T01:46:51.521+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'fullName': rejected value []; codes [NotBlank.quickAddStaffRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T01:46:51.531+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.533+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Duplicate User, phone=0987654321, role=VET)]
2025-12-25T01:46:51.534+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceAlreadyExists(ResourceAlreadyExistsException, HttpServletRequest)
2025-12-25T01:46:51.535+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.535+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.534883200, status=409, error=Conflict, message=Số điện t (truncated)...]
2025-12-25T01:46:51.535+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceAlreadyExistsException: Số điện thoại này đã được đăng ký tài khoản]
2025-12-25T01:46:51.542+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#getStaff(UUID)
2025-12-25T01:46:51.544+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.546+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[StaffResponse(userId=565a83a5-b3db-444d-80eb-c74c737d4f56, fullName=Vet A, username=null, email=nul (truncated)...]
2025-12-25T01:46:51.567+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.568+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Fake Admin, phone=0912345678, role=ADMIN)]
2025-12-25T01:46:51.569+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T01:46:51.569+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/b596e7ad-cc9b-4834-bf22-e936d7c9a911/staff/quick-add: Không thể tạo tài khoản ADMIN qua chức năng này
2025-12-25T01:46:51.569+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.571+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.569609800, status=403, error=Forbidden, message=Không th (truncated)...]
2025-12-25T01:46:51.571+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Không thể tạo tài khoản ADMIN qua chức năng này]
2025-12-25T01:46:51.577+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.585+07:00 DEBUG 21824 --- [petties] [main] o.s.web.method.HandlerMethod             : Could not resolve parameter [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]
2025-12-25T01:46:51.586+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleHttpMessageNotReadable(HttpMessageNotReadableException, HttpServletRequest)
2025-12-25T01:46:51.586+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.586+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.586465300, status=400, error=Bad Request, message=Dữ liệ (truncated)...]
2025-12-25T01:46:51.587+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]]
2025-12-25T01:46:51.594+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#removeStaff(UUID, UUID)
2025-12-25T01:46:51.596+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T01:46:51.596+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff removed successfully"]
2025-12-25T01:46:51.605+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.605+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Tester, phone=123, role=VET)]
2025-12-25T01:46:51.607+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T01:46:51.607+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.607+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.607865100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T01:46:51.609+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'phone': rejected value [123]; codes [Pattern.quickAddStaffRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@35a81281,^[0-9]{10,11}$]; default message [Số điện thoại không hợp lệ]] ]
2025-12-25T01:46:51.615+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T01:46:51.618+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T01:46:51.618+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Clinic Manager assigned successfully"]
2025-12-25T01:46:51.635+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T01:46:51.637+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T01:46:51.638+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.639+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.638151500, status=404, error=Not Found, message=User not (truncated)...]
2025-12-25T01:46:51.639+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: User not found]
2025-12-25T01:46:51.644+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.646+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T01:46:51.647+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T01:46:51.647+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff account created and assigned successfully"]
2025-12-25T01:46:51.653+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignVet(UUID, String)
2025-12-25T01:46:51.656+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T01:46:51.656+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/3cf1e5ff-c6a8-4927-829d-85b3e38787bf/staff/vet/vet@test.com: Bạn không có quyền quản lý phòng khám này
2025-12-25T01:46:51.656+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.656+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.656114700, status=403, error=Forbidden, message=Bạn khôn (truncated)...]
2025-12-25T01:46:51.656+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Bạn không có quyền quản lý phòng khám này]
2025-12-25T01:46:51.663+07:00 DEBUG 21824 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T01:46:51.663+07:00 DEBUG 21824 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T01:46:51.664+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T01:46:51.665+07:00  WARN 21824 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/e5e1e280-2cb7-4823-b2d1-efd39329297d/staff/quick-add: Quản lý phòng khám chỉ có quyền thêm Bác sĩ
2025-12-25T01:46:51.665+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T01:46:51.667+07:00 DEBUG 21824 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T01:46:51.665699200, status=403, error=Forbidden, message=Quản lý  (truncated)...]
2025-12-25T01:46:51.668+07:00 DEBUG 21824 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Quản lý phòng khám chỉ có quyền thêm Bác sĩ]
2025-12-25T01:46:51.680+07:00 DEBUG 21824 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@45e140ae, started on Thu Dec 25 01:46:42 ICT 2025
2025-12-25T01:46:51.685+07:00 DEBUG 21824 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3a72517e, started on Thu Dec 25 01:46:47 ICT 2025
2025-12-25T01:46:51.686+07:00 DEBUG 21824 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@541ea657, started on Thu Dec 25 01:46:48 ICT 2025
2025-12-25T01:46:51.688+07:00 DEBUG 21824 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@2174fda1, started on Thu Dec 25 01:46:49 ICT 2025
2025-12-25T01:46:51.690+07:00 DEBUG 21824 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@298f8835, started on Thu Dec 25 01:46:50 ICT 2025
2025-12-25T17:26:49.024+07:00  INFO 18196 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Starting AuthControllerUnitTest using Java 21.0.9 with PID 18196 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:26:49.027+07:00 DEBUG 18196 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:26:49.028+07:00  INFO 18196 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:26:49.088+07:00 DEBUG 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@55cff952
2025-12-25T17:26:53.785+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:26:54.038+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:26:54.348+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:26:54.434+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:26:54.573+07:00  WARN 18196 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:26:54.574+07:00 DEBUG 18196 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:26:54.777+07:00 DEBUG 18196 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:26:54.882+07:00  INFO 18196 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:26:54.882+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:26:54.885+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-25T17:26:54.950+07:00  INFO 18196 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Started AuthControllerUnitTest in 6.69 seconds (process running for 9.11)
2025-12-25T17:26:55.134+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:55.220+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@53b907d9]
2025-12-25T17:26:55.439+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:55.522+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.543+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:55.457930200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:55.574+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [NotBlank.sendOtpRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password]]; default message [Mật khẩu không được để trống]] [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T17:26:55.723+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:55.726+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@5e777b0]
2025-12-25T17:26:55.735+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:55.735+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.736+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:55.735292400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:55.738+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [1234567]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:26:55.781+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:55.784+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@39dce2df]
2025-12-25T17:26:55.803+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:55.805+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.805+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:55.804755100, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T17:26:55.806+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T17:26:55.837+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:55.840+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@63846fa4]
2025-12-25T17:26:55.853+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.854+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@716eae1]
2025-12-25T17:26:55.931+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:26:55.933+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@59bbf82e]
2025-12-25T17:26:55.939+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.940+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@1c3a64b6]
2025-12-25T17:26:55.956+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:55.957+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@417b3642]
2025-12-25T17:26:55.958+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:55.959+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.959+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:55.958263200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:55.959+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value [null]; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T17:26:55.975+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:55.976+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4c12f54a]
2025-12-25T17:26:55.978+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:55.978+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:55.979+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:55.978826600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:55.981+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [NotBlank.resetPasswordRequest.newPassword,NotBlank.newPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword]]; default message [Mật khẩu mới không được để trống]] ]
2025-12-25T17:26:55.999+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.001+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@34ea86ff]
2025-12-25T17:26:56.004+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.005+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.005+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.004336200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.009+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [NotBlank.resetPasswordRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] ]
2025-12-25T17:26:56.029+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.029+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@7aa1fb0e]
2025-12-25T17:26:56.032+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.032+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.033+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.032927800, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T17:26:56.033+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T17:26:56.047+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:26:56.061+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.062+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@2a2815cc]
2025-12-25T17:26:56.075+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:26:56.077+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.078+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.078+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.077547800, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T17:26:56.079+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T17:26:56.095+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.097+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@59d09ff3]
2025-12-25T17:26:56.101+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.102+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.MessageResponse@17d0d3d7]
2025-12-25T17:26:56.119+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.119+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@5db66c3]
2025-12-25T17:26:56.121+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.121+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.121+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.121859300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.123+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value []; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T17:26:56.138+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.139+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@55d8f6bb]
2025-12-25T17:26:56.140+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.140+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.140+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.140974400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.141+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value []; codes [NotBlank.resetPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:26:56.157+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.159+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@3e1c5e0d]
2025-12-25T17:26:56.162+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.162+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.162+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.162847800, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T17:26:56.164+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T17:26:56.178+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.179+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@96c840a]
2025-12-25T17:26:56.180+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.181+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@5c81ddab]
2025-12-25T17:26:56.197+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.198+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@6e0f259e]
2025-12-25T17:26:56.201+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.202+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.203+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.202415700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.204+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value [Pass1]; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-25T17:26:56.220+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.221+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@7fe0ca60]
2025-12-25T17:26:56.223+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.224+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.225+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.224255400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.226+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.resetPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@63896cf7,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T17:26:56.244+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.245+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@19b3d3a4]
2025-12-25T17:26:56.246+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.247+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.247+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.246380, status=400, error=Validation Failed, message=Ema (truncated)...]
2025-12-25T17:26:56.248+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value []; codes [NotBlank.sendOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:26:56.262+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.263+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@2a9ea03f]
2025-12-25T17:26:56.265+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.266+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.266+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.266593900, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:26:56.267+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email already exists]
2025-12-25T17:26:56.281+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.283+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@7fb9a83c]
2025-12-25T17:26:56.287+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.289+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@517d9cd5]
2025-12-25T17:26:56.307+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:26:56.308+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.309+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.309+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.309307300, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T17:26:56.310+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending password reset found]
2025-12-25T17:26:56.324+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.324+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@74e175c7]
2025-12-25T17:26:56.326+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.327+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.327+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.327371900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.328+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'username': rejected value [ab]; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-25T17:26:56.342+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:26:56.343+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.344+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.345+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.344991700, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T17:26:56.346+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T17:26:56.363+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:26:56.365+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@2a7392a3]
2025-12-25T17:26:56.366+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:26:56.367+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/google: Invalid Google ID token
2025-12-25T17:26:56.371+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.372+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.371207300, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T17:26:56.372+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid Google ID token]
2025-12-25T17:26:56.393+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:26:56.395+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@4e3d36c2]
2025-12-25T17:26:56.400+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.401+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.402+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.401153100, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:26:56.402+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email not found]
2025-12-25T17:26:56.415+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:26:56.416+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@288b8663]
2025-12-25T17:26:56.418+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.418+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.419+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.418804800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.421+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.forgotPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@63896cf7,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T17:26:56.445+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.446+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4b7c0f39]
2025-12-25T17:26:56.447+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.447+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.447+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.447589200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.449+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value [abc123]; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-25T17:26:56.460+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.461+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@1e965426]
2025-12-25T17:26:56.462+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.462+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.462+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.462832, status=400, error=Validation Failed, message=Mã  (truncated)...]
2025-12-25T17:26:56.463+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [12345]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:26:56.477+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.478+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@ed1d2cf]
2025-12-25T17:26:56.481+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.481+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.481+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.481760500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.482+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [NotBlank.sendOtpRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username]]; default message [Tên đăng nhập không được để trống]] ]
2025-12-25T17:26:56.496+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:26:56.497+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.498+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.499+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.498542500, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T17:26:56.501+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending registration found]
2025-12-25T17:26:56.517+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.518+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@16732340]
2025-12-25T17:26:56.519+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.519+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.521+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.519991400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.523+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value []; codes [NotBlank.verifyOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:26:56.534+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:26:56.536+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@5eb9bf7d]
2025-12-25T17:26:56.537+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.537+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.537+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.537276300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.538+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'idToken': rejected value []; codes [NotBlank.googleSignInRequest.idToken,NotBlank.idToken,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.idToken,idToken]; arguments []; default message [idToken]]; default message [ID token is required]] ]
2025-12-25T17:26:56.548+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.549+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@5543d800]
2025-12-25T17:26:56.551+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.551+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.552+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.551746300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.553+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'confirmPassword': rejected value []; codes [NotBlank.resetPasswordRequest.confirmPassword,NotBlank.confirmPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.confirmPassword,confirmPassword]; arguments []; default message [confirmPassword]]; default message [Xác nhận mật khẩu không được để trống]] ]
2025-12-25T17:26:56.563+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.565+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@1c25deb0]
2025-12-25T17:26:56.567+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.568+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.568+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.567559800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.569+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'fullName': rejected value []; codes [NotBlank.sendOtpRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T17:26:56.581+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:26:56.582+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@6fe337a5]
2025-12-25T17:26:56.583+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.584+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@7d60bd5a]
2025-12-25T17:26:56.598+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.599+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@1d2d793d]
2025-12-25T17:26:56.601+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.601+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.601+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.601723700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.602+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'password': rejected value [12345]; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T17:26:56.613+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.614+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@34001c5d]
2025-12-25T17:26:56.615+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.616+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.616+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.616325400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.617+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T17:26:56.627+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.628+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@618e7761]
2025-12-25T17:26:56.628+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.629+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.629+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.629915500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.630+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest) with 2 errors: [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [NotBlank.verifyOtpRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:26:56.641+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:26:56.643+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@30ca66c5]
2025-12-25T17:26:56.644+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.645+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@4abfa2ff]
2025-12-25T17:26:56.653+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.654+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@27234b7c]
2025-12-25T17:26:56.655+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.655+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.655+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.655131100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.656+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value []; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T17:26:56.666+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.667+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@31f9f9b3]
2025-12-25T17:26:56.668+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.668+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@7730da00]
2025-12-25T17:26:56.681+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.682+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@3085befb]
2025-12-25T17:26:56.684+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.684+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@62264d4f]
2025-12-25T17:26:56.697+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.698+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@322eb1a]
2025-12-25T17:26:56.701+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.702+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@2b4ba2d9]
2025-12-25T17:26:56.712+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:26:56.713+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@2c6efee3]
2025-12-25T17:26:56.714+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.714+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.714+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.714833300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.715+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value []; codes [NotBlank.forgotPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:26:56.725+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:26:56.726+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6aa18912]
2025-12-25T17:26:56.726+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:26:56.727+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/login: Invalid username or password
2025-12-25T17:26:56.727+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.727+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.727742300, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T17:26:56.727+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid username or password]
2025-12-25T17:26:56.740+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:26:56.740+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.741+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@1a712f12]
2025-12-25T17:26:56.751+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:26:56.752+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@68fc636a]
2025-12-25T17:26:56.754+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.754+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.754+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.754326600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.755+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'platform': rejected value []; codes [NotBlank.googleSignInRequest.platform,NotBlank.platform,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.platform,platform]; arguments []; default message [platform]]; default message [Platform is required]] ]
2025-12-25T17:26:56.764+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.765+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@656c0eae]
2025-12-25T17:26:56.768+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.768+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.769+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.768542600, status=400, error=Bad Request, message=Passwo (truncated)...]
2025-12-25T17:26:56.769+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Passwords do not match]
2025-12-25T17:26:56.778+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.779+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@45c28c49]
2025-12-25T17:26:56.779+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.781+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.781+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.781179100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.782+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'role': rejected value [null]; codes [NotNull.sendOtpRequest.role,NotNull.role,NotNull.com.petties.petties.model.enums.Role,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.role,role]; arguments []; default message [role]]; default message [Vai trò không được để trống]] ]
2025-12-25T17:26:56.790+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:26:56.792+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@4b1b2255]
2025-12-25T17:26:56.794+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.794+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.794+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.794835300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:56.795+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.sendOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@63896cf7,.*]; default message [Email không hợp lệ]] ]
2025-12-25T17:26:56.815+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:26:56.816+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@27f31d91]
2025-12-25T17:26:56.817+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:26:56.818+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.818+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.818864500, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T17:26:56.819+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T17:26:56.831+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:26:56.833+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@6f5288c5]
2025-12-25T17:26:56.834+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:56.835+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:56.835+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:56.834165, status=400, error=Validation Failed, message=Ema (truncated)...]
2025-12-25T17:26:56.836+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.verifyOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@63896cf7,.*]; default message [Email không hợp lệ]] ]
2025-12-25T17:26:56.856+07:00  INFO 18196 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicControllerUnitTest]: ClinicControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:26:56.884+07:00  INFO 18196 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicControllerUnitTest
2025-12-25T17:26:56.894+07:00  INFO 18196 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:26:57.008+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Starting ClinicControllerUnitTest using Java 21.0.9 with PID 18196 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:26:57.008+07:00 DEBUG 18196 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:26:57.008+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : The following 1 profile is active: "dev"
2025-12-25T17:26:57.016+07:00 DEBUG 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@71a7cf7c
2025-12-25T17:26:57.844+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:26:57.952+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:26:57.968+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:26:57.979+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:26:58.029+07:00  WARN 18196 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:26:58.029+07:00 DEBUG 18196 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:26:58.062+07:00 DEBUG 18196 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:26:58.086+07:00  INFO 18196 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:26:58.086+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:26:58.087+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:26:58.109+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Started ClinicControllerUnitTest in 1.216 seconds (process running for 12.269)
2025-12-25T17:26:58.142+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicImage(UUID, MultipartFile, String, Integer, Boolean)
2025-12-25T17:26:58.158+07:00  INFO 18196 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading image for clinic: 64ce24b4-a135-4c4a-b010-21ec476ff430, file size: 10, content type: image/jpeg
2025-12-25T17:26:58.161+07:00  INFO 18196 --- [petties] [main] c.p.petties.controller.ClinicController  : File uploaded to Cloudinary: http://cloudinary.com/image.jpg
2025-12-25T17:26:58.161+07:00  INFO 18196 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic image saved successfully for clinic: 64ce24b4-a135-4c4a-b010-21ec476ff430
2025-12-25T17:26:58.192+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.193+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@6cb2b947]
2025-12-25T17:26:58.225+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:26:58.239+07:00  WARN 18196 --- [petties] [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-12-25T17:26:58.241+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.242+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:26:58.265+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicLogo(UUID, MultipartFile)
2025-12-25T17:26:58.266+07:00  INFO 18196 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading logo for clinic: 34ca1f3a-713a-4043-bfef-d1f7e622e303, file size: 9, content type: image/jpeg
2025-12-25T17:26:58.269+07:00  INFO 18196 --- [petties] [main] c.p.petties.controller.ClinicController  : Logo uploaded to Cloudinary: url
2025-12-25T17:26:58.270+07:00  INFO 18196 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic logo saved successfully for clinic: 34ca1f3a-713a-4043-bfef-d1f7e622e303
2025-12-25T17:26:58.271+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.271+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@3d8512e9]
2025-12-25T17:26:58.309+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#findNearbyClinics(BigDecimal, BigDecimal, double, int, int)
2025-12-25T17:26:58.323+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.324+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:26:58.354+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T17:26:58.366+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@1e9d6c78]
2025-12-25T17:26:58.389+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.390+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@50331591]
2025-12-25T17:26:58.421+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T17:26:58.423+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.424+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@48a2b492]
2025-12-25T17:26:58.434+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:26:58.439+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.439+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-12-25T17:26:58.456+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#searchClinics(String, int, int)
2025-12-25T17:26:58.462+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.463+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:26:58.475+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T17:26:58.477+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@4b74a4d]
2025-12-25T17:26:58.480+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:26:58.497+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.498+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:58.481067500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:26:58.501+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinic.ClinicResponse> com.petties.petties.controller.ClinicController.createClinic(com.petties.petties.dto.clinic.ClinicRequest): [Field error in object 'clinicRequest' on field 'name': rejected value []; codes [NotBlank.clinicRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicRequest.name,name]; arguments []; default message [name]]; default message [Tên phòng khám không được để trống]] ]
2025-12-25T17:26:58.531+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#approveClinic(UUID)
2025-12-25T17:26:58.532+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.532+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@164cad52]
2025-12-25T17:26:58.548+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T17:26:58.550+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:26:58.551+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.552+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:58.551026500, status=404, error=Not Found, message=Clinic n (truncated)...]
2025-12-25T17:26:58.553+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Clinic not found]
2025-12-25T17:26:58.573+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T17:26:58.575+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@3791160a]
2025-12-25T17:26:58.579+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:26:58.579+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/ca306dec-7765-4f25-8c4e-52de274b2ecc: You can only update your own clinic
2025-12-25T17:26:58.579+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.581+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:26:58.579516400, status=403, error=Forbidden, message=You can  (truncated)...]
2025-12-25T17:26:58.582+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: You can only update your own clinic]
2025-12-25T17:26:58.598+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:26:58.599+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.599+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:26:58.613+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#rejectClinic(UUID, Map)
2025-12-25T17:26:58.614+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [{reason=Invalid information}]
2025-12-25T17:26:58.616+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.616+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@1e186006]
2025-12-25T17:26:58.629+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#deleteClinic(UUID)
2025-12-25T17:26:58.632+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.633+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Clinic deleted successfully}]
2025-12-25T17:26:58.645+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T17:26:58.646+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@7c7a4986]
2025-12-25T17:26:58.647+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:26:58.648+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@32d3b965]
2025-12-25T17:26:58.661+07:00  INFO 18196 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicPriceControllerUnitTest]: ClinicPriceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:26:58.684+07:00  INFO 18196 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicPriceControllerUnitTest
2025-12-25T17:26:58.693+07:00  INFO 18196 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:26:58.737+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Starting ClinicPriceControllerUnitTest using Java 21.0.9 with PID 18196 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:26:58.737+07:00 DEBUG 18196 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:26:58.737+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:26:58.739+07:00 DEBUG 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1f39b3ba
2025-12-25T17:26:59.543+07:00  WARN 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes\com\petties\petties\config\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.petties.petties.config.JwtTokenProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-12-25T17:26:59.556+07:00  INFO 18196 --- [petties] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-25T17:26:59.618+07:00 ERROR 18196 --- [petties] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.petties.petties.config.JwtAuthenticationFilter required a bean of type 'com.petties.petties.config.JwtTokenProvider' that could not be found.


Action:

Consider defining a bean of type 'com.petties.petties.config.JwtTokenProvider' in your configuration.

2025-12-25T17:26:59.626+07:00  WARN 18196 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@2c555efb]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@5ec921f1 testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@172ca6a key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@f1cdc52f, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes\com\petties\petties\config\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.petties.petties.config.JwtTokenProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1371) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1208) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.2.0.jar:6.2.0]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.2.0.jar:6.2.0]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.2.0.jar:6.2.0]
	... 75 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.petties.petties.config.JwtTokenProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:2139) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1589) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1514) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.2.0.jar:6.2.0]
	... 101 common frames omitted

2025-12-25T17:26:59.664+07:00  WARN 18196 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@4d37c996]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5ec921f1 testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@172ca6a key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@f1cdc52f, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:26:59.672+07:00  WARN 18196 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@3f8c4bcf]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5ec921f1 testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@172ca6a key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@f1cdc52f, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:26:59.678+07:00  WARN 18196 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@645b67d6]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5ec921f1 testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@172ca6a key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@f1cdc52f, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:26:59.710+07:00  INFO 18196 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicServiceControllerUnitTest]: ClinicServiceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:26:59.734+07:00  INFO 18196 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicServiceControllerUnitTest
2025-12-25T17:26:59.747+07:00  INFO 18196 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:26:59.817+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 18196 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:26:59.817+07:00 DEBUG 18196 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:26:59.817+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:26:59.823+07:00 DEBUG 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1444e35f
2025-12-25T17:27:00.626+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 13 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:27:00.722+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:27:00.734+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:27:00.753+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:27:00.792+07:00  WARN 18196 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:27:00.793+07:00 DEBUG 18196 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:27:00.816+07:00 DEBUG 18196 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:27:00.829+07:00  INFO 18196 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:27:00.829+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:27:00.830+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:27:00.841+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 1.095 seconds (process running for 15.001)
2025-12-25T17:27:00.863+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID, UUID)
2025-12-25T17:27:00.867+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:00.867+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:27:00.895+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:27:00.906+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@45745de6]
2025-12-25T17:27:00.934+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:00.935+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@1e085e71]
2025-12-25T17:27:00.948+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-25T17:27:00.950+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:00.950+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@28dae87e]
2025-12-25T17:27:00.968+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-25T17:27:00.973+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@444958a4]
2025-12-25T17:27:00.982+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:00.982+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7313e4fb]
2025-12-25T17:27:00.994+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-25T17:27:00.998+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:00.999+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@190ec769]]
2025-12-25T17:27:01.014+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:27:01.016+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:27:01.019+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:01.021+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:01.016305, status=404, error=Not Found, message=Service not (truncated)...]
2025-12-25T17:27:01.021+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-25T17:27:01.029+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:27:01.029+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@e7423bb]
2025-12-25T17:27:01.032+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:01.033+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:01.033+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:01.033015900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:01.035+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinicService.ClinicServiceResponse> com.petties.petties.controller.ClinicServiceController.createService(com.petties.petties.dto.clinicService.ClinicServiceRequest) with 3 errors: [Field error in object 'clinicServiceRequest' on field 'name': rejected value [null]; codes [NotBlank.clinicServiceRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.name,name]; arguments []; default message [name]]; default message [Tên dịch vụ không được để trống]] [Field error in object 'clinicServiceRequest' on field 'slotsRequired': rejected value [null]; codes [NotNull.clinicServiceRequest.slotsRequired,NotNull.slotsRequired,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.slotsRequired,slotsRequired]; arguments []; default message [slotsRequired]]; default message [Số slot yêu cầu không được để trống]] [Field error in object 'clinicServiceRequest' on field 'basePrice': rejected value [null]; codes [NotNull.clinicServiceRequest.basePrice,NotNull.basePrice,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.basePrice,basePrice]; arguments []; default message [basePrice]]; default message [Giá cơ bản không được để trống]] ]
2025-12-25T17:27:01.044+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:27:01.045+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:01.045+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7b0d42b6]
2025-12-25T17:27:01.059+07:00  INFO 18196 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicStaffControllerUnitTest]: ClinicStaffControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:27:01.082+07:00  INFO 18196 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicStaffControllerUnitTest
2025-12-25T17:27:01.088+07:00  INFO 18196 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:27:01.137+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Starting ClinicStaffControllerUnitTest using Java 21.0.9 with PID 18196 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:27:01.138+07:00 DEBUG 18196 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:27:01.138+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:27:01.140+07:00 DEBUG 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@b079fa2
2025-12-25T17:27:01.805+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:27:01.844+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:27:01.852+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:27:01.863+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:27:01.905+07:00  WARN 18196 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:27:01.906+07:00 DEBUG 18196 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:27:01.924+07:00 DEBUG 18196 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:27:01.935+07:00  INFO 18196 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:27:01.935+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:27:01.936+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:27:01.945+07:00  INFO 18196 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Started ClinicStaffControllerUnitTest in 0.858 seconds (process running for 16.105)
2025-12-25T17:27:01.956+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:01.960+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=, phone=0912345678, role=VET)]
2025-12-25T17:27:01.990+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:01.996+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:01.996+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:01.991115100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:01.998+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'fullName': rejected value []; codes [NotBlank.quickAddStaffRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T17:27:02.014+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:02.015+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Duplicate User, phone=0987654321, role=VET)]
2025-12-25T17:27:02.017+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceAlreadyExists(ResourceAlreadyExistsException, HttpServletRequest)
2025-12-25T17:27:02.018+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.018+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.018158200, status=409, error=Conflict, message=Số điện t (truncated)...]
2025-12-25T17:27:02.019+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceAlreadyExistsException: Số điện thoại này đã được đăng ký tài khoản]
2025-12-25T17:27:02.026+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#getStaff(UUID)
2025-12-25T17:27:02.029+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.043+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[StaffResponse(userId=0ede159a-8a05-4115-b5a1-11ece2f89f04, fullName=Vet A, username=null, email=nul (truncated)...]
2025-12-25T17:27:02.062+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:02.063+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Fake Admin, phone=0912345678, role=ADMIN)]
2025-12-25T17:27:02.064+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:27:02.064+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/c9f00f6c-075a-44d7-bebe-7945063d678c/staff/quick-add: Không thể tạo tài khoản ADMIN qua chức năng này
2025-12-25T17:27:02.064+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.064+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.064803900, status=403, error=Forbidden, message=Không th (truncated)...]
2025-12-25T17:27:02.065+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Không thể tạo tài khoản ADMIN qua chức năng này]
2025-12-25T17:27:02.071+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:02.077+07:00 DEBUG 18196 --- [petties] [main] o.s.web.method.HandlerMethod             : Could not resolve parameter [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]
2025-12-25T17:27:02.077+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleHttpMessageNotReadable(HttpMessageNotReadableException, HttpServletRequest)
2025-12-25T17:27:02.078+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.078+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.077964500, status=400, error=Bad Request, message=Dữ liệ (truncated)...]
2025-12-25T17:27:02.078+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]]
2025-12-25T17:27:02.088+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#removeStaff(UUID, UUID)
2025-12-25T17:27:02.091+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:27:02.092+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff removed successfully"]
2025-12-25T17:27:02.105+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:02.106+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Tester, phone=123, role=VET)]
2025-12-25T17:27:02.109+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:02.111+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.112+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.109471, status=400, error=Validation Failed, message=Số  (truncated)...]
2025-12-25T17:27:02.113+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'phone': rejected value [123]; codes [Pattern.quickAddStaffRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^[0-9]{10,11}$]; default message [Số điện thoại không hợp lệ]] ]
2025-12-25T17:27:02.121+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T17:27:02.123+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:27:02.123+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Clinic Manager assigned successfully"]
2025-12-25T17:27:02.144+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T17:27:02.146+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:27:02.146+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.146+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.146479300, status=404, error=Not Found, message=User not (truncated)...]
2025-12-25T17:27:02.147+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: User not found]
2025-12-25T17:27:02.153+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:02.153+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T17:27:02.154+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:27:02.155+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff account created and assigned successfully"]
2025-12-25T17:27:02.163+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignVet(UUID, String)
2025-12-25T17:27:02.164+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:27:02.165+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/c7c11f4f-4f98-4b1f-bbe6-ff6dddb7496a/staff/vet/vet@test.com: Bạn không có quyền quản lý phòng khám này
2025-12-25T17:27:02.165+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.165+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.165935200, status=403, error=Forbidden, message=Bạn khôn (truncated)...]
2025-12-25T17:27:02.166+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Bạn không có quyền quản lý phòng khám này]
2025-12-25T17:27:02.177+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:27:02.178+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T17:27:02.179+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:27:02.180+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/e7a663b8-49ee-458f-8414-ed6bf20f694d/staff/quick-add: Quản lý phòng khám chỉ có quyền thêm Bác sĩ
2025-12-25T17:27:02.180+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.180+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.180070200, status=403, error=Forbidden, message=Quản lý  (truncated)...]
2025-12-25T17:27:02.181+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Quản lý phòng khám chỉ có quyền thêm Bác sĩ]
2025-12-25T17:27:02.195+07:00  INFO 18196 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.UserControllerUnitTest]: UserControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:27:02.211+07:00  INFO 18196 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.UserControllerUnitTest
2025-12-25T17:27:02.216+07:00  INFO 18196 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:27:02.243+07:00  INFO 18196 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Starting UserControllerUnitTest using Java 21.0.9 with PID 18196 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:27:02.243+07:00 DEBUG 18196 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:27:02.243+07:00  INFO 18196 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:27:02.245+07:00 DEBUG 18196 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2b960c2b
2025-12-25T17:27:02.726+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:27:02.790+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:27:02.799+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:27:02.809+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:27:02.833+07:00  WARN 18196 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:27:02.833+07:00 DEBUG 18196 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:27:02.847+07:00 DEBUG 18196 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:27:02.861+07:00  INFO 18196 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:27:02.861+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:27:02.862+07:00  INFO 18196 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:27:02.872+07:00  INFO 18196 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Started UserControllerUnitTest in 0.656 seconds (process running for 17.032)
2025-12-25T17:27:02.887+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:02.891+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=12345)]
2025-12-25T17:27:02.900+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:02.906+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.907+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.901335800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:02.909+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [12345]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:27:02.925+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:27:02.927+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@46ce6678]
2025-12-25T17:27:02.933+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:02.936+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.936+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.935491700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:02.937+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'phone': rejected value [not-a-number]; codes [Pattern.updateProfileRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^0\d{9,10}$]; default message [Số điện thoại không hợp lệ (10-11 số, bắt đầu bằng 0)]] ]
2025-12-25T17:27:02.950+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:27:02.952+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@fff33b4]
2025-12-25T17:27:02.953+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:02.954+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.954+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:02.954010600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:02.954+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'fullName': rejected value []; codes [Size.updateProfileRequest.fullName,Size.fullName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.fullName,fullName]; arguments []; default message [fullName],100,2]; default message [Họ tên phải từ 2-100 ký tự]] ]
2025-12-25T17:27:02.968+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:27:02.973+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.974+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@3dc455f6]
2025-12-25T17:27:02.984+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:27:02.986+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:02.987+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@f5a1b27]
2025-12-25T17:27:03.004+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:27:03.009+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.009+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/resend-otp: User not authenticated
2025-12-25T17:27:03.009+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.009+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.009421300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.010+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.026+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:27:03.028+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.028+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T17:27:03.029+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.029+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.028787600, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.029+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.046+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.049+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=)]
2025-12-25T17:27:03.055+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.056+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.057+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.056114400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.058+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T17:27:03.073+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.073+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=1234567)]
2025-12-25T17:27:03.075+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.075+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.076+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.075207100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.077+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [1234567]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:27:03.094+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:27:03.096+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@2227fa03]
2025-12-25T17:27:03.104+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.104+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.105+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.104165300, status=400, error=Bad Request, message=Mật kh (truncated)...]
2025-12-25T17:27:03.105+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Mật khẩu hiện tại không chính xác]
2025-12-25T17:27:03.115+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.116+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=not-an-email)]
2025-12-25T17:27:03.117+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.118+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.118+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.117429300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.118+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@63896cf7,.*]; default message [Email khong hop le]] ]
2025-12-25T17:27:03.126+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:27:03.127+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@256edef4]
2025-12-25T17:27:03.129+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.130+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Doi mat khau thanh cong}]
2025-12-25T17:27:03.142+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T17:27:03.144+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.145+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@355c2b72]
2025-12-25T17:27:03.157+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.158+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=)]
2025-12-25T17:27:03.160+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.161+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.161+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.160294400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.162+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest) with 2 errors: [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [NotBlank.emailChangeVerifyRequest.otp,NotBlank.otp,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp]]; default message [Ma OTP khong duoc de trong]] [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:27:03.173+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:27:03.175+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.175+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.176+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.175390200, status=400, error=Bad Request, message=File i (truncated)...]
2025-12-25T17:27:03.176+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: File is empty]
2025-12-25T17:27:03.189+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.193+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=not-an-email, otp=123456)]
2025-12-25T17:27:03.196+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.197+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.198+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.197188800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.198+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeVerifyRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@63896cf7,.*]; default message [Email khong hop le]] ]
2025-12-25T17:27:03.209+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:27:03.209+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@339cedbb]
2025-12-25T17:27:03.212+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.212+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T17:27:03.212+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.212+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.212102800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.213+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.221+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.221+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:27:03.222+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.226+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=OTP da duoc gui den email moi}]
2025-12-25T17:27:03.243+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:27:03.244+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.245+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T17:27:03.245+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.245+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.245948300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.245+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.255+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:27:03.257+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.257+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.257+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.257509300, status=400, error=Bad Request, message=Khong  (truncated)...]
2025-12-25T17:27:03.257+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Khong co yeu cau thay doi email. Vui long tao yeu cau moi.]
2025-12-25T17:27:03.268+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.269+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=test@example.com)]
2025-12-25T17:27:03.274+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.274+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.274+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.274034, status=400, error=Bad Request, message=Email moi (truncated)...]
2025-12-25T17:27:03.275+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi phai khac email hien tai]
2025-12-25T17:27:03.285+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.286+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:27:03.288+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.288+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/request-change: User not authenticated
2025-12-25T17:27:03.288+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.288+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.288253200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.288+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.318+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:27:03.319+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@787073b3]
2025-12-25T17:27:03.322+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.322+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@53a52b3f]
2025-12-25T17:27:03.335+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.336+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:27:03.338+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.338+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.338+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.338311800, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T17:27:03.339+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 45 giay truoc khi gui lai ma OTP]
2025-12-25T17:27:03.351+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.352+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:27:03.357+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.359+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.359+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.357927600, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-25T17:27:03.363+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong chinh xac hoac da het han]
2025-12-25T17:27:03.390+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:27:03.391+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.391+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Ma OTP moi da duoc gui den email moi}]
2025-12-25T17:27:03.432+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.433+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T17:27:03.438+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.439+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.439+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.439828600, status=400, error=Bad Request, message=Ban da (truncated)...]
2025-12-25T17:27:03.441+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ban da nhap sai ma OTP qua nhieu lan. Vui long yeu cau gui ma OTP moi.]
2025-12-25T17:27:03.460+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.461+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=, otp=123456)]
2025-12-25T17:27:03.462+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.463+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.463+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.462941500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.464+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeVerifyRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T17:27:03.484+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.485+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=different@example.com, otp=123456)]
2025-12-25T17:27:03.496+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.496+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.496+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.496666, status=400, error=Bad Request, message=Email moi (truncated)...]
2025-12-25T17:27:03.498+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi khong khop voi yeu cau truoc do]
2025-12-25T17:27:03.516+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:27:03.517+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=existing@example.com)]
2025-12-25T17:27:03.519+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.521+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.521+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.521352400, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:27:03.522+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T17:27:03.538+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.542+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:27:03.544+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.545+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@612c4c10]
2025-12-25T17:27:03.569+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.571+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T17:27:03.572+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.573+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.573+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.573708, status=400, error=Bad Request, message=Ma OTP kh (truncated)...]
2025-12-25T17:27:03.574+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong dung. Ban con 4 lan thu.]
2025-12-25T17:27:03.603+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T17:27:03.606+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.606+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T17:27:03.607+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.607+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.606385900, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.611+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.647+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:27:03.657+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.661+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.661+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.657659800, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T17:27:03.663+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 30 giay truoc khi gui lai ma OTP]
2025-12-25T17:27:03.681+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.682+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=abc123)]
2025-12-25T17:27:03.683+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:27:03.684+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.684+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.684814200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:27:03.685+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [abc123]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@7a7f2247,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:27:03.710+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:27:03.713+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@6aca85da]
2025-12-25T17:27:03.717+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.717+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/password: User not authenticated
2025-12-25T17:27:03.718+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.719+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.718555700, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.719+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:03.801+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:27:03.803+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.812+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.812+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.803541300, status=400, error=Bad Request, message=User n (truncated)...]
2025-12-25T17:27:03.817+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: User not found]
2025-12-25T17:27:03.850+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:27:03.855+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:27:03.857+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.858+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.856304, status=400, error=Bad Request, message=Email da  (truncated)...]
2025-12-25T17:27:03.859+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T17:27:03.870+07:00 DEBUG 18196 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:27:03.873+07:00 DEBUG 18196 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:27:03.875+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:27:03.876+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/verify-change: User not authenticated
2025-12-25T17:27:03.878+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:27:03.879+07:00 DEBUG 18196 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:27:03.876910200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:27:03.879+07:00 DEBUG 18196 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:27:04.934+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Authentication failed at /api/v1/test: Full authentication required
2025-12-25T17:27:04.938+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Authentication failed at /api/v1/test: null
2025-12-25T17:27:04.960+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /api/v1/test: Chua xac thuc
2025-12-25T17:27:05.011+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Access Denied to /api/v1/test: Access is denied
2025-12-25T17:27:05.018+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Access Denied to /api/v1/test: Access denied
2025-12-25T17:27:05.027+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: Forbidden
2025-12-25T17:27:05.036+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: 
2025-12-25T17:27:05.043+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: null
2025-12-25T17:27:05.047+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test:    
2025-12-25T17:27:05.051+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: Ban khong co quyen xem tai nguyen nay
2025-12-25T17:27:05.068+07:00 ERROR 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unexpected error occurred at /api/v1/test: 

java.lang.RuntimeException: Some unexpected error
	at com.petties.petties.exception.GlobalExceptionHandlerTest$GenericExceptionTests.handleGenericException_ShouldReturn500Status(GlobalExceptionHandlerTest.java:125) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767) ~[junit-platform-commons-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:27:05.087+07:00 ERROR 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unexpected error occurred at /api/v1/test: 

java.lang.Exception: Unexpected error
	at com.petties.petties.exception.GlobalExceptionHandlerTest$GenericExceptionTests.handleGenericException_ShouldReturnVietnameseMessage(GlobalExceptionHandlerTest.java:108) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767) ~[junit-platform-commons-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:27:05.098+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Bad credentials attempt at /api/v1/test
2025-12-25T17:27:05.106+07:00  WARN 18196 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Bad credentials attempt at /api/v1/test
2025-12-25T17:27:05.216+07:00 DEBUG 18196 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@55cff952, started on Thu Dec 25 17:26:49 ICT 2025
2025-12-25T17:27:05.220+07:00 DEBUG 18196 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@71a7cf7c, started on Thu Dec 25 17:26:57 ICT 2025
2025-12-25T17:27:05.223+07:00 DEBUG 18196 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@1444e35f, started on Thu Dec 25 17:26:59 ICT 2025
2025-12-25T17:27:05.225+07:00 DEBUG 18196 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@b079fa2, started on Thu Dec 25 17:27:01 ICT 2025
2025-12-25T17:27:05.227+07:00 DEBUG 18196 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@2b960c2b, started on Thu Dec 25 17:27:02 ICT 2025
2025-12-25T17:28:20.024+07:00  INFO 7944 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Starting AuthControllerUnitTest using Java 21.0.9 with PID 7944 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:28:20.025+07:00 DEBUG 7944 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:28:20.027+07:00  INFO 7944 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:28:20.060+07:00 DEBUG 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@55cff952
2025-12-25T17:28:24.938+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:28:25.243+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:28:25.517+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:28:25.623+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:28:25.791+07:00  WARN 7944 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:28:25.791+07:00 DEBUG 7944 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:28:26.052+07:00 DEBUG 7944 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:28:26.196+07:00  INFO 7944 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:28:26.196+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:28:26.198+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:28:26.280+07:00  INFO 7944 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Started AuthControllerUnitTest in 6.958 seconds (process running for 9.384)
2025-12-25T17:28:26.496+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:26.578+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@6d946eee]
2025-12-25T17:28:26.758+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:26.808+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:26.817+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:26.763348600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:26.836+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [NotBlank.sendOtpRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password]]; default message [Mật khẩu không được để trống]] [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T17:28:26.944+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:26.946+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@515d615]
2025-12-25T17:28:26.954+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:26.954+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:26.955+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:26.954428400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:26.956+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [1234567]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:28:26.997+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.003+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@7698a3d9]
2025-12-25T17:28:27.029+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.030+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.031+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.029415, status=400, error=Bad Request, message=Invalid O (truncated)...]
2025-12-25T17:28:27.032+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T17:28:27.069+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:27.073+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6987b74e]
2025-12-25T17:28:27.097+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.098+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@64eb14da]
2025-12-25T17:28:27.189+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:28:27.191+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@3911fec8]
2025-12-25T17:28:27.197+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.197+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@43e2b8da]
2025-12-25T17:28:27.222+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:27.224+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@20e9c165]
2025-12-25T17:28:27.225+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.226+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.226+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.226041400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.227+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value [null]; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T17:28:27.254+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.256+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@55e88bc]
2025-12-25T17:28:27.259+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.259+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.259+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.259308200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.261+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [NotBlank.resetPasswordRequest.newPassword,NotBlank.newPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword]]; default message [Mật khẩu mới không được để trống]] ]
2025-12-25T17:28:27.284+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.286+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@772bc4c9]
2025-12-25T17:28:27.288+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.289+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.290+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.289775, status=400, error=Validation Failed, message=Mã  (truncated)...]
2025-12-25T17:28:27.295+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [NotBlank.resetPasswordRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-25T17:28:27.322+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:27.324+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@77972964]
2025-12-25T17:28:27.327+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.328+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.328+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.327919200, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T17:28:27.329+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T17:28:27.352+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:28:27.370+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.371+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@32c8d67]
2025-12-25T17:28:27.412+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:28:27.417+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.417+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.418+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.417889700, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T17:28:27.419+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T17:28:27.443+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.444+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@2de07c57]
2025-12-25T17:28:27.449+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.449+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.MessageResponse@76cbee13]
2025-12-25T17:28:27.474+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:27.475+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@4d9cf71d]
2025-12-25T17:28:27.481+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.483+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.483+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.482581800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.487+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value []; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T17:28:27.508+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.512+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@49322d04]
2025-12-25T17:28:27.517+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.518+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.519+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.517324500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.523+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value []; codes [NotBlank.resetPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:28:27.546+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:27.547+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@5eae392d]
2025-12-25T17:28:27.551+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.552+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.552+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.551031300, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T17:28:27.552+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T17:28:27.568+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:27.572+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6e22d6bf]
2025-12-25T17:28:27.574+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.574+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@32121140]
2025-12-25T17:28:27.592+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.593+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@6b756a62]
2025-12-25T17:28:27.595+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.597+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.598+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.595230100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.601+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value [Pass1]; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-25T17:28:27.626+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.628+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@6ad0cd43]
2025-12-25T17:28:27.630+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.632+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.633+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.632955300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.636+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.resetPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@7fe0ca60,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T17:28:27.659+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:27.663+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@46c9ee28]
2025-12-25T17:28:27.664+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.665+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.666+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.665182900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.668+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value []; codes [NotBlank.sendOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:28:27.690+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:27.697+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@33214124]
2025-12-25T17:28:27.703+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.703+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.704+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.703600200, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:28:27.704+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email already exists]
2025-12-25T17:28:27.727+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:27.728+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@3dc7c5fd]
2025-12-25T17:28:27.731+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.732+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@62871522]
2025-12-25T17:28:27.750+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:28:27.758+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.760+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.761+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.759155700, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T17:28:27.764+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending password reset found]
2025-12-25T17:28:27.808+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:27.813+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@7c8a91e2]
2025-12-25T17:28:27.817+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.818+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.819+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.817783400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.821+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'username': rejected value [ab]; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-25T17:28:27.836+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:28:27.838+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.838+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.839+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.838993800, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T17:28:27.841+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T17:28:27.855+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:28:27.856+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@4a10c019]
2025-12-25T17:28:27.859+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:27.860+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/google: Invalid Google ID token
2025-12-25T17:28:27.865+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.865+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.865212300, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T17:28:27.866+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid Google ID token]
2025-12-25T17:28:27.899+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:28:27.904+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@391e2a]
2025-12-25T17:28:27.914+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:27.916+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.918+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.916773300, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:28:27.919+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email not found]
2025-12-25T17:28:27.936+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:28:27.937+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@6a8bcb64]
2025-12-25T17:28:27.940+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.942+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.942+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.941181300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.945+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.forgotPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@7fe0ca60,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T17:28:27.962+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:27.965+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4419cd6e]
2025-12-25T17:28:27.969+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:27.970+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:27.970+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:27.969053700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:27.973+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value [abc123]; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-25T17:28:27.994+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:27.996+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@309e7215]
2025-12-25T17:28:27.998+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.003+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.004+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.001468400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.007+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [12345]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:28:28.029+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:28.034+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@a0bdbe2]
2025-12-25T17:28:28.036+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.037+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.037+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.037655600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.039+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [NotBlank.sendOtpRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username]]; default message [Tên đăng nhập không được để trống]] ]
2025-12-25T17:28:28.063+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:28:28.065+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:28.066+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.067+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.066612900, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T17:28:28.067+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending registration found]
2025-12-25T17:28:28.102+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:28.104+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@299dd381]
2025-12-25T17:28:28.106+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.107+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.109+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.107270900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.113+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value []; codes [NotBlank.verifyOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:28:28.135+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:28:28.137+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@7fa68ff4]
2025-12-25T17:28:28.139+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.141+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.141+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.140736300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.142+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'idToken': rejected value []; codes [NotBlank.googleSignInRequest.idToken,NotBlank.idToken,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.idToken,idToken]; arguments []; default message [idToken]]; default message [ID token is required]] ]
2025-12-25T17:28:28.156+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:28.159+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4e210016]
2025-12-25T17:28:28.162+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.163+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.164+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.163381700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.165+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'confirmPassword': rejected value []; codes [NotBlank.resetPasswordRequest.confirmPassword,NotBlank.confirmPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.confirmPassword,confirmPassword]; arguments []; default message [confirmPassword]]; default message [Xác nhận mật khẩu không được để trống]] ]
2025-12-25T17:28:28.191+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:28.194+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@58e4aa67]
2025-12-25T17:28:28.198+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.199+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.199+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.198219900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.203+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'fullName': rejected value []; codes [NotBlank.sendOtpRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T17:28:28.227+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:28:28.227+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@66ab088c]
2025-12-25T17:28:28.230+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.230+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@5d01a2eb]
2025-12-25T17:28:28.244+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:28.245+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@13f7c165]
2025-12-25T17:28:28.248+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.249+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.250+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.249348700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.254+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'password': rejected value [12345]; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T17:28:28.268+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:28.272+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@637c8632]
2025-12-25T17:28:28.274+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.275+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.275+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.274581, status=400, error=Validation Failed, message=Pas (truncated)...]
2025-12-25T17:28:28.276+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T17:28:28.301+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:28.305+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@37ab1b10]
2025-12-25T17:28:28.307+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.308+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.309+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.308073200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.310+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest) with 2 errors: [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [NotBlank.verifyOtpRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] ]
2025-12-25T17:28:28.335+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:28:28.337+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@34f8ce89]
2025-12-25T17:28:28.338+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.340+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@22ed2886]
2025-12-25T17:28:28.360+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:28.362+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@73230721]
2025-12-25T17:28:28.364+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.365+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.365+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.364848400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.367+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value []; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T17:28:28.383+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:28.384+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@792b9dd3]
2025-12-25T17:28:28.387+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.388+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@cbc3bf3]
2025-12-25T17:28:28.421+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:28.425+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@3fdede3a]
2025-12-25T17:28:28.427+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.427+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@41948c13]
2025-12-25T17:28:28.441+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:28.442+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@4ed19540]
2025-12-25T17:28:28.445+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.445+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@533e8807]
2025-12-25T17:28:28.459+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:28:28.461+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@4eab9aec]
2025-12-25T17:28:28.463+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.465+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.466+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.464334800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.468+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value []; codes [NotBlank.forgotPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:28:28.483+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:28:28.484+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@4542af89]
2025-12-25T17:28:28.488+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:28.489+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/login: Invalid username or password
2025-12-25T17:28:28.489+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.489+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.489248800, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T17:28:28.491+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid username or password]
2025-12-25T17:28:28.515+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:28:28.517+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.517+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@2202c92f]
2025-12-25T17:28:28.528+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:28:28.529+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@56adbb07]
2025-12-25T17:28:28.531+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.531+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.531+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.531675500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.532+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'platform': rejected value []; codes [NotBlank.googleSignInRequest.platform,NotBlank.platform,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.platform,platform]; arguments []; default message [platform]]; default message [Platform is required]] ]
2025-12-25T17:28:28.544+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:28.546+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@237ee2e1]
2025-12-25T17:28:28.550+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:28.551+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.551+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.551127700, status=400, error=Bad Request, message=Passwo (truncated)...]
2025-12-25T17:28:28.552+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Passwords do not match]
2025-12-25T17:28:28.567+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:28.568+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@4113d9ab]
2025-12-25T17:28:28.570+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.571+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.571+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.570741400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.572+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'role': rejected value [null]; codes [NotNull.sendOtpRequest.role,NotNull.role,NotNull.com.petties.petties.model.enums.Role,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.role,role]; arguments []; default message [role]]; default message [Vai trò không được để trống]] ]
2025-12-25T17:28:28.583+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:28:28.584+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@23ee92df]
2025-12-25T17:28:28.585+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.585+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.585+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.585906100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.586+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.sendOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@7fe0ca60,.*]; default message [Email không hợp lệ]] ]
2025-12-25T17:28:28.609+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:28:28.613+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@5644f664]
2025-12-25T17:28:28.614+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:28.615+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.615+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.614105, status=400, error=Bad Request, message=OTP has e (truncated)...]
2025-12-25T17:28:28.615+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T17:28:28.628+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:28:28.629+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@251e2f4a]
2025-12-25T17:28:28.632+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:28.634+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:28.634+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:28.633376200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:28.635+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.verifyOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@7fe0ca60,.*]; default message [Email không hợp lệ]] ]
2025-12-25T17:28:28.682+07:00  INFO 7944 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicControllerUnitTest]: ClinicControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:28:28.750+07:00  INFO 7944 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicControllerUnitTest
2025-12-25T17:28:28.773+07:00  INFO 7944 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:28:28.896+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Starting ClinicControllerUnitTest using Java 21.0.9 with PID 7944 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:28:28.896+07:00 DEBUG 7944 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:28:28.897+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : The following 1 profile is active: "dev"
2025-12-25T17:28:28.905+07:00 DEBUG 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@27107a97
2025-12-25T17:28:30.875+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:28:31.072+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:28:31.081+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:28:31.094+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:28:31.130+07:00  WARN 7944 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:28:31.132+07:00 DEBUG 7944 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:28:31.156+07:00 DEBUG 7944 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:28:31.176+07:00  INFO 7944 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:28:31.177+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:28:31.178+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:28:31.190+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Started ClinicControllerUnitTest in 2.418 seconds (process running for 14.293)
2025-12-25T17:28:31.213+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicImage(UUID, MultipartFile, String, Integer, Boolean)
2025-12-25T17:28:31.218+07:00  INFO 7944 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading image for clinic: 8c1e4eb2-b7c6-4f1e-a28a-1000d4b2da2a, file size: 10, content type: image/jpeg
2025-12-25T17:28:31.219+07:00  INFO 7944 --- [petties] [main] c.p.petties.controller.ClinicController  : File uploaded to Cloudinary: http://cloudinary.com/image.jpg
2025-12-25T17:28:31.219+07:00  INFO 7944 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic image saved successfully for clinic: 8c1e4eb2-b7c6-4f1e-a28a-1000d4b2da2a
2025-12-25T17:28:31.244+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.244+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@6cb2b947]
2025-12-25T17:28:31.269+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:28:31.282+07:00  WARN 7944 --- [petties] [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-12-25T17:28:31.284+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.285+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:28:31.309+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicLogo(UUID, MultipartFile)
2025-12-25T17:28:31.310+07:00  INFO 7944 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading logo for clinic: cb9cfa46-29cd-4da9-bdfb-93c2ec9848ae, file size: 9, content type: image/jpeg
2025-12-25T17:28:31.312+07:00  INFO 7944 --- [petties] [main] c.p.petties.controller.ClinicController  : Logo uploaded to Cloudinary: url
2025-12-25T17:28:31.313+07:00  INFO 7944 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic logo saved successfully for clinic: cb9cfa46-29cd-4da9-bdfb-93c2ec9848ae
2025-12-25T17:28:31.314+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.314+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@46f597f1]
2025-12-25T17:28:31.324+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#findNearbyClinics(BigDecimal, BigDecimal, double, int, int)
2025-12-25T17:28:31.332+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.332+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:28:31.348+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T17:28:31.355+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@27f4761b]
2025-12-25T17:28:31.372+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.372+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@5cfde2a4]
2025-12-25T17:28:31.381+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T17:28:31.382+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.382+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@7bf997e0]
2025-12-25T17:28:31.398+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:28:31.399+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.399+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-12-25T17:28:31.409+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#searchClinics(String, int, int)
2025-12-25T17:28:31.414+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.414+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:28:31.424+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T17:28:31.424+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@63df2eb8]
2025-12-25T17:28:31.427+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:31.434+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.435+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:31.427391500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:31.436+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinic.ClinicResponse> com.petties.petties.controller.ClinicController.createClinic(com.petties.petties.dto.clinic.ClinicRequest): [Field error in object 'clinicRequest' on field 'name': rejected value []; codes [NotBlank.clinicRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicRequest.name,name]; arguments []; default message [name]]; default message [Tên phòng khám không được để trống]] ]
2025-12-25T17:28:31.444+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#approveClinic(UUID)
2025-12-25T17:28:31.446+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.446+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@5b977aaa]
2025-12-25T17:28:31.453+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T17:28:31.454+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:28:31.455+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.455+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:31.454832300, status=404, error=Not Found, message=Clinic n (truncated)...]
2025-12-25T17:28:31.455+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Clinic not found]
2025-12-25T17:28:31.466+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T17:28:31.468+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@1d9cac6e]
2025-12-25T17:28:31.470+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:28:31.470+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/c8dfd53d-a071-4900-ad66-7dcafaeabf1f: You can only update your own clinic
2025-12-25T17:28:31.472+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.472+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:31.471914500, status=403, error=Forbidden, message=You can  (truncated)...]
2025-12-25T17:28:31.472+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: You can only update your own clinic]
2025-12-25T17:28:31.480+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:28:31.482+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.482+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:28:31.494+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#rejectClinic(UUID, Map)
2025-12-25T17:28:31.497+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [{reason=Invalid information}]
2025-12-25T17:28:31.498+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.498+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@761ea1f5]
2025-12-25T17:28:31.509+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#deleteClinic(UUID)
2025-12-25T17:28:31.512+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.513+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Clinic deleted successfully}]
2025-12-25T17:28:31.520+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T17:28:31.521+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@32d3b965]
2025-12-25T17:28:31.522+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:31.523+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@7fb2645b]
2025-12-25T17:28:31.537+07:00  INFO 7944 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicPriceControllerUnitTest]: ClinicPriceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:28:31.561+07:00  INFO 7944 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicPriceControllerUnitTest
2025-12-25T17:28:31.571+07:00  INFO 7944 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:28:31.626+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Starting ClinicPriceControllerUnitTest using Java 21.0.9 with PID 7944 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:28:31.627+07:00 DEBUG 7944 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:28:31.627+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:28:31.632+07:00 DEBUG 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@53b579d2
2025-12-25T17:28:32.242+07:00  WARN 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes\com\petties\petties\config\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.petties.petties.config.JwtTokenProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-12-25T17:28:32.254+07:00  INFO 7944 --- [petties] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-25T17:28:32.308+07:00 ERROR 7944 --- [petties] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.petties.petties.config.JwtAuthenticationFilter required a bean of type 'com.petties.petties.config.JwtTokenProvider' that could not be found.


Action:

Consider defining a bean of type 'com.petties.petties.config.JwtTokenProvider' in your configuration.

2025-12-25T17:28:32.320+07:00  WARN 7944 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@17796f47]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@172ca6a testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@174e5929 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@1cf1815c, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes\com\petties\petties\config\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.petties.petties.config.JwtTokenProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1371) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1208) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:288) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.0.jar:6.2.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.2.0.jar:6.2.0]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.2.0.jar:6.2.0]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461) ~[spring-boot-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.4.0.jar:3.4.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.2.0.jar:6.2.0]
	... 75 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.petties.petties.config.JwtTokenProvider' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:2139) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1589) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1514) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913) ~[spring-beans-6.2.0.jar:6.2.0]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.2.0.jar:6.2.0]
	... 101 common frames omitted

2025-12-25T17:28:32.356+07:00  WARN 7944 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@85eabca]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@172ca6a testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@174e5929 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@1cf1815c, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:28:32.363+07:00  WARN 7944 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@175377d3]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@172ca6a testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@174e5929 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@1cf1815c, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:28:32.370+07:00  WARN 7944 --- [petties] [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener] to prepare test instance [com.petties.petties.controller.ClinicPriceControllerUnitTest@1926806c]

java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@172ca6a testClass = com.petties.petties.controller.ClinicPriceControllerUnitTest, locations = [], classes = [com.petties.petties.PettiesApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@174e5929 key = [org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3da30852, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4c51cf28, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@4fad9bb2, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@3a12c404, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@149dd36b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@b0d6dc5d, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1df2c574, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@53bd8fca, org.springframework.test.context.bean.override.BeanOverrideContextCustomizer@1cf1815c, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@85ffc57b], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.injectFields(BeanOverrideTestExecutionListener.java:87) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.bean.override.BeanOverrideTestExecutionListener.prepareTestInstance(BeanOverrideTestExecutionListener.java:58) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.2.0.jar:6.2.0]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:160) ~[spring-test-6.2.0.jar:6.2.0]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$12(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$7(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$6(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$1(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:28:32.392+07:00  INFO 7944 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicServiceControllerUnitTest]: ClinicServiceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:28:32.459+07:00  INFO 7944 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicServiceControllerUnitTest
2025-12-25T17:28:32.469+07:00  INFO 7944 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:28:32.577+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 7944 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:28:32.577+07:00 DEBUG 7944 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:28:32.577+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:28:32.580+07:00 DEBUG 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3f563397
2025-12-25T17:28:33.121+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 13 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:28:33.171+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:28:33.178+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:28:33.185+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:28:33.213+07:00  WARN 7944 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:28:33.213+07:00 DEBUG 7944 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:28:33.234+07:00 DEBUG 7944 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:28:33.255+07:00  INFO 7944 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:28:33.256+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:28:33.257+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:28:33.274+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 0.807 seconds (process running for 16.377)
2025-12-25T17:28:33.308+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID, UUID)
2025-12-25T17:28:33.315+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.316+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:28:33.358+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:28:33.377+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@7f9ebcfe]
2025-12-25T17:28:33.410+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.411+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@3dab9366]
2025-12-25T17:28:33.430+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-25T17:28:33.433+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.433+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@80f3111]
2025-12-25T17:28:33.447+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-25T17:28:33.453+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@19aa9540]
2025-12-25T17:28:33.462+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.463+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@3e5e7f4c]
2025-12-25T17:28:33.477+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-25T17:28:33.483+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.484+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@27bd124a]]
2025-12-25T17:28:33.509+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:28:33.516+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:28:33.526+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.527+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:33.518106900, status=404, error=Not Found, message=Service  (truncated)...]
2025-12-25T17:28:33.528+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-25T17:28:33.538+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:28:33.541+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@270663e2]
2025-12-25T17:28:33.545+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:33.545+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.546+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:33.545546500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:33.548+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinicService.ClinicServiceResponse> com.petties.petties.controller.ClinicServiceController.createService(com.petties.petties.dto.clinicService.ClinicServiceRequest) with 3 errors: [Field error in object 'clinicServiceRequest' on field 'slotsRequired': rejected value [null]; codes [NotNull.clinicServiceRequest.slotsRequired,NotNull.slotsRequired,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.slotsRequired,slotsRequired]; arguments []; default message [slotsRequired]]; default message [Số slot yêu cầu không được để trống]] [Field error in object 'clinicServiceRequest' on field 'basePrice': rejected value [null]; codes [NotNull.clinicServiceRequest.basePrice,NotNull.basePrice,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.basePrice,basePrice]; arguments []; default message [basePrice]]; default message [Giá cơ bản không được để trống]] [Field error in object 'clinicServiceRequest' on field 'name': rejected value [null]; codes [NotBlank.clinicServiceRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.name,name]; arguments []; default message [name]]; default message [Tên dịch vụ không được để trống]] ]
2025-12-25T17:28:33.558+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:28:33.577+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:33.578+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@179af25f]
2025-12-25T17:28:33.618+07:00  INFO 7944 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicStaffControllerUnitTest]: ClinicStaffControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:28:33.669+07:00  INFO 7944 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicStaffControllerUnitTest
2025-12-25T17:28:33.676+07:00  INFO 7944 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:28:33.754+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Starting ClinicStaffControllerUnitTest using Java 21.0.9 with PID 7944 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:28:33.754+07:00 DEBUG 7944 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:28:33.754+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:28:33.756+07:00 DEBUG 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@25198ead
2025-12-25T17:28:34.285+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:28:34.365+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:28:34.374+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:28:34.386+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:28:34.424+07:00  WARN 7944 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:28:34.425+07:00 DEBUG 7944 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:28:34.453+07:00 DEBUG 7944 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:28:34.466+07:00  INFO 7944 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:28:34.466+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:28:34.469+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-12-25T17:28:34.485+07:00  INFO 7944 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Started ClinicStaffControllerUnitTest in 0.808 seconds (process running for 17.587)
2025-12-25T17:28:34.503+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.509+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=, phone=0912345678, role=VET)]
2025-12-25T17:28:34.536+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:34.546+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.547+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.537994500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:34.550+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'fullName': rejected value []; codes [NotBlank.quickAddStaffRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T17:28:34.566+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.567+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Duplicate User, phone=0987654321, role=VET)]
2025-12-25T17:28:34.571+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceAlreadyExists(ResourceAlreadyExistsException, HttpServletRequest)
2025-12-25T17:28:34.572+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.573+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.571813600, status=409, error=Conflict, message=Số điện t (truncated)...]
2025-12-25T17:28:34.574+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceAlreadyExistsException: Số điện thoại này đã được đăng ký tài khoản]
2025-12-25T17:28:34.597+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#getStaff(UUID)
2025-12-25T17:28:34.606+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.611+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[StaffResponse(userId=953315ed-9d80-4cc2-a2ff-2cb4db41e2e3, fullName=Vet A, username=null, email=nul (truncated)...]
2025-12-25T17:28:34.642+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.644+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Fake Admin, phone=0912345678, role=ADMIN)]
2025-12-25T17:28:34.645+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:28:34.645+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/8fda1fc0-50aa-4ef0-a720-eeaaffc934a9/staff/quick-add: Không thể tạo tài khoản ADMIN qua chức năng này
2025-12-25T17:28:34.646+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.646+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.645741600, status=403, error=Forbidden, message=Không th (truncated)...]
2025-12-25T17:28:34.646+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Không thể tạo tài khoản ADMIN qua chức năng này]
2025-12-25T17:28:34.657+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.669+07:00 DEBUG 7944 --- [petties] [main] o.s.web.method.HandlerMethod             : Could not resolve parameter [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]
2025-12-25T17:28:34.670+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleHttpMessageNotReadable(HttpMessageNotReadableException, HttpServletRequest)
2025-12-25T17:28:34.673+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.674+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.671907100, status=400, error=Bad Request, message=Dữ liệ (truncated)...]
2025-12-25T17:28:34.674+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]]
2025-12-25T17:28:34.683+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#removeStaff(UUID, UUID)
2025-12-25T17:28:34.689+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:28:34.689+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff removed successfully"]
2025-12-25T17:28:34.705+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.706+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Tester, phone=123, role=VET)]
2025-12-25T17:28:34.707+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:34.708+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.708+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.708199200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:34.709+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'phone': rejected value [123]; codes [Pattern.quickAddStaffRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^[0-9]{10,11}$]; default message [Số điện thoại không hợp lệ]] ]
2025-12-25T17:28:34.718+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T17:28:34.720+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:28:34.720+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Clinic Manager assigned successfully"]
2025-12-25T17:28:34.748+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T17:28:34.750+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:28:34.751+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.751+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.750714, status=404, error=Not Found, message=User not fo (truncated)...]
2025-12-25T17:28:34.751+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: User not found]
2025-12-25T17:28:34.759+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.760+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T17:28:34.762+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:28:34.762+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff account created and assigned successfully"]
2025-12-25T17:28:34.771+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignVet(UUID, String)
2025-12-25T17:28:34.773+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:28:34.773+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/4250833e-ef49-44da-b6fc-7c6f77f2891d/staff/vet/vet@test.com: Bạn không có quyền quản lý phòng khám này
2025-12-25T17:28:34.773+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.773+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.773834300, status=403, error=Forbidden, message=Bạn khôn (truncated)...]
2025-12-25T17:28:34.773+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Bạn không có quyền quản lý phòng khám này]
2025-12-25T17:28:34.786+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:28:34.787+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T17:28:34.789+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:28:34.789+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/db73127d-86f1-46cc-9f6c-8bb3934f7c00/staff/quick-add: Quản lý phòng khám chỉ có quyền thêm Bác sĩ
2025-12-25T17:28:34.789+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:34.789+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:34.789487700, status=403, error=Forbidden, message=Quản lý  (truncated)...]
2025-12-25T17:28:34.789+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Quản lý phòng khám chỉ có quyền thêm Bác sĩ]
2025-12-25T17:28:34.811+07:00  INFO 7944 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.UserControllerUnitTest]: UserControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:28:34.830+07:00  INFO 7944 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.UserControllerUnitTest
2025-12-25T17:28:34.836+07:00  INFO 7944 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:28:34.886+07:00  INFO 7944 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Starting UserControllerUnitTest using Java 21.0.9 with PID 7944 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:28:34.887+07:00 DEBUG 7944 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:28:34.887+07:00  INFO 7944 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:28:34.894+07:00 DEBUG 7944 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@46f32536
2025-12-25T17:28:35.328+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:28:35.391+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:28:35.400+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:28:35.417+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:28:35.448+07:00  WARN 7944 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:28:35.448+07:00 DEBUG 7944 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:28:35.469+07:00 DEBUG 7944 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:28:35.486+07:00  INFO 7944 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:28:35.486+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:28:35.488+07:00  INFO 7944 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-25T17:28:35.505+07:00  INFO 7944 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Started UserControllerUnitTest in 0.67 seconds (process running for 18.607)
2025-12-25T17:28:35.516+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:35.521+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=12345)]
2025-12-25T17:28:35.535+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.542+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.542+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.535645300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.543+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [12345]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:28:35.558+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:28:35.563+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@38f2c97e]
2025-12-25T17:28:35.568+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.569+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.569+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.568191900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.570+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'phone': rejected value [not-a-number]; codes [Pattern.updateProfileRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^0\d{9,10}$]; default message [Số điện thoại không hợp lệ (10-11 số, bắt đầu bằng 0)]] ]
2025-12-25T17:28:35.579+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:28:35.582+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@7327dba0]
2025-12-25T17:28:35.584+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.585+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.585+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.585310600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.587+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'fullName': rejected value []; codes [Size.updateProfileRequest.fullName,Size.fullName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.fullName,fullName]; arguments []; default message [fullName],100,2]; default message [Họ tên phải từ 2-100 ký tự]] ]
2025-12-25T17:28:35.618+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:28:35.629+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.629+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@5441309e]
2025-12-25T17:28:35.640+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:28:35.642+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.644+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@52421f92]
2025-12-25T17:28:35.658+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:28:35.661+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:35.661+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/resend-otp: User not authenticated
2025-12-25T17:28:35.663+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.663+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.661885200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:35.664+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:35.688+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:28:35.689+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:35.690+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T17:28:35.690+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.690+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.690867300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:35.691+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:35.717+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:35.719+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=)]
2025-12-25T17:28:35.729+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.730+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.730+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.729145900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.731+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T17:28:35.742+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:35.744+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=1234567)]
2025-12-25T17:28:35.745+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.746+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.746+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.745976, status=400, error=Validation Failed, message=Ma  (truncated)...]
2025-12-25T17:28:35.747+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [1234567]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:28:35.773+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:28:35.777+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@7ea7fed5]
2025-12-25T17:28:35.784+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:35.785+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.786+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.785486200, status=400, error=Bad Request, message=Mật kh (truncated)...]
2025-12-25T17:28:35.786+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Mật khẩu hiện tại không chính xác]
2025-12-25T17:28:35.806+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:35.807+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=not-an-email)]
2025-12-25T17:28:35.809+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.812+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.813+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.809909200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.817+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@7fe0ca60,.*]; default message [Email khong hop le]] ]
2025-12-25T17:28:35.841+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:28:35.842+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@3d8bf514]
2025-12-25T17:28:35.848+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.849+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Doi mat khau thanh cong}]
2025-12-25T17:28:35.879+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T17:28:35.883+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.884+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@74c0da40]
2025-12-25T17:28:35.904+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:35.906+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=)]
2025-12-25T17:28:35.914+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.914+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.914+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.914358500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.918+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest) with 2 errors: [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [NotBlank.emailChangeVerifyRequest.otp,NotBlank.otp,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp]]; default message [Ma OTP khong duoc de trong]] [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:28:35.938+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:28:35.939+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:35.939+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.941+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.939504700, status=400, error=Bad Request, message=File i (truncated)...]
2025-12-25T17:28:35.941+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: File is empty]
2025-12-25T17:28:35.953+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:35.954+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=not-an-email, otp=123456)]
2025-12-25T17:28:35.956+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:35.957+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.957+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.956527100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:35.959+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeVerifyRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@7fe0ca60,.*]; default message [Email khong hop le]] ]
2025-12-25T17:28:35.977+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:28:35.982+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@62f11904]
2025-12-25T17:28:35.993+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:35.994+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T17:28:35.994+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:35.994+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:35.994530, status=401, error=Unauthorized, message=User not (truncated)...]
2025-12-25T17:28:35.995+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:36.014+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:36.016+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:28:36.019+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.020+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=OTP da duoc gui den email moi}]
2025-12-25T17:28:36.037+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:28:36.039+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:36.039+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T17:28:36.041+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.042+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.039686800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:36.043+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:36.062+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:28:36.064+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.066+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.067+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.065980, status=400, error=Bad Request, message=Khong co  (truncated)...]
2025-12-25T17:28:36.070+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Khong co yeu cau thay doi email. Vui long tao yeu cau moi.]
2025-12-25T17:28:36.082+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:36.083+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=test@example.com)]
2025-12-25T17:28:36.085+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.085+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.086+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.085973500, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:28:36.086+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi phai khac email hien tai]
2025-12-25T17:28:36.100+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:36.101+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:28:36.104+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:36.105+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/request-change: User not authenticated
2025-12-25T17:28:36.105+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.105+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.105416500, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:36.106+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:36.122+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:28:36.125+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@53a52b3f]
2025-12-25T17:28:36.131+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.131+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@1396ee3b]
2025-12-25T17:28:36.154+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:36.155+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:28:36.156+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.157+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.157+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.156412400, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T17:28:36.157+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 45 giay truoc khi gui lai ma OTP]
2025-12-25T17:28:36.167+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.168+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:28:36.170+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.171+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.171+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.170566800, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-25T17:28:36.171+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong chinh xac hoac da het han]
2025-12-25T17:28:36.179+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:28:36.180+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.181+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Ma OTP moi da duoc gui den email moi}]
2025-12-25T17:28:36.190+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.192+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T17:28:36.194+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.195+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.195+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.194224600, status=400, error=Bad Request, message=Ban da (truncated)...]
2025-12-25T17:28:36.195+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ban da nhap sai ma OTP qua nhieu lan. Vui long yeu cau gui ma OTP moi.]
2025-12-25T17:28:36.205+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.206+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=, otp=123456)]
2025-12-25T17:28:36.209+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:36.209+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.209+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.209133700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:36.210+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeVerifyRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T17:28:36.219+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.222+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=different@example.com, otp=123456)]
2025-12-25T17:28:36.224+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.225+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.225+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.224041300, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:28:36.225+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi khong khop voi yeu cau truoc do]
2025-12-25T17:28:36.234+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:28:36.235+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=existing@example.com)]
2025-12-25T17:28:36.236+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.237+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.237+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.237828, status=400, error=Bad Request, message=Email da  (truncated)...]
2025-12-25T17:28:36.237+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T17:28:36.251+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.252+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:28:36.254+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.255+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@224bff6]
2025-12-25T17:28:36.267+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.268+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T17:28:36.270+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.272+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.272+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.270673800, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-25T17:28:36.273+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong dung. Ban con 4 lan thu.]
2025-12-25T17:28:36.286+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T17:28:36.288+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:36.288+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T17:28:36.288+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.289+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.288419200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:36.289+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:36.304+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:28:36.307+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.308+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.308+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.307731500, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T17:28:36.308+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 30 giay truoc khi gui lai ma OTP]
2025-12-25T17:28:36.328+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.332+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=abc123)]
2025-12-25T17:28:36.336+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:28:36.336+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.336+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.336746400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:28:36.338+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [abc123]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@626b9092,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:28:36.347+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:28:36.348+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@15200332]
2025-12-25T17:28:36.349+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:36.350+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/password: User not authenticated
2025-12-25T17:28:36.351+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.351+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.350878500, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:36.352+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:36.361+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:28:36.362+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.363+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.363+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.363970, status=400, error=Bad Request, message=User not  (truncated)...]
2025-12-25T17:28:36.364+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: User not found]
2025-12-25T17:28:36.376+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:28:36.377+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:28:36.378+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.378+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.377896100, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:28:36.378+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T17:28:36.398+07:00 DEBUG 7944 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:28:36.398+07:00 DEBUG 7944 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:28:36.400+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:28:36.401+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/verify-change: User not authenticated
2025-12-25T17:28:36.401+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:28:36.402+07:00 DEBUG 7944 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:28:36.401066300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:28:36.402+07:00 DEBUG 7944 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:28:37.379+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Authentication failed at /api/v1/test: Full authentication required
2025-12-25T17:28:37.386+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Authentication failed at /api/v1/test: null
2025-12-25T17:28:37.412+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /api/v1/test: Chua xac thuc
2025-12-25T17:28:37.500+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Access Denied to /api/v1/test: Access is denied
2025-12-25T17:28:37.537+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Access Denied to /api/v1/test: Access denied
2025-12-25T17:28:37.546+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: Forbidden
2025-12-25T17:28:37.555+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: 
2025-12-25T17:28:37.559+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: null
2025-12-25T17:28:37.568+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test:    
2025-12-25T17:28:37.577+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: Ban khong co quyen xem tai nguyen nay
2025-12-25T17:28:37.588+07:00 ERROR 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unexpected error occurred at /api/v1/test: 

java.lang.RuntimeException: Some unexpected error
	at com.petties.petties.exception.GlobalExceptionHandlerTest$GenericExceptionTests.handleGenericException_ShouldReturn500Status(GlobalExceptionHandlerTest.java:125) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767) ~[junit-platform-commons-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:28:37.604+07:00 ERROR 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unexpected error occurred at /api/v1/test: 

java.lang.Exception: Unexpected error
	at com.petties.petties.exception.GlobalExceptionHandlerTest$GenericExceptionTests.handleGenericException_ShouldReturnVietnameseMessage(GlobalExceptionHandlerTest.java:108) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767) ~[junit-platform-commons-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:28:37.619+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Bad credentials attempt at /api/v1/test
2025-12-25T17:28:37.626+07:00  WARN 7944 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Bad credentials attempt at /api/v1/test
2025-12-25T17:28:37.730+07:00 DEBUG 7944 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@55cff952, started on Thu Dec 25 17:28:20 ICT 2025
2025-12-25T17:28:37.735+07:00 DEBUG 7944 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@27107a97, started on Thu Dec 25 17:28:28 ICT 2025
2025-12-25T17:28:37.737+07:00 DEBUG 7944 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3f563397, started on Thu Dec 25 17:28:32 ICT 2025
2025-12-25T17:28:37.739+07:00 DEBUG 7944 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@25198ead, started on Thu Dec 25 17:28:33 ICT 2025
2025-12-25T17:28:37.741+07:00 DEBUG 7944 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@46f32536, started on Thu Dec 25 17:28:34 ICT 2025
2025-12-25T17:32:23.071+07:00  INFO 19932 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Starting ClinicPriceControllerUnitTest using Java 21.0.9 with PID 19932 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:32:23.073+07:00 DEBUG 19932 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:32:23.074+07:00  INFO 19932 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:32:23.107+07:00 DEBUG 19932 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@25d958c6
2025-12-25T17:32:28.073+07:00 DEBUG 19932 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 5 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:32:28.400+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:32:28.633+07:00 DEBUG 19932 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:32:28.768+07:00 DEBUG 19932 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:32:28.997+07:00  WARN 19932 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:32:28.998+07:00 DEBUG 19932 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:32:29.264+07:00 DEBUG 19932 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:32:29.427+07:00  INFO 19932 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:32:29.428+07:00  INFO 19932 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:32:29.437+07:00  INFO 19932 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 7 ms
2025-12-25T17:32:29.528+07:00  INFO 19932 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Started ClinicPriceControllerUnitTest in 7.317 seconds (process running for 9.636)
2025-12-25T17:32:29.833+07:00 DEBUG 19932 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#updatePricePerKm(UUID, ClinicPriceRequest)
2025-12-25T17:32:29.989+07:00 DEBUG 19932 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to []
2025-12-25T17:32:30.002+07:00  WARN 19932 --- [petties] [main] c.p.p.controller.ClinicPriceController   : Empty request body for updatePricePerKm for clinic 6049dc52-fb5c-46fd-8f6a-3548e65c5b14
2025-12-25T17:32:30.058+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:32:30.060+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:32:30.191+07:00 DEBUG 19932 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#updatePricePerKm(UUID, ClinicPriceRequest)
2025-12-25T17:32:30.223+07:00 DEBUG 19932 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [ClinicPriceRequest(pricePerKm=5000)]
2025-12-25T17:32:30.417+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:32:30.419+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ClinicPriceResponse(clinicId=3d4848d7-d2cf-452d-b9b1-61e018b2b2e9, pricePerKm=5000)]
2025-12-25T17:32:30.539+07:00 DEBUG 19932 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#updatePricePerKm(UUID, ClinicPriceRequest)
2025-12-25T17:32:30.542+07:00 DEBUG 19932 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [ClinicPriceRequest(pricePerKm=1000)]
2025-12-25T17:32:30.544+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:32:30.547+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:32:30.583+07:00 DEBUG 19932 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#deletePricePerKm(UUID)
2025-12-25T17:32:30.599+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:32:30.601+07:00 DEBUG 19932 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Price per km removed}]
2025-12-25T17:32:30.846+07:00 DEBUG 19932 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@25d958c6, started on Thu Dec 25 17:32:23 ICT 2025
2025-12-25T17:34:11.114+07:00  INFO 20248 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Starting AuthControllerUnitTest using Java 21.0.9 with PID 20248 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:34:11.116+07:00 DEBUG 20248 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:34:11.117+07:00  INFO 20248 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:34:11.147+07:00 DEBUG 20248 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@55cff952
2025-12-25T17:34:15.962+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:34:16.268+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:34:16.561+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:34:16.675+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:34:16.860+07:00  WARN 20248 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:34:16.860+07:00 DEBUG 20248 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:34:17.097+07:00 DEBUG 20248 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:34:17.220+07:00  INFO 20248 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:34:17.221+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:34:17.223+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-25T17:34:17.310+07:00  INFO 20248 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Started AuthControllerUnitTest in 6.932 seconds (process running for 9.389)
2025-12-25T17:34:17.577+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:17.660+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@4d3990a5]
2025-12-25T17:34:17.855+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:17.910+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:17.920+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:17.860942200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:17.941+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [NotBlank.sendOtpRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password]]; default message [Mật khẩu không được để trống]] [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T17:34:18.050+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:18.055+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@5552d10]
2025-12-25T17:34:18.064+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.065+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.066+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.064143200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.069+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [1234567]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:34:18.131+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.136+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@92b1bda]
2025-12-25T17:34:18.159+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:18.160+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.163+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.160484900, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T17:34:18.164+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T17:34:18.217+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:18.220+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@1cc81ea1]
2025-12-25T17:34:18.236+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.237+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@25a52a60]
2025-12-25T17:34:18.334+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:34:18.338+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@1ac68548]
2025-12-25T17:34:18.349+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.352+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@eabecf5]
2025-12-25T17:34:18.371+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:18.373+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@544300a6]
2025-12-25T17:34:18.374+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.375+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.375+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.375412400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.376+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value [null]; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T17:34:18.408+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.410+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@e2d9923]
2025-12-25T17:34:18.415+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.416+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.417+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.416197500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.422+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [NotBlank.resetPasswordRequest.newPassword,NotBlank.newPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword]]; default message [Mật khẩu mới không được để trống]] [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-25T17:34:18.452+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.454+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@1ac2829e]
2025-12-25T17:34:18.457+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.459+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.460+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.459484900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.461+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [NotBlank.resetPasswordRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] ]
2025-12-25T17:34:18.485+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:18.487+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@4e25282d]
2025-12-25T17:34:18.493+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:18.494+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.496+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.493804500, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T17:34:18.497+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T17:34:18.517+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:34:18.530+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.532+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@7164e28a]
2025-12-25T17:34:18.549+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:34:18.552+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:18.553+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.554+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.553297, status=400, error=Bad Request, message=Please wa (truncated)...]
2025-12-25T17:34:18.554+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T17:34:18.573+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.575+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@106edde4]
2025-12-25T17:34:18.585+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.586+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.MessageResponse@4d9cf71d]
2025-12-25T17:34:18.639+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:18.642+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@b6b746b]
2025-12-25T17:34:18.644+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.644+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.645+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.644917, status=400, error=Validation Failed, message=Use (truncated)...]
2025-12-25T17:34:18.646+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value []; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-25T17:34:18.683+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.686+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@5eae392d]
2025-12-25T17:34:18.692+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.694+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.694+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.692938100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.699+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value []; codes [NotBlank.resetPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:34:18.723+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:18.724+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@6e22d6bf]
2025-12-25T17:34:18.727+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:18.727+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.727+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.727692300, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-25T17:34:18.730+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-25T17:34:18.757+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:18.760+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6d4f266]
2025-12-25T17:34:18.764+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.768+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@6b756a62]
2025-12-25T17:34:18.800+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.801+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@6ad0cd43]
2025-12-25T17:34:18.804+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.804+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.805+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.804703600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.806+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value [Pass1]; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-25T17:34:18.847+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:18.847+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@3f838072]
2025-12-25T17:34:18.852+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.853+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.854+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.853448900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.855+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.resetPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@31f5ffb9,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T17:34:18.873+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:18.874+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@2d3768ce]
2025-12-25T17:34:18.879+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:18.880+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.881+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.879360700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:18.882+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value []; codes [NotBlank.sendOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:34:18.905+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:18.907+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@3dc7c5fd]
2025-12-25T17:34:18.911+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:18.912+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.913+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.912855600, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:34:18.914+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email already exists]
2025-12-25T17:34:18.928+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:18.930+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@862624f]
2025-12-25T17:34:18.935+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.935+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@3aa8c337]
2025-12-25T17:34:18.961+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:34:18.965+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:18.966+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:18.966+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:18.965311600, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T17:34:18.967+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending password reset found]
2025-12-25T17:34:18.996+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:18.997+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@e2344da]
2025-12-25T17:34:19.001+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.003+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.005+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.001804800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.007+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'username': rejected value [ab]; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-25T17:34:19.036+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:34:19.040+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:19.041+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.042+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.040935500, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-25T17:34:19.043+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-25T17:34:19.056+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:34:19.060+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@65d2d3cc]
2025-12-25T17:34:19.062+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:19.065+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/google: Invalid Google ID token
2025-12-25T17:34:19.068+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.069+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.068082400, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T17:34:19.070+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid Google ID token]
2025-12-25T17:34:19.095+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:34:19.098+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@192ecf8]
2025-12-25T17:34:19.105+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:19.106+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.107+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.105191400, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:34:19.108+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email not found]
2025-12-25T17:34:19.119+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:34:19.121+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@4419cd6e]
2025-12-25T17:34:19.122+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.123+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.123+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.123446600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.124+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.forgotPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@31f5ffb9,.*]; default message [Email không đúng định dạng]] ]
2025-12-25T17:34:19.139+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:19.140+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@309e7215]
2025-12-25T17:34:19.142+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.143+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.144+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.143798400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.145+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value [abc123]; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-25T17:34:19.164+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:19.165+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@a0bdbe2]
2025-12-25T17:34:19.167+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.168+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.169+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.167507400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.171+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [12345]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-25T17:34:19.193+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:19.195+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@7d7c05fa]
2025-12-25T17:34:19.199+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.200+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.201+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.200544700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.204+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [NotBlank.sendOtpRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username]]; default message [Tên đăng nhập không được để trống]] ]
2025-12-25T17:34:19.240+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-25T17:34:19.243+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:19.245+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.246+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.244207900, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-25T17:34:19.247+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending registration found]
2025-12-25T17:34:19.279+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:19.282+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@515fff35]
2025-12-25T17:34:19.285+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.286+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.286+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.285472200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.289+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value []; codes [NotBlank.verifyOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:34:19.304+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:34:19.305+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@16c1d11]
2025-12-25T17:34:19.308+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.309+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.310+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.309708400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.311+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'idToken': rejected value []; codes [NotBlank.googleSignInRequest.idToken,NotBlank.idToken,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.idToken,idToken]; arguments []; default message [idToken]]; default message [ID token is required]] ]
2025-12-25T17:34:19.325+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:19.326+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@57ed8f95]
2025-12-25T17:34:19.327+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.329+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.331+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.327920200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.332+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'confirmPassword': rejected value []; codes [NotBlank.resetPasswordRequest.confirmPassword,NotBlank.confirmPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.confirmPassword,confirmPassword]; arguments []; default message [confirmPassword]]; default message [Xác nhận mật khẩu không được để trống]] ]
2025-12-25T17:34:19.346+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:19.346+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@5d01a2eb]
2025-12-25T17:34:19.349+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.351+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.352+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.351732700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.353+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'fullName': rejected value []; codes [NotBlank.sendOtpRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T17:34:19.369+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:34:19.374+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@13f7c165]
2025-12-25T17:34:19.376+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.381+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@655f92a1]
2025-12-25T17:34:19.408+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:19.410+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@637c8632]
2025-12-25T17:34:19.414+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.414+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.415+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.414109100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.416+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'password': rejected value [12345]; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-25T17:34:19.430+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:19.431+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@55d87b73]
2025-12-25T17:34:19.432+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.434+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.434+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.433846500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.436+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T17:34:19.457+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:19.459+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@22ed2886]
2025-12-25T17:34:19.464+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.466+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.471+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.466901900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.474+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest) with 2 errors: [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [NotBlank.verifyOtpRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] ]
2025-12-25T17:34:19.492+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:34:19.494+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@73230721]
2025-12-25T17:34:19.498+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.498+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@10bcbbce]
2025-12-25T17:34:19.510+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:19.512+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@cbc3bf3]
2025-12-25T17:34:19.513+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.519+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.521+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.518637100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.523+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value []; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-25T17:34:19.541+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:19.543+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@3fdede3a]
2025-12-25T17:34:19.544+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.545+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@41948c13]
2025-12-25T17:34:19.568+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:19.568+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@4ed19540]
2025-12-25T17:34:19.571+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.571+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@533e8807]
2025-12-25T17:34:19.586+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:19.588+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@4eab9aec]
2025-12-25T17:34:19.591+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.591+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@5a45c218]
2025-12-25T17:34:19.610+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-25T17:34:19.612+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@3163e03b]
2025-12-25T17:34:19.615+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.616+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.616+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.615597200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.617+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value []; codes [NotBlank.forgotPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-25T17:34:19.633+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-25T17:34:19.636+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@2202c92f]
2025-12-25T17:34:19.637+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:19.637+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /auth/login: Invalid username or password
2025-12-25T17:34:19.637+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.637+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.637887400, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-25T17:34:19.638+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid username or password]
2025-12-25T17:34:19.660+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-25T17:34:19.663+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.664+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@7be6dabb]
2025-12-25T17:34:19.704+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-25T17:34:19.713+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@6e00d737]
2025-12-25T17:34:19.715+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.716+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.721+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.716985900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.723+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'platform': rejected value []; codes [NotBlank.googleSignInRequest.platform,NotBlank.platform,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.platform,platform]; arguments []; default message [platform]]; default message [Platform is required]] ]
2025-12-25T17:34:19.749+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:19.753+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4113d9ab]
2025-12-25T17:34:19.759+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:19.760+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.760+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.759543200, status=400, error=Bad Request, message=Passwo (truncated)...]
2025-12-25T17:34:19.760+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Passwords do not match]
2025-12-25T17:34:19.779+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:19.788+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@1a6a4595]
2025-12-25T17:34:19.794+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.795+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.795+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.795188200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.797+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'role': rejected value [null]; codes [NotNull.sendOtpRequest.role,NotNull.role,NotNull.com.petties.petties.model.enums.Role,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.role,role]; arguments []; default message [role]]; default message [Vai trò không được để trống]] ]
2025-12-25T17:34:19.809+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-25T17:34:19.811+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@5644f664]
2025-12-25T17:34:19.812+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.813+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.813+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.813465300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.815+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.sendOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@31f5ffb9,.*]; default message [Email không hợp lệ]] ]
2025-12-25T17:34:19.833+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-25T17:34:19.835+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@251e2f4a]
2025-12-25T17:34:19.838+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:19.841+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.841+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.840052800, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-25T17:34:19.842+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-25T17:34:19.853+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-25T17:34:19.854+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@61f08aa9]
2025-12-25T17:34:19.856+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:19.857+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:19.857+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:19.857713200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:19.859+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.verifyOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@31f5ffb9,.*]; default message [Email không hợp lệ]] ]
2025-12-25T17:34:19.890+07:00  INFO 20248 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicControllerUnitTest]: ClinicControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:34:19.962+07:00  INFO 20248 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicControllerUnitTest
2025-12-25T17:34:19.972+07:00  INFO 20248 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:34:20.127+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Starting ClinicControllerUnitTest using Java 21.0.9 with PID 20248 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:34:20.129+07:00 DEBUG 20248 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:34:20.129+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : The following 1 profile is active: "dev"
2025-12-25T17:34:20.137+07:00 DEBUG 20248 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5a5a973c
2025-12-25T17:34:21.289+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 19 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:34:21.375+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:34:21.403+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:34:21.431+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:34:21.508+07:00  WARN 20248 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:34:21.508+07:00 DEBUG 20248 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:34:21.559+07:00 DEBUG 20248 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:34:21.602+07:00  INFO 20248 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:34:21.602+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:34:21.605+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-12-25T17:34:21.629+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicControllerUnitTest         : Started ClinicControllerUnitTest in 1.658 seconds (process running for 13.709)
2025-12-25T17:34:21.694+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicImage(UUID, MultipartFile, String, Integer, Boolean)
2025-12-25T17:34:21.707+07:00  INFO 20248 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading image for clinic: 2d908bfc-d2ab-4768-8195-081022aa4f49, file size: 10, content type: image/jpeg
2025-12-25T17:34:21.708+07:00  INFO 20248 --- [petties] [main] c.p.petties.controller.ClinicController  : File uploaded to Cloudinary: http://cloudinary.com/image.jpg
2025-12-25T17:34:21.710+07:00  INFO 20248 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic image saved successfully for clinic: 2d908bfc-d2ab-4768-8195-081022aa4f49
2025-12-25T17:34:21.749+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.749+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@51d6c42d]
2025-12-25T17:34:21.792+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:34:21.811+07:00  WARN 20248 --- [petties] [main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-12-25T17:34:21.827+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.828+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:34:21.855+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#uploadClinicLogo(UUID, MultipartFile)
2025-12-25T17:34:21.857+07:00  INFO 20248 --- [petties] [main] c.p.petties.controller.ClinicController  : Uploading logo for clinic: 3bb60db0-5250-4677-9838-6f16f2248dca, file size: 9, content type: image/jpeg
2025-12-25T17:34:21.858+07:00  INFO 20248 --- [petties] [main] c.p.petties.controller.ClinicController  : Logo uploaded to Cloudinary: url
2025-12-25T17:34:21.859+07:00  INFO 20248 --- [petties] [main] c.p.petties.controller.ClinicController  : Clinic logo saved successfully for clinic: 3bb60db0-5250-4677-9838-6f16f2248dca
2025-12-25T17:34:21.860+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.860+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@48861d1]
2025-12-25T17:34:21.884+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#findNearbyClinics(BigDecimal, BigDecimal, double, int, int)
2025-12-25T17:34:21.904+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.906+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:34:21.935+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T17:34:21.946+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@2bb118ae]
2025-12-25T17:34:21.967+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.967+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@f5a680]
2025-12-25T17:34:21.977+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T17:34:21.979+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.979+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@5c141c7b]
2025-12-25T17:34:21.992+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:34:21.997+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:21.997+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing UNKNOWN instances]
2025-12-25T17:34:22.013+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#searchClinics(String, int, int)
2025-12-25T17:34:22.021+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.022+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:34:22.040+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#createClinic(ClinicRequest)
2025-12-25T17:34:22.041+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@565983f3]
2025-12-25T17:34:22.047+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:22.059+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.060+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:22.048193600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:22.062+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinic.ClinicResponse> com.petties.petties.controller.ClinicController.createClinic(com.petties.petties.dto.clinic.ClinicRequest): [Field error in object 'clinicRequest' on field 'name': rejected value []; codes [NotBlank.clinicRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicRequest.name,name]; arguments []; default message [name]]; default message [Tên phòng khám không được để trống]] ]
2025-12-25T17:34:22.073+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#approveClinic(UUID)
2025-12-25T17:34:22.075+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.075+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@dffcf1]
2025-12-25T17:34:22.092+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getClinicById(UUID)
2025-12-25T17:34:22.095+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:34:22.097+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.097+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:22.096227600, status=404, error=Not Found, message=Clinic n (truncated)...]
2025-12-25T17:34:22.097+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Clinic not found]
2025-12-25T17:34:22.111+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T17:34:22.113+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@55a2ca5e]
2025-12-25T17:34:22.115+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:34:22.115+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/c8f03530-7175-49aa-a474-bd67a412526b: You can only update your own clinic
2025-12-25T17:34:22.117+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.117+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:22.115732400, status=403, error=Forbidden, message=You can  (truncated)...]
2025-12-25T17:34:22.117+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: You can only update your own clinic]
2025-12-25T17:34:22.143+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#getAllClinics(ClinicStatus, String, int, int, String, Direction)
2025-12-25T17:34:22.144+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.145+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.petties.petties.dto.clinic.ClinicResponse instances]
2025-12-25T17:34:22.155+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#rejectClinic(UUID, Map)
2025-12-25T17:34:22.158+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [{reason=Invalid information}]
2025-12-25T17:34:22.159+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.159+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@7a91027c]
2025-12-25T17:34:22.172+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#deleteClinic(UUID)
2025-12-25T17:34:22.179+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.180+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Clinic deleted successfully}]
2025-12-25T17:34:22.191+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicController#updateClinic(UUID, ClinicRequest)
2025-12-25T17:34:22.192+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinic.ClinicRequest@16160a37]
2025-12-25T17:34:22.194+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:22.194+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinic.ClinicResponse@380e470a]
2025-12-25T17:34:22.207+07:00  INFO 20248 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicPriceControllerUnitTest]: ClinicPriceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:34:22.243+07:00  INFO 20248 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicPriceControllerUnitTest
2025-12-25T17:34:22.255+07:00  INFO 20248 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:34:22.325+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Starting ClinicPriceControllerUnitTest using Java 21.0.9 with PID 20248 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:34:22.325+07:00 DEBUG 20248 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:34:22.326+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:34:22.332+07:00 DEBUG 20248 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3da701a1
2025-12-25T17:34:23.273+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 5 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:34:23.354+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:34:23.365+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:34:23.380+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:34:23.435+07:00  WARN 20248 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:34:23.436+07:00 DEBUG 20248 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:34:23.460+07:00 DEBUG 20248 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:34:23.483+07:00  INFO 20248 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:34:23.484+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:34:23.485+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:34:23.494+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicPriceControllerUnitTest    : Started ClinicPriceControllerUnitTest in 1.239 seconds (process running for 15.574)
2025-12-25T17:34:23.511+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#updatePricePerKm(UUID, ClinicPriceRequest)
2025-12-25T17:34:23.519+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to []
2025-12-25T17:34:23.520+07:00  WARN 20248 --- [petties] [main] c.p.p.controller.ClinicPriceController   : Empty request body for updatePricePerKm for clinic 240916f9-facb-4b92-b159-9a80799b3a32
2025-12-25T17:34:23.527+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:23.527+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:34:23.547+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#updatePricePerKm(UUID, ClinicPriceRequest)
2025-12-25T17:34:23.551+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [ClinicPriceRequest(pricePerKm=5000)]
2025-12-25T17:34:23.573+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:23.574+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ClinicPriceResponse(clinicId=b610d4a4-ddb7-4800-a1a0-bca0714761ca, pricePerKm=5000)]
2025-12-25T17:34:23.588+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#updatePricePerKm(UUID, ClinicPriceRequest)
2025-12-25T17:34:23.589+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [ClinicPriceRequest(pricePerKm=1000)]
2025-12-25T17:34:23.591+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:23.591+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:34:23.607+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicPriceController#deletePricePerKm(UUID)
2025-12-25T17:34:23.615+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:23.616+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Price per km removed}]
2025-12-25T17:34:23.643+07:00  INFO 20248 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicServiceControllerUnitTest]: ClinicServiceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:34:23.672+07:00  INFO 20248 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicServiceControllerUnitTest
2025-12-25T17:34:23.680+07:00  INFO 20248 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:34:23.755+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 20248 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:34:23.755+07:00 DEBUG 20248 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:34:23.755+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:34:23.757+07:00 DEBUG 20248 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@47fca369
2025-12-25T17:34:24.728+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 13 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:34:24.805+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:34:24.812+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:34:24.820+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:34:24.869+07:00  WARN 20248 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:34:24.870+07:00 DEBUG 20248 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:34:24.885+07:00 DEBUG 20248 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:34:24.894+07:00  INFO 20248 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:34:24.895+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:34:24.895+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-25T17:34:24.904+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 1.225 seconds (process running for 16.983)
2025-12-25T17:34:24.922+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID, UUID)
2025-12-25T17:34:24.925+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:24.925+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:34:24.945+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:34:24.953+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@7ae88df1]
2025-12-25T17:34:24.972+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:24.972+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@2d839402]
2025-12-25T17:34:24.984+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-25T17:34:24.985+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:24.985+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@3f60ba06]
2025-12-25T17:34:24.994+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-25T17:34:24.998+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@7a90796c]
2025-12-25T17:34:25.007+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.007+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@375376d5]
2025-12-25T17:34:25.019+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-25T17:34:25.021+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.022+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@46700301]]
2025-12-25T17:34:25.039+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:34:25.042+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:34:25.047+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.048+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.042497300, status=404, error=Not Found, message=Service  (truncated)...]
2025-12-25T17:34:25.048+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-25T17:34:25.058+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:34:25.059+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@1b09f4fb]
2025-12-25T17:34:25.061+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:25.062+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.062+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.062779500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:25.064+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinicService.ClinicServiceResponse> com.petties.petties.controller.ClinicServiceController.createService(com.petties.petties.dto.clinicService.ClinicServiceRequest) with 3 errors: [Field error in object 'clinicServiceRequest' on field 'slotsRequired': rejected value [null]; codes [NotNull.clinicServiceRequest.slotsRequired,NotNull.slotsRequired,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.slotsRequired,slotsRequired]; arguments []; default message [slotsRequired]]; default message [Số slot yêu cầu không được để trống]] [Field error in object 'clinicServiceRequest' on field 'name': rejected value [null]; codes [NotBlank.clinicServiceRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.name,name]; arguments []; default message [name]]; default message [Tên dịch vụ không được để trống]] [Field error in object 'clinicServiceRequest' on field 'basePrice': rejected value [null]; codes [NotNull.clinicServiceRequest.basePrice,NotNull.basePrice,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.basePrice,basePrice]; arguments []; default message [basePrice]]; default message [Giá cơ bản không được để trống]] ]
2025-12-25T17:34:25.088+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:34:25.090+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.090+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@67b6cb6e]
2025-12-25T17:34:25.108+07:00  INFO 20248 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicStaffControllerUnitTest]: ClinicStaffControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:34:25.137+07:00  INFO 20248 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicStaffControllerUnitTest
2025-12-25T17:34:25.149+07:00  INFO 20248 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:34:25.197+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Starting ClinicStaffControllerUnitTest using Java 21.0.9 with PID 20248 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:34:25.197+07:00 DEBUG 20248 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:34:25.197+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : The following 1 profile is active: "dev"
2025-12-25T17:34:25.200+07:00 DEBUG 20248 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7cff1930
2025-12-25T17:34:25.694+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:34:25.741+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:34:25.747+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:34:25.755+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:34:25.782+07:00  WARN 20248 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:34:25.782+07:00 DEBUG 20248 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:34:25.791+07:00 DEBUG 20248 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:34:25.798+07:00  INFO 20248 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:34:25.798+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:34:25.798+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-25T17:34:25.803+07:00  INFO 20248 --- [petties] [main] c.p.p.c.ClinicStaffControllerUnitTest    : Started ClinicStaffControllerUnitTest in 0.654 seconds (process running for 17.882)
2025-12-25T17:34:25.812+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:25.816+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=, phone=0912345678, role=VET)]
2025-12-25T17:34:25.824+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:25.831+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.831+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.825858800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:25.832+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'fullName': rejected value []; codes [NotBlank.quickAddStaffRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-25T17:34:25.846+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:25.847+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Duplicate User, phone=0987654321, role=VET)]
2025-12-25T17:34:25.848+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceAlreadyExists(ResourceAlreadyExistsException, HttpServletRequest)
2025-12-25T17:34:25.848+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.849+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.848099400, status=409, error=Conflict, message=Số điện t (truncated)...]
2025-12-25T17:34:25.850+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceAlreadyExistsException: Số điện thoại này đã được đăng ký tài khoản]
2025-12-25T17:34:25.860+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#getStaff(UUID)
2025-12-25T17:34:25.862+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.865+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[StaffResponse(userId=a2bda5de-4687-4d17-9948-94843967742d, fullName=Vet A, username=null, email=nul (truncated)...]
2025-12-25T17:34:25.880+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:25.882+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Fake Admin, phone=0912345678, role=ADMIN)]
2025-12-25T17:34:25.882+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:34:25.883+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/9ff40b9f-1ac2-4d1a-a414-f1a954bdcb4d/staff/quick-add: Không thể tạo tài khoản ADMIN qua chức năng này
2025-12-25T17:34:25.884+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.885+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.884446700, status=403, error=Forbidden, message=Không th (truncated)...]
2025-12-25T17:34:25.886+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Không thể tạo tài khoản ADMIN qua chức năng này]
2025-12-25T17:34:25.894+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:25.904+07:00 DEBUG 20248 --- [petties] [main] o.s.web.method.HandlerMethod             : Could not resolve parameter [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]
2025-12-25T17:34:25.906+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleHttpMessageNotReadable(HttpMessageNotReadableException, HttpServletRequest)
2025-12-25T17:34:25.907+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.907+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.907134300, status=400, error=Bad Request, message=Dữ liệ (truncated)...]
2025-12-25T17:34:25.909+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `com.petties.petties.model.enums.Role` from String "INVALID": not one of the values accepted for Enum class: [PET_OWNER, CLINIC_OWNER, VET, CLINIC_MANAGER, ADMIN]]
2025-12-25T17:34:25.921+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#removeStaff(UUID, UUID)
2025-12-25T17:34:25.924+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:34:25.924+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff removed successfully"]
2025-12-25T17:34:25.936+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:25.937+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=Tester, phone=123, role=VET)]
2025-12-25T17:34:25.937+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:25.939+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.939+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.937628, status=400, error=Validation Failed, message=Số  (truncated)...]
2025-12-25T17:34:25.939+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.lang.String> com.petties.petties.controller.ClinicStaffController.quickAddStaff(java.util.UUID,com.petties.petties.dto.clinic.QuickAddStaffRequest): [Field error in object 'quickAddStaffRequest' on field 'phone': rejected value [123]; codes [Pattern.quickAddStaffRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [quickAddStaffRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^[0-9]{10,11}$]; default message [Số điện thoại không hợp lệ]] ]
2025-12-25T17:34:25.946+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T17:34:25.949+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:34:25.949+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Clinic Manager assigned successfully"]
2025-12-25T17:34:25.977+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignManager(UUID, String)
2025-12-25T17:34:25.978+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:34:25.978+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:25.979+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:25.978427, status=404, error=Not Found, message=User not fo (truncated)...]
2025-12-25T17:34:25.980+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: User not found]
2025-12-25T17:34:25.989+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:25.990+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T17:34:25.992+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-25T17:34:25.992+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Staff account created and assigned successfully"]
2025-12-25T17:34:25.998+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#assignVet(UUID, String)
2025-12-25T17:34:26.000+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:34:26.000+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/5f42b777-3e12-4949-a2a6-a7660c3849ce/staff/vet/vet@test.com: Bạn không có quyền quản lý phòng khám này
2025-12-25T17:34:26.000+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:26.001+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:26.000798200, status=403, error=Forbidden, message=Bạn khôn (truncated)...]
2025-12-25T17:34:26.001+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Bạn không có quyền quản lý phòng khám này]
2025-12-25T17:34:26.007+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicStaffController#quickAddStaff(UUID, QuickAddStaffRequest)
2025-12-25T17:34:26.009+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [QuickAddStaffRequest(fullName=New Manager, phone=0912345678, role=CLINIC_MANAGER)]
2025-12-25T17:34:26.011+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleForbidden(ForbiddenException, HttpServletRequest)
2025-12-25T17:34:26.011+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /clinics/71236e6f-e079-46cd-bc71-88c1ade7406f/staff/quick-add: Quản lý phòng khám chỉ có quyền thêm Bác sĩ
2025-12-25T17:34:26.011+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:26.011+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:26.011373600, status=403, error=Forbidden, message=Quản lý  (truncated)...]
2025-12-25T17:34:26.012+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ForbiddenException: Quản lý phòng khám chỉ có quyền thêm Bác sĩ]
2025-12-25T17:34:26.025+07:00  INFO 20248 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.UserControllerUnitTest]: UserControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-25T17:34:26.054+07:00  INFO 20248 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.UserControllerUnitTest
2025-12-25T17:34:26.061+07:00  INFO 20248 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-25T17:34:26.110+07:00  INFO 20248 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Starting UserControllerUnitTest using Java 21.0.9 with PID 20248 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:34:26.111+07:00 DEBUG 20248 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:34:26.111+07:00  INFO 20248 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:34:26.117+07:00 DEBUG 20248 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4734a551
2025-12-25T17:34:26.659+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:34:26.722+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:34:26.739+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:34:26.748+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:34:26.772+07:00  WARN 20248 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:34:26.773+07:00 DEBUG 20248 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:34:26.786+07:00 DEBUG 20248 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:34:26.823+07:00  INFO 20248 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:34:26.824+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:34:26.825+07:00  INFO 20248 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-25T17:34:26.854+07:00  INFO 20248 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Started UserControllerUnitTest in 0.792 seconds (process running for 18.933)
2025-12-25T17:34:26.907+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:26.915+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=12345)]
2025-12-25T17:34:26.926+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:26.934+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:26.934+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:26.927226400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:26.936+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [12345]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:34:26.960+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:34:26.964+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@62f25e32]
2025-12-25T17:34:26.975+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:26.976+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:26.976+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:26.976926700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:26.977+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'phone': rejected value [not-a-number]; codes [Pattern.updateProfileRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^0\d{9,10}$]; default message [Số điện thoại không hợp lệ (10-11 số, bắt đầu bằng 0)]] ]
2025-12-25T17:34:26.996+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:34:26.997+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@63f95ac1]
2025-12-25T17:34:26.999+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.000+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.000+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.000445100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.002+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'fullName': rejected value []; codes [Size.updateProfileRequest.fullName,Size.fullName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.fullName,fullName]; arguments []; default message [fullName],100,2]; default message [Họ tên phải từ 2-100 ký tự]] ]
2025-12-25T17:34:27.020+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:34:27.031+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.032+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@5e5d41dc]
2025-12-25T17:34:27.054+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:34:27.057+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.057+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@200cdb37]
2025-12-25T17:34:27.083+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:34:27.084+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.085+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/resend-otp: User not authenticated
2025-12-25T17:34:27.086+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.087+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.085880800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.087+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.097+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:34:27.101+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.101+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T17:34:27.102+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.102+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.101348800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.102+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.136+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.138+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=)]
2025-12-25T17:34:27.147+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.149+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.150+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.147729500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.151+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T17:34:27.160+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.160+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=1234567)]
2025-12-25T17:34:27.164+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.164+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.165+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.164047600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.165+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [1234567]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:34:27.212+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:34:27.221+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@20a1c8a1]
2025-12-25T17:34:27.234+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.234+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.235+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.234713500, status=400, error=Bad Request, message=Mật kh (truncated)...]
2025-12-25T17:34:27.236+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Mật khẩu hiện tại không chính xác]
2025-12-25T17:34:27.251+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.251+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=not-an-email)]
2025-12-25T17:34:27.254+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.255+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.255+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.255133800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.256+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@31f5ffb9,.*]; default message [Email khong hop le]] ]
2025-12-25T17:34:27.263+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:34:27.265+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@1ab64f66]
2025-12-25T17:34:27.268+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.268+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Doi mat khau thanh cong}]
2025-12-25T17:34:27.278+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T17:34:27.280+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.281+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@54fc7fce]
2025-12-25T17:34:27.291+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.291+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=)]
2025-12-25T17:34:27.293+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.293+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.293+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.293388100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.294+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest) with 2 errors: [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [NotBlank.emailChangeVerifyRequest.otp,NotBlank.otp,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp]]; default message [Ma OTP khong duoc de trong]] ]
2025-12-25T17:34:27.305+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:34:27.306+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.306+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.307+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.306806100, status=400, error=Bad Request, message=File i (truncated)...]
2025-12-25T17:34:27.309+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: File is empty]
2025-12-25T17:34:27.320+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.321+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=not-an-email, otp=123456)]
2025-12-25T17:34:27.323+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.324+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.324+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.324185400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.325+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeVerifyRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@31f5ffb9,.*]; default message [Email khong hop le]] ]
2025-12-25T17:34:27.336+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:34:27.337+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@5a342baf]
2025-12-25T17:34:27.339+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.339+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile: User not authenticated
2025-12-25T17:34:27.339+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.339+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.339390500, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.340+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.352+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.353+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:34:27.355+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.355+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=OTP da duoc gui den email moi}]
2025-12-25T17:34:27.367+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-25T17:34:27.370+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.371+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T17:34:27.373+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.373+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.371313800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.374+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.386+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:34:27.389+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.391+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.391+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.389387200, status=400, error=Bad Request, message=Khong  (truncated)...]
2025-12-25T17:34:27.392+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Khong co yeu cau thay doi email. Vui long tao yeu cau moi.]
2025-12-25T17:34:27.404+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.405+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=test@example.com)]
2025-12-25T17:34:27.408+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.408+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.408+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.408628300, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:34:27.409+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi phai khac email hien tai]
2025-12-25T17:34:27.417+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.418+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:34:27.420+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.420+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/request-change: User not authenticated
2025-12-25T17:34:27.420+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.421+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.420263800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.421+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.442+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-25T17:34:27.443+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@50b4e828]
2025-12-25T17:34:27.445+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.445+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@63c57bde]
2025-12-25T17:34:27.465+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.466+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-25T17:34:27.471+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.471+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.472+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.471283700, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T17:34:27.472+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 45 giay truoc khi gui lai ma OTP]
2025-12-25T17:34:27.505+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.508+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:34:27.513+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.513+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.513+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.513947800, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-25T17:34:27.513+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong chinh xac hoac da het han]
2025-12-25T17:34:27.524+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:34:27.525+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.525+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Ma OTP moi da duoc gui den email moi}]
2025-12-25T17:34:27.540+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.540+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T17:34:27.543+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.543+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.543+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.543512, status=400, error=Bad Request, message=Ban da nh (truncated)...]
2025-12-25T17:34:27.545+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ban da nhap sai ma OTP qua nhieu lan. Vui long yeu cau gui ma OTP moi.]
2025-12-25T17:34:27.556+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.559+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=, otp=123456)]
2025-12-25T17:34:27.560+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.561+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.562+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.561715400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.562+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeVerifyRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-25T17:34:27.574+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.575+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=different@example.com, otp=123456)]
2025-12-25T17:34:27.578+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.579+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.580+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.578376900, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:34:27.581+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi khong khop voi yeu cau truoc do]
2025-12-25T17:34:27.609+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-25T17:34:27.610+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=existing@example.com)]
2025-12-25T17:34:27.614+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.615+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.615+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.614502400, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:34:27.615+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T17:34:27.632+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.633+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:34:27.635+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.636+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@728ad254]
2025-12-25T17:34:27.647+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.652+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-25T17:34:27.655+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.655+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.656+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.655001700, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-25T17:34:27.656+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong dung. Ban con 4 lan thu.]
2025-12-25T17:34:27.666+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-25T17:34:27.667+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.667+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/avatar: User not authenticated
2025-12-25T17:34:27.668+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.668+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.667674900, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.670+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.680+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:34:27.681+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.681+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.681+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.681913500, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-25T17:34:27.681+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 30 giay truoc khi gui lai ma OTP]
2025-12-25T17:34:27.693+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.694+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=abc123)]
2025-12-25T17:34:27.695+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:34:27.695+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.696+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.695602200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:34:27.699+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [abc123]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@794f937a,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-25T17:34:27.712+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-25T17:34:27.713+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@6b4b6cd6]
2025-12-25T17:34:27.715+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.715+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/password: User not authenticated
2025-12-25T17:34:27.715+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.716+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.715831300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.717+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:27.725+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-25T17:34:27.726+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.728+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.728+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.726882, status=400, error=Bad Request, message=User not  (truncated)...]
2025-12-25T17:34:27.728+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: User not found]
2025-12-25T17:34:27.734+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-25T17:34:27.735+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-25T17:34:27.735+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.735+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.735580100, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-25T17:34:27.735+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-25T17:34:27.743+07:00 DEBUG 20248 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-25T17:34:27.744+07:00 DEBUG 20248 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-25T17:34:27.747+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-25T17:34:27.747+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /users/profile/email/verify-change: User not authenticated
2025-12-25T17:34:27.747+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:34:27.748+07:00 DEBUG 20248 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:34:27.747050200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-25T17:34:27.748+07:00 DEBUG 20248 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-25T17:34:28.686+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Authentication failed at /api/v1/test: Full authentication required
2025-12-25T17:34:28.692+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Authentication failed at /api/v1/test: null
2025-12-25T17:34:28.710+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unauthorized access to /api/v1/test: Chua xac thuc
2025-12-25T17:34:28.776+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Access Denied to /api/v1/test: Access is denied
2025-12-25T17:34:28.784+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Access Denied to /api/v1/test: Access denied
2025-12-25T17:34:28.806+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: Forbidden
2025-12-25T17:34:28.817+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: 
2025-12-25T17:34:28.831+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: null
2025-12-25T17:34:28.843+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test:    
2025-12-25T17:34:28.855+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Forbidden access to /api/v1/test: Ban khong co quyen xem tai nguyen nay
2025-12-25T17:34:28.874+07:00 ERROR 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unexpected error occurred at /api/v1/test: 

java.lang.RuntimeException: Some unexpected error
	at com.petties.petties.exception.GlobalExceptionHandlerTest$GenericExceptionTests.handleGenericException_ShouldReturn500Status(GlobalExceptionHandlerTest.java:125) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767) ~[junit-platform-commons-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:34:28.896+07:00 ERROR 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Unexpected error occurred at /api/v1/test: 

java.lang.Exception: Unexpected error
	at com.petties.petties.exception.GlobalExceptionHandlerTest$GenericExceptionTests.handleGenericException_ShouldReturnVietnameseMessage(GlobalExceptionHandlerTest.java:108) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:767) ~[junit-platform-commons-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$8(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.11.3.jar:5.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.11.3.jar:1.11.3]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.2.jar:3.5.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.2.jar:3.5.2]

2025-12-25T17:34:28.915+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Bad credentials attempt at /api/v1/test
2025-12-25T17:34:28.920+07:00  WARN 20248 --- [petties] [main] c.p.p.exception.GlobalExceptionHandler   : Bad credentials attempt at /api/v1/test
2025-12-25T17:34:29.079+07:00 DEBUG 20248 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@55cff952, started on Thu Dec 25 17:34:11 ICT 2025
2025-12-25T17:34:29.086+07:00 DEBUG 20248 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5a5a973c, started on Thu Dec 25 17:34:20 ICT 2025
2025-12-25T17:34:29.089+07:00 DEBUG 20248 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3da701a1, started on Thu Dec 25 17:34:22 ICT 2025
2025-12-25T17:34:29.093+07:00 DEBUG 20248 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@47fca369, started on Thu Dec 25 17:34:23 ICT 2025
2025-12-25T17:34:29.095+07:00 DEBUG 20248 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@7cff1930, started on Thu Dec 25 17:34:25 ICT 2025
2025-12-25T17:34:29.096+07:00 DEBUG 20248 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4734a551, started on Thu Dec 25 17:34:26 ICT 2025
2025-12-25T17:38:26.530+07:00  INFO 18868 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 18868 (started by ADMIN in E:\DoAn\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-25T17:38:26.533+07:00 DEBUG 18868 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-25T17:38:26.533+07:00  INFO 18868 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-25T17:38:26.555+07:00 DEBUG 18868 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1b32cd16
2025-12-25T17:38:30.563+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 13 mappings in 'requestMappingHandlerMapping'
2025-12-25T17:38:30.847+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-25T17:38:31.126+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-25T17:38:31.211+07:00 DEBUG 18868 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-25T17:38:31.345+07:00  WARN 18868 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-25T17:38:31.345+07:00 DEBUG 18868 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-25T17:38:31.588+07:00 DEBUG 18868 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-25T17:38:31.676+07:00  INFO 18868 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-25T17:38:31.677+07:00  INFO 18868 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-25T17:38:31.679+07:00  INFO 18868 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-25T17:38:31.720+07:00  INFO 18868 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 5.766 seconds (process running for 7.428)
2025-12-25T17:38:31.862+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID, UUID)
2025-12-25T17:38:31.913+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:31.914+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-25T17:38:32.053+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:38:32.108+07:00 DEBUG 18868 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@75345e47]
2025-12-25T17:38:32.240+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.241+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@57f89680]
2025-12-25T17:38:32.330+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServicesByClinicId(UUID)
2025-12-25T17:38:32.335+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.336+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@25c4f621]]
2025-12-25T17:38:32.362+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-25T17:38:32.366+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.366+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@33e6bd36]
2025-12-25T17:38:32.394+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-25T17:38:32.405+07:00 DEBUG 18868 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@2484c868]
2025-12-25T17:38:32.422+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.424+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7b92ea9d]
2025-12-25T17:38:32.442+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-25T17:38:32.445+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.446+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@5c7a06ec]]
2025-12-25T17:38:32.477+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#inheritFromMasterService(UUID, UUID, BigDecimal, BigDecimal)
2025-12-25T17:38:32.483+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.483+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@2af3b054]
2025-12-25T17:38:32.509+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:38:32.515+07:00 DEBUG 18868 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-25T17:38:32.546+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.555+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:38:32.521790100, status=404, error=Not Found, message=Service  (truncated)...]
2025-12-25T17:38:32.558+07:00 DEBUG 18868 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-25T17:38:32.575+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-25T17:38:32.578+07:00 DEBUG 18868 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@2f3a0f37]
2025-12-25T17:38:32.597+07:00 DEBUG 18868 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-25T17:38:32.600+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.602+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-25T17:38:32.600441800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-25T17:38:32.610+07:00 DEBUG 18868 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinicService.ClinicServiceResponse> com.petties.petties.controller.ClinicServiceController.createService(com.petties.petties.dto.clinicService.ClinicServiceRequest) with 3 errors: [Field error in object 'clinicServiceRequest' on field 'basePrice': rejected value [null]; codes [NotNull.clinicServiceRequest.basePrice,NotNull.basePrice,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.basePrice,basePrice]; arguments []; default message [basePrice]]; default message [Giá cơ bản không được để trống]] [Field error in object 'clinicServiceRequest' on field 'name': rejected value [null]; codes [NotBlank.clinicServiceRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.name,name]; arguments []; default message [name]]; default message [Tên dịch vụ không được để trống]] [Field error in object 'clinicServiceRequest' on field 'slotsRequired': rejected value [null]; codes [NotNull.clinicServiceRequest.slotsRequired,NotNull.slotsRequired,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.slotsRequired,slotsRequired]; arguments []; default message [slotsRequired]]; default message [Số slot yêu cầu không được để trống]] ]
2025-12-25T17:38:32.630+07:00 DEBUG 18868 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-25T17:38:32.633+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-25T17:38:32.634+07:00 DEBUG 18868 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7f9dbe11]
2025-12-25T17:38:32.753+07:00 DEBUG 18868 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@1b32cd16, started on Thu Dec 25 17:38:26 ICT 2025
