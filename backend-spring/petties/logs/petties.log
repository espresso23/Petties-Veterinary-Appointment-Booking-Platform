2025-12-23T00:28:11.943+07:00  INFO 34844 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Starting UserControllerUnitTest using Java 21.0.9 with PID 34844 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:28:11.959+07:00 DEBUG 34844 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:28:11.961+07:00  INFO 34844 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:28:12.002+07:00 DEBUG 34844 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2f6bcf87
2025-12-23T00:28:15.631+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:28:15.974+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:28:16.206+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:28:16.297+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:28:16.451+07:00  WARN 34844 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:28:16.453+07:00 DEBUG 34844 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:28:17.028+07:00 DEBUG 34844 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:28:17.389+07:00  INFO 34844 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:28:17.391+07:00  INFO 34844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:28:17.394+07:00  INFO 34844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-23T00:28:17.545+07:00  INFO 34844 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Started UserControllerUnitTest in 6.246 seconds (process running for 7.876)
2025-12-23T00:28:18.119+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:18.332+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=12345)]
2025-12-23T00:28:18.538+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:18.597+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:18.603+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:18.547213300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:18.653+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [12345]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:28:18.804+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:28:18.810+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@5dc120ab]
2025-12-23T00:28:18.822+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:18.824+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:18.825+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:18.824275100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:18.827+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'phone': rejected value [not-a-number]; codes [Pattern.updateProfileRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^0\d{9,10}$]; default message [Số điện thoại không hợp lệ (10-11 số, bắt đầu bằng 0)]] ]
2025-12-23T00:28:18.847+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:28:18.849+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@2e1e7bc6]
2025-12-23T00:28:18.853+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:18.853+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:18.854+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:18.853124700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:18.858+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'fullName': rejected value []; codes [Size.updateProfileRequest.fullName,Size.fullName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.fullName,fullName]; arguments []; default message [fullName],100,2]; default message [Họ tên phải từ 2-100 ký tự]] ]
2025-12-23T00:28:18.918+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-23T00:28:18.941+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:18.942+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@51e1e058]
2025-12-23T00:28:19.040+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-23T00:28:19.053+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.054+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@4511146f]
2025-12-23T00:28:19.073+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:28:19.075+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.076+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.076+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.075084400, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.077+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.098+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-23T00:28:19.099+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.100+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.102+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.100789800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.102+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.133+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.135+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=)]
2025-12-23T00:28:19.142+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.143+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.144+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.143301, status=400, error=Validation Failed, message=Ema (truncated)...]
2025-12-23T00:28:19.150+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-23T00:28:19.172+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.175+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=1234567)]
2025-12-23T00:28:19.179+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.179+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.179+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.179815900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:19.181+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [1234567]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:28:19.204+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-23T00:28:19.209+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@518a7b8a]
2025-12-23T00:28:19.223+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.225+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.226+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.224249900, status=400, error=Bad Request, message=Mật kh (truncated)...]
2025-12-23T00:28:19.227+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Mật khẩu hiện tại không chính xác]
2025-12-23T00:28:19.237+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.239+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=not-an-email)]
2025-12-23T00:28:19.241+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.242+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.244+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.241545700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:19.246+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@758ebec4,.*]; default message [Email khong hop le]] ]
2025-12-23T00:28:19.271+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-23T00:28:19.272+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@c157abf]
2025-12-23T00:28:19.280+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.282+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Doi mat khau thanh cong}]
2025-12-23T00:28:19.295+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-23T00:28:19.300+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.303+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@6773bab2]
2025-12-23T00:28:19.323+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.325+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=)]
2025-12-23T00:28:19.325+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.327+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.327+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.327165900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:19.328+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest) with 2 errors: [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [NotBlank.emailChangeVerifyRequest.otp,NotBlank.otp,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp]]; default message [Ma OTP khong duoc de trong]] [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:28:19.343+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-23T00:28:19.345+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.345+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.346+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.345663100, status=400, error=Bad Request, message=File i (truncated)...]
2025-12-23T00:28:19.347+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: File is empty]
2025-12-23T00:28:19.360+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.366+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=not-an-email, otp=123456)]
2025-12-23T00:28:19.366+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.368+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.372+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.368207900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:19.372+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeVerifyRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@758ebec4,.*]; default message [Email khong hop le]] ]
2025-12-23T00:28:19.389+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:28:19.391+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@1d432d56]
2025-12-23T00:28:19.393+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.394+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.395+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.394812400, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.396+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.420+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.422+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-23T00:28:19.427+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.427+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=OTP da duoc gui den email moi}]
2025-12-23T00:28:19.447+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-23T00:28:19.452+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.455+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.457+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.455632800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.463+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.484+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:28:19.485+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.486+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.487+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.486334700, status=400, error=Bad Request, message=Khong  (truncated)...]
2025-12-23T00:28:19.490+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Khong co yeu cau thay doi email. Vui long tao yeu cau moi.]
2025-12-23T00:28:19.503+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.505+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=test@example.com)]
2025-12-23T00:28:19.511+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.513+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.513+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.513452800, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:28:19.519+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi phai khac email hien tai]
2025-12-23T00:28:19.533+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.536+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-23T00:28:19.539+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.540+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.540+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.539456300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.541+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.553+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:28:19.554+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@1af6974c]
2025-12-23T00:28:19.554+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.556+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@61d61b0e]
2025-12-23T00:28:19.573+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.575+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-23T00:28:19.578+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.579+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.580+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.578289600, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-23T00:28:19.584+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 45 giay truoc khi gui lai ma OTP]
2025-12-23T00:28:19.609+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.611+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-23T00:28:19.614+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.616+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.619+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.616311900, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-23T00:28:19.620+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong chinh xac hoac da het han]
2025-12-23T00:28:19.642+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:28:19.647+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.648+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Ma OTP moi da duoc gui den email moi}]
2025-12-23T00:28:19.664+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.666+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-23T00:28:19.669+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.670+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.670+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.669256100, status=400, error=Bad Request, message=Ban da (truncated)...]
2025-12-23T00:28:19.672+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ban da nhap sai ma OTP qua nhieu lan. Vui long yeu cau gui ma OTP moi.]
2025-12-23T00:28:19.682+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.684+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=, otp=123456)]
2025-12-23T00:28:19.685+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.685+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.685+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.685892600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:19.686+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeVerifyRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-23T00:28:19.702+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.707+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=different@example.com, otp=123456)]
2025-12-23T00:28:19.709+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.709+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.710+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.709056100, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:28:19.711+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi khong khop voi yeu cau truoc do]
2025-12-23T00:28:19.737+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:28:19.743+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=existing@example.com)]
2025-12-23T00:28:19.748+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.749+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.749+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.748935800, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:28:19.751+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-23T00:28:19.775+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.776+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-23T00:28:19.778+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.779+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@7a92827f]
2025-12-23T00:28:19.799+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.800+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-23T00:28:19.802+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.802+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.803+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.802348700, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-23T00:28:19.803+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong dung. Ban con 4 lan thu.]
2025-12-23T00:28:19.813+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-23T00:28:19.814+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.814+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.816+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.814996500, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.816+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.825+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:28:19.826+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.827+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.827+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.826268800, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-23T00:28:19.828+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 30 giay truoc khi gui lai ma OTP]
2025-12-23T00:28:19.837+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.838+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=abc123)]
2025-12-23T00:28:19.840+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:19.842+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.842+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.840923500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:19.843+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [abc123]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:28:19.854+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-23T00:28:19.857+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@42028589]
2025-12-23T00:28:19.858+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.859+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.860+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.859703900, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.860+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.869+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-23T00:28:19.871+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.871+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.873+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.871694400, status=400, error=Bad Request, message=User n (truncated)...]
2025-12-23T00:28:19.873+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: User not found]
2025-12-23T00:28:19.884+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:28:19.887+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:19.887+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.887+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.887448700, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:28:19.888+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-23T00:28:19.898+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:28:19.899+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-23T00:28:19.900+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:19.901+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:19.901+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:19.900196100, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:28:19.901+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:28:19.935+07:00  INFO 34844 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.AuthControllerUnitTest]: AuthControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-23T00:28:19.998+07:00  INFO 34844 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.AuthControllerUnitTest
2025-12-23T00:28:20.014+07:00  INFO 34844 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-23T00:28:20.122+07:00  INFO 34844 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Starting AuthControllerUnitTest using Java 21.0.9 with PID 34844 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:28:20.122+07:00 DEBUG 34844 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:28:20.122+07:00  INFO 34844 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:28:20.127+07:00 DEBUG 34844 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@411ae0d7
2025-12-23T00:28:21.062+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:28:21.135+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:28:21.142+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:28:21.154+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:28:21.291+07:00  WARN 34844 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:28:21.291+07:00 DEBUG 34844 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:28:21.313+07:00 DEBUG 34844 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:28:21.340+07:00  INFO 34844 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:28:21.340+07:00  INFO 34844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:28:21.341+07:00  INFO 34844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-23T00:28:21.354+07:00  INFO 34844 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Started AuthControllerUnitTest in 1.341 seconds (process running for 11.686)
2025-12-23T00:28:21.375+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:21.392+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@3314f179]
2025-12-23T00:28:21.418+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.483+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.484+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.419681200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.487+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [NotBlank.sendOtpRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password]]; default message [Mật khẩu không được để trống]] ]
2025-12-23T00:28:21.507+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:21.509+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@507fecf3]
2025-12-23T00:28:21.516+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.517+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.519+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.517265700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.520+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [1234567]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-23T00:28:21.549+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.554+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@8de8b07]
2025-12-23T00:28:21.559+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.560+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.560+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.560478800, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-23T00:28:21.563+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-23T00:28:21.577+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:21.578+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6bfc5296]
2025-12-23T00:28:21.610+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.611+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@1da61a29]
2025-12-23T00:28:21.621+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:28:21.623+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@6e475994]
2025-12-23T00:28:21.627+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.629+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@66d73e2d]
2025-12-23T00:28:21.650+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:21.652+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@5a08d301]
2025-12-23T00:28:21.654+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.657+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.659+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.654166500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.659+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value [null]; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-23T00:28:21.672+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.673+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4f571c0e]
2025-12-23T00:28:21.680+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.680+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.681+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.680096500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.682+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [NotBlank.resetPasswordRequest.newPassword,NotBlank.newPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword]]; default message [Mật khẩu mới không được để trống]] [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-23T00:28:21.708+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.709+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@16279a5d]
2025-12-23T00:28:21.712+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.713+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.714+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.713396200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.715+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [NotBlank.resetPasswordRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] ]
2025-12-23T00:28:21.725+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:21.727+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@1e487d57]
2025-12-23T00:28:21.729+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.730+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.730+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.730168900, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-23T00:28:21.730+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-23T00:28:21.738+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-23T00:28:21.744+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.744+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@533a27f8]
2025-12-23T00:28:21.758+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-23T00:28:21.765+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.769+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.771+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.766713900, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-23T00:28:21.777+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-23T00:28:21.788+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.790+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@9d7a853]
2025-12-23T00:28:21.796+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.797+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.MessageResponse@71c69628]
2025-12-23T00:28:21.808+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:21.809+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@613ba54e]
2025-12-23T00:28:21.811+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.812+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.812+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.811229900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.813+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value []; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-23T00:28:21.822+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.823+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@22cce199]
2025-12-23T00:28:21.824+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.825+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.825+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.825243800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.826+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value []; codes [NotBlank.resetPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:28:21.834+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:21.835+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@19ee0a2f]
2025-12-23T00:28:21.837+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.837+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.838+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.837679500, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-23T00:28:21.838+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-23T00:28:21.846+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:21.848+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@3549c070]
2025-12-23T00:28:21.850+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.850+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@235dacd7]
2025-12-23T00:28:21.861+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.864+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@49c555c3]
2025-12-23T00:28:21.866+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.867+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.867+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.866199200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.869+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value [Pass1]; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-23T00:28:21.876+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:21.877+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@5812935]
2025-12-23T00:28:21.878+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.879+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.879+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.879514700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.881+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.resetPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@758ebec4,.*]; default message [Email không đúng định dạng]] ]
2025-12-23T00:28:21.889+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:21.890+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@5a6d4dee]
2025-12-23T00:28:21.892+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.893+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.893+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.892027300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.894+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value []; codes [NotBlank.sendOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:28:21.900+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:21.902+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@7af7c9aa]
2025-12-23T00:28:21.904+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.904+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.904+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.904750, status=400, error=Bad Request, message=Email alr (truncated)...]
2025-12-23T00:28:21.905+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email already exists]
2025-12-23T00:28:21.913+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:21.914+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@6334c0d8]
2025-12-23T00:28:21.914+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.916+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@74ed3be4]
2025-12-23T00:28:21.927+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-23T00:28:21.929+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.929+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.930+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.929586200, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-23T00:28:21.930+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending password reset found]
2025-12-23T00:28:21.937+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:21.937+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@4718d320]
2025-12-23T00:28:21.939+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.941+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.941+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.940642100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.943+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'username': rejected value [ab]; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-23T00:28:21.949+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-23T00:28:21.952+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.952+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.952+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.952614900, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-23T00:28:21.953+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-23T00:28:21.965+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:28:21.966+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@1002f859]
2025-12-23T00:28:21.966+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:21.969+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.970+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.968131500, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-23T00:28:21.971+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid Google ID token]
2025-12-23T00:28:21.980+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:28:21.981+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@3c5cb013]
2025-12-23T00:28:21.985+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:21.986+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.986+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.985795300, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:28:21.987+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email not found]
2025-12-23T00:28:21.992+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:28:21.993+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@24fb8317]
2025-12-23T00:28:21.994+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:21.995+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:21.995+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:21.994745600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:21.996+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.forgotPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@758ebec4,.*]; default message [Email không đúng định dạng]] ]
2025-12-23T00:28:22.004+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:22.006+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@2351255a]
2025-12-23T00:28:22.008+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.009+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.010+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.008951800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.013+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value [abc123]; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@3d73cd78,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-23T00:28:22.020+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:22.020+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@4d145177]
2025-12-23T00:28:22.021+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.021+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.023+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.021853900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.023+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [12345]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-23T00:28:22.033+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:22.034+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@7621c3f7]
2025-12-23T00:28:22.035+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.035+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.035+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.035435200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.037+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [NotBlank.sendOtpRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username]]; default message [Tên đăng nhập không được để trống]] [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-23T00:28:22.046+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-23T00:28:22.048+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:22.048+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.048+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.048445400, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-23T00:28:22.048+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending registration found]
2025-12-23T00:28:22.056+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:22.057+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@1bca9b64]
2025-12-23T00:28:22.058+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.061+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.061+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.060982200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.062+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value []; codes [NotBlank.verifyOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:28:22.070+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:28:22.070+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@386ea60f]
2025-12-23T00:28:22.072+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.072+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.072+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.072219400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.073+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'idToken': rejected value []; codes [NotBlank.googleSignInRequest.idToken,NotBlank.idToken,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.idToken,idToken]; arguments []; default message [idToken]]; default message [ID token is required]] ]
2025-12-23T00:28:22.082+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:22.083+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@445c693]
2025-12-23T00:28:22.085+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.085+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.085+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.085291200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.086+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'confirmPassword': rejected value []; codes [NotBlank.resetPasswordRequest.confirmPassword,NotBlank.confirmPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.confirmPassword,confirmPassword]; arguments []; default message [confirmPassword]]; default message [Xác nhận mật khẩu không được để trống]] ]
2025-12-23T00:28:22.093+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:22.095+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@40b678b3]
2025-12-23T00:28:22.097+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.097+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.098+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.097358, status=400, error=Validation Failed, message=Họ  (truncated)...]
2025-12-23T00:28:22.098+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'fullName': rejected value []; codes [NotBlank.sendOtpRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-23T00:28:22.105+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:28:22.105+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@2fcad739]
2025-12-23T00:28:22.106+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.107+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@10664c3d]
2025-12-23T00:28:22.113+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:22.113+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@2c3d0ff8]
2025-12-23T00:28:22.115+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.116+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.116+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.115990600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.116+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'password': rejected value [12345]; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-23T00:28:22.122+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:22.123+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@574134ba]
2025-12-23T00:28:22.124+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.125+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.125+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.125304, status=400, error=Validation Failed, message=Pas (truncated)...]
2025-12-23T00:28:22.125+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-23T00:28:22.131+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:22.131+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@799557c8]
2025-12-23T00:28:22.134+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.134+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.135+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.134168900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.137+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest) with 2 errors: [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [NotBlank.verifyOtpRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-23T00:28:22.141+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:28:22.142+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@227c0cf7]
2025-12-23T00:28:22.143+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.143+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@13cc3984]
2025-12-23T00:28:22.151+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:22.153+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@35c9f527]
2025-12-23T00:28:22.154+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.154+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.155+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.154094400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.155+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value []; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-23T00:28:22.165+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:22.166+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@2784145d]
2025-12-23T00:28:22.167+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.167+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@4bd1b07d]
2025-12-23T00:28:22.188+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:22.189+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@1e9a10e9]
2025-12-23T00:28:22.191+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.191+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@233d2b76]
2025-12-23T00:28:22.202+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:22.203+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@2e60d4f4]
2025-12-23T00:28:22.204+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.204+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@14091e24]
2025-12-23T00:28:22.213+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:28:22.214+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@34c2e03d]
2025-12-23T00:28:22.215+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.216+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.216+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.215671800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.216+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value []; codes [NotBlank.forgotPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:28:22.227+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:28:22.228+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@61627c9d]
2025-12-23T00:28:22.229+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:28:22.229+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.230+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.229499200, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-23T00:28:22.230+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid username or password]
2025-12-23T00:28:22.242+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-23T00:28:22.243+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.243+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@92775a3]
2025-12-23T00:28:22.249+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:28:22.250+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@45a4587d]
2025-12-23T00:28:22.250+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.250+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.251+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.250315400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.251+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'platform': rejected value []; codes [NotBlank.googleSignInRequest.platform,NotBlank.platform,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.platform,platform]; arguments []; default message [platform]]; default message [Platform is required]] ]
2025-12-23T00:28:22.257+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:22.258+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@27adb90f]
2025-12-23T00:28:22.259+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:22.260+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.260+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.259807400, status=400, error=Bad Request, message=Passwo (truncated)...]
2025-12-23T00:28:22.261+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Passwords do not match]
2025-12-23T00:28:22.268+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:22.268+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@4645a575]
2025-12-23T00:28:22.269+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.269+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.269+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.269777900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.271+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'role': rejected value [null]; codes [NotNull.sendOtpRequest.role,NotNull.role,NotNull.com.petties.petties.model.enums.Role,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.role,role]; arguments []; default message [role]]; default message [Vai trò không được để trống]] ]
2025-12-23T00:28:22.278+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:28:22.279+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@57a0aeb8]
2025-12-23T00:28:22.281+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.281+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.282+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.281758900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.283+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.sendOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@758ebec4,.*]; default message [Email không hợp lệ]] ]
2025-12-23T00:28:22.292+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:28:22.293+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@2bf0bb93]
2025-12-23T00:28:22.295+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:28:22.295+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.296+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.295800300, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-23T00:28:22.297+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-23T00:28:22.307+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:28:22.308+07:00 DEBUG 34844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@2c955487]
2025-12-23T00:28:22.311+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:28:22.311+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:22.312+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:28:22.311131400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:28:22.312+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.verifyOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@758ebec4,.*]; default message [Email không hợp lệ]] ]
2025-12-23T00:28:22.330+07:00  INFO 34844 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicServiceControllerUnitTest]: ClinicServiceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-23T00:28:22.385+07:00  INFO 34844 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicServiceControllerUnitTest
2025-12-23T00:28:22.395+07:00  INFO 34844 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-23T00:28:22.442+07:00  INFO 34844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 34844 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:28:22.442+07:00 DEBUG 34844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:28:22.442+07:00  INFO 34844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:28:22.445+07:00 DEBUG 34844 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4cc28ad0
2025-12-23T00:28:23.300+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:28:23.390+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:28:23.406+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:28:23.423+07:00 DEBUG 34844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:28:23.458+07:00  WARN 34844 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:28:23.458+07:00 DEBUG 34844 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:28:23.490+07:00 DEBUG 34844 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:28:23.508+07:00  INFO 34844 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:28:23.508+07:00  INFO 34844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:28:23.510+07:00  INFO 34844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-23T00:28:23.522+07:00  INFO 34844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 1.128 seconds (process running for 13.853)
2025-12-23T00:28:23.561+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:28:23.564+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:23.565+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:28:23.587+07:00 DEBUG 34844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:28:23.589+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:28:23.589+07:00 DEBUG 34844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:28:23.625+07:00 DEBUG 34844 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@2f6bcf87, started on Tue Dec 23 00:28:12 ICT 2025
2025-12-23T00:28:23.629+07:00 DEBUG 34844 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@411ae0d7, started on Tue Dec 23 00:28:20 ICT 2025
2025-12-23T00:28:23.632+07:00 DEBUG 34844 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@4cc28ad0, started on Tue Dec 23 00:28:22 ICT 2025
2025-12-23T00:32:55.172+07:00  INFO 16444 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 16444 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:32:55.175+07:00 DEBUG 16444 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:32:55.176+07:00  INFO 16444 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:32:55.196+07:00 DEBUG 16444 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c
2025-12-23T00:32:57.989+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:32:58.225+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:32:58.398+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:32:58.474+07:00 DEBUG 16444 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:32:58.609+07:00  WARN 16444 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:32:58.609+07:00 DEBUG 16444 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:32:58.796+07:00 DEBUG 16444 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:32:58.888+07:00  INFO 16444 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:32:58.889+07:00  INFO 16444 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:32:58.893+07:00  INFO 16444 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-12-23T00:32:58.930+07:00  INFO 16444 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 4.174 seconds (process running for 5.354)
2025-12-23T00:32:59.048+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:32:59.141+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.143+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5dc7391e]
2025-12-23T00:32:59.278+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:32:59.280+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.281+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:32:59.343+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:32:59.399+07:00 DEBUG 16444 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@6cd6698b]
2025-12-23T00:32:59.584+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.586+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7d8d671b]
2025-12-23T00:32:59.615+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:32:59.619+07:00 DEBUG 16444 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@478fe415]
2025-12-23T00:32:59.627+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.628+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@50e0b472]
2025-12-23T00:32:59.642+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:32:59.644+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.644+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:32:59.655+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:32:59.658+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.658+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@510a2c7]
2025-12-23T00:32:59.673+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:32:59.677+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.677+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@2ae88712]]
2025-12-23T00:32:59.714+07:00 DEBUG 16444 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:32:59.716+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:32:59.717+07:00 DEBUG 16444 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@220f6a3c]
2025-12-23T00:32:59.880+07:00 DEBUG 16444 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c, started on Tue Dec 23 00:32:55 ICT 2025
2025-12-23T00:34:34.897+07:00  INFO 24740 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Starting AuthControllerUnitTest using Java 21.0.9 with PID 24740 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:34:34.901+07:00 DEBUG 24740 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:34:34.903+07:00  INFO 24740 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:34:34.941+07:00 DEBUG 24740 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@34523d46
2025-12-23T00:34:39.770+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:34:40.121+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:34:40.427+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:34:40.548+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:34:40.745+07:00  WARN 24740 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:34:40.747+07:00 DEBUG 24740 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:34:40.998+07:00 DEBUG 24740 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:34:41.128+07:00  INFO 24740 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:34:41.128+07:00  INFO 24740 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:34:41.130+07:00  INFO 24740 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-23T00:34:41.187+07:00  INFO 24740 --- [petties] [main] c.p.p.controller.AuthControllerUnitTest  : Started AuthControllerUnitTest in 7.028 seconds (process running for 9.286)
2025-12-23T00:34:41.399+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:41.491+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@49338f3]
2025-12-23T00:34:41.642+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:41.681+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:41.689+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:41.647226800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:41.746+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [NotBlank.sendOtpRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password]]; default message [Mật khẩu không được để trống]] [Field error in object 'sendOtpRequest' on field 'password': rejected value []; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-23T00:34:42.208+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:42.213+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@62dfe152]
2025-12-23T00:34:42.243+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.244+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.245+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.244101100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.250+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [1234567]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-23T00:34:42.333+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.340+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@1e4d93f7]
2025-12-23T00:34:42.360+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.361+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.362+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.360901600, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-23T00:34:42.364+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-23T00:34:42.395+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:42.399+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@452e2210]
2025-12-23T00:34:42.417+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.417+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@1e836aed]
2025-12-23T00:34:42.493+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:34:42.498+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@6f2a1ff0]
2025-12-23T00:34:42.503+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.504+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@74a3160d]
2025-12-23T00:34:42.527+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:42.529+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6987b74e]
2025-12-23T00:34:42.532+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.536+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.536+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.535075400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.537+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value [null]; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-23T00:34:42.558+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.560+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@74026b18]
2025-12-23T00:34:42.563+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.564+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.565+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.563957600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.568+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [NotBlank.resetPasswordRequest.newPassword,NotBlank.newPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword]]; default message [Mật khẩu mới không được để trống]] [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value []; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-23T00:34:42.585+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.586+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4270705f]
2025-12-23T00:34:42.589+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.590+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.590+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.589340600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.591+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest) with 2 errors: [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [NotBlank.resetPasswordRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value []; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-23T00:34:42.607+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:42.609+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@25a52a60]
2025-12-23T00:34:42.614+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.615+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.615+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.615173600, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-23T00:34:42.616+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-23T00:34:42.633+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-23T00:34:42.646+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.646+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@2ee5c08d]
2025-12-23T00:34:42.660+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-23T00:34:42.662+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.664+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.666+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.663978500, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-23T00:34:42.667+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-23T00:34:42.685+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.685+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@6b2efcae]
2025-12-23T00:34:42.688+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.689+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.MessageResponse@8aa1562]
2025-12-23T00:34:42.707+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:42.708+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@2a79da3a]
2025-12-23T00:34:42.709+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.709+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.711+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.709908800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.712+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'username': rejected value []; codes [NotBlank.loginRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.username,username]; arguments []; default message [username]]; default message [Username is required]] ]
2025-12-23T00:34:42.725+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.728+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@5e976553]
2025-12-23T00:34:42.731+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.732+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.732+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.732207100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.733+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value []; codes [NotBlank.resetPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:34:42.751+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:42.753+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@2093bb6c]
2025-12-23T00:34:42.754+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.756+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.756+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.755874100, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-23T00:34:42.756+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid OTP code]
2025-12-23T00:34:42.772+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:42.775+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@4ac77269]
2025-12-23T00:34:42.777+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.777+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@638d624a]
2025-12-23T00:34:42.791+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.791+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@4e67e090]
2025-12-23T00:34:42.793+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.795+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.795+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.794731600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.796+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'newPassword': rejected value [Pass1]; codes [Size.resetPasswordRequest.newPassword,Size.newPassword,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.newPassword,newPassword]; arguments []; default message [newPassword],2147483647,8]; default message [Mật khẩu mới phải có ít nhất 8 ký tự]] ]
2025-12-23T00:34:42.825+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:42.825+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@6055e899]
2025-12-23T00:34:42.827+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.828+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.828+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.828481200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.830+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.resetPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@478cebdb,.*]; default message [Email không đúng định dạng]] ]
2025-12-23T00:34:42.844+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:42.845+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@5186c801]
2025-12-23T00:34:42.850+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.851+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.852+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.851334300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.854+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value []; codes [NotBlank.sendOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:34:42.871+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:42.874+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@58041b11]
2025-12-23T00:34:42.881+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.882+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.882+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.881209300, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:34:42.883+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email already exists]
2025-12-23T00:34:42.898+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:42.899+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@3abdc11d]
2025-12-23T00:34:42.903+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.906+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@624be1d4]
2025-12-23T00:34:42.924+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-23T00:34:42.929+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.930+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.930+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.929834900, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-23T00:34:42.930+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending password reset found]
2025-12-23T00:34:42.945+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:42.947+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@688efeb2]
2025-12-23T00:34:42.949+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:42.949+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.950+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.949840800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:42.951+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'username': rejected value [ab]; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-23T00:34:42.967+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-23T00:34:42.971+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:42.972+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.972+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.972268500, status=400, error=Bad Request, message=Please (truncated)...]
2025-12-23T00:34:42.973+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Please wait before resending OTP]
2025-12-23T00:34:42.991+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:34:42.992+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@7272914b]
2025-12-23T00:34:42.995+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:42.996+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:42.996+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:42.995068500, status=401, error=Unauthorized, message=Inval (truncated)...]
2025-12-23T00:34:43.002+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid Google ID token]
2025-12-23T00:34:43.025+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:34:43.030+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@5cc152f9]
2025-12-23T00:34:43.040+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:43.040+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.040+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.040262700, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:34:43.041+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email not found]
2025-12-23T00:34:43.058+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:34:43.060+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@7b24d5e4]
2025-12-23T00:34:43.062+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.063+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.063+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.063870500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.065+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value [not-an-email]; codes [Email.forgotPasswordRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@478cebdb,.*]; default message [Email không đúng định dạng]] ]
2025-12-23T00:34:43.078+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:43.079+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@49b180c8]
2025-12-23T00:34:43.082+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.083+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.083+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.083342400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.085+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'otpCode': rejected value [abc123]; codes [Pattern.resetPasswordRequest.otpCode,Pattern.otpCode,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.otpCode,otpCode]; arguments []; default message [otpCode],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^\d{6}$]; default message [Mã OTP phải là 6 chữ số]] ]
2025-12-23T00:34:43.100+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:43.100+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@3e170abe]
2025-12-23T00:34:43.103+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.103+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.104+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.103096600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.105+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value [12345]; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-23T00:34:43.115+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:43.117+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@22617270]
2025-12-23T00:34:43.118+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.118+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.120+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.118531300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.121+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest) with 2 errors: [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [NotBlank.sendOtpRequest.username,NotBlank.username,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username]]; default message [Tên đăng nhập không được để trống]] [Field error in object 'sendOtpRequest' on field 'username': rejected value []; codes [Size.sendOtpRequest.username,Size.username,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.username,username]; arguments []; default message [username],50,3]; default message [Tên đăng nhập phải từ 3 đến 50 ký tự]] ]
2025-12-23T00:34:43.132+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendOtp(String)
2025-12-23T00:34:43.135+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:43.135+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.136+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.135240900, status=400, error=Bad Request, message=No pen (truncated)...]
2025-12-23T00:34:43.136+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: No pending registration found]
2025-12-23T00:34:43.150+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:43.150+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@57f83c82]
2025-12-23T00:34:43.153+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.153+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.154+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.153014300, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.155+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value []; codes [NotBlank.verifyOtpRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:34:43.165+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:34:43.166+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@53016c98]
2025-12-23T00:34:43.169+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.170+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.170+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.170054500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.171+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'idToken': rejected value []; codes [NotBlank.googleSignInRequest.idToken,NotBlank.idToken,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.idToken,idToken]; arguments []; default message [idToken]]; default message [ID token is required]] ]
2025-12-23T00:34:43.177+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:43.179+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@297454f7]
2025-12-23T00:34:43.180+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.180+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.180+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.180186100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.181+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.MessageResponse> com.petties.petties.controller.AuthController.resetPassword(com.petties.petties.dto.auth.ResetPasswordRequest): [Field error in object 'resetPasswordRequest' on field 'confirmPassword': rejected value []; codes [NotBlank.resetPasswordRequest.confirmPassword,NotBlank.confirmPassword,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [resetPasswordRequest.confirmPassword,confirmPassword]; arguments []; default message [confirmPassword]]; default message [Xác nhận mật khẩu không được để trống]] ]
2025-12-23T00:34:43.189+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:43.190+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@5e5a2b74]
2025-12-23T00:34:43.192+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.192+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.192+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.192457100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.193+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'fullName': rejected value []; codes [NotBlank.sendOtpRequest.fullName,NotBlank.fullName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.fullName,fullName]; arguments []; default message [fullName]]; default message [Họ tên không được để trống]] ]
2025-12-23T00:34:43.202+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:34:43.202+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@1add90e0]
2025-12-23T00:34:43.204+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.204+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@7bf94e91]
2025-12-23T00:34:43.213+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:43.214+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@755009f2]
2025-12-23T00:34:43.215+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.215+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.215+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.215986900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.217+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'password': rejected value [12345]; codes [Size.sendOtpRequest.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.password,password]; arguments []; default message [password],2147483647,6]; default message [Mật khẩu phải có ít nhất 6 ký tự]] ]
2025-12-23T00:34:43.232+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:43.233+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@5036a286]
2025-12-23T00:34:43.234+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.234+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.234+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.234085800, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.235+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value [null]; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-23T00:34:43.246+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:43.246+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@37393dab]
2025-12-23T00:34:43.249+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.249+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.251+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.249590900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.255+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest) with 2 errors: [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [NotBlank.verifyOtpRequest.otpCode,NotBlank.otpCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode]]; default message [Mã OTP không được để trống]] [Field error in object 'verifyOtpRequest' on field 'otpCode': rejected value []; codes [Size.verifyOtpRequest.otpCode,Size.otpCode,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.otpCode,otpCode]; arguments []; default message [otpCode],6,6]; default message [Mã OTP phải có đúng 6 chữ số]] ]
2025-12-23T00:34:43.276+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:34:43.281+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@4bac0be5]
2025-12-23T00:34:43.282+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.283+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@368d51ca]
2025-12-23T00:34:43.298+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:43.300+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@5d515e2c]
2025-12-23T00:34:43.306+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.307+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.308+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.306630900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.309+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.login(com.petties.petties.dto.auth.LoginRequest): [Field error in object 'loginRequest' on field 'password': rejected value []; codes [NotBlank.loginRequest.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.password,password]; arguments []; default message [password]]; default message [Password is required]] ]
2025-12-23T00:34:43.325+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:43.327+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6956eb58]
2025-12-23T00:34:43.329+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.330+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@7fff419d]
2025-12-23T00:34:43.343+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:43.344+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@f833223]
2025-12-23T00:34:43.347+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.347+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@5186b78a]
2025-12-23T00:34:43.359+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:43.359+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@6c2e7591]
2025-12-23T00:34:43.361+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.362+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.AuthResponse@7f2542f]
2025-12-23T00:34:43.372+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#forgotPassword(ForgotPasswordRequest)
2025-12-23T00:34:43.375+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ForgotPasswordRequest@3a44993c]
2025-12-23T00:34:43.377+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.377+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.377+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.377136, status=400, error=Validation Failed, message=Ema (truncated)...]
2025-12-23T00:34:43.379+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.forgotPassword(com.petties.petties.dto.auth.ForgotPasswordRequest): [Field error in object 'forgotPasswordRequest' on field 'email': rejected value []; codes [NotBlank.forgotPasswordRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [forgotPasswordRequest.email,email]; arguments []; default message [email]]; default message [Email không được để trống]] ]
2025-12-23T00:34:43.390+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-23T00:34:43.393+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.LoginRequest@1d7af82]
2025-12-23T00:34:43.394+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:43.395+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.395+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.394718, status=401, error=Unauthorized, message=Invalid  (truncated)...]
2025-12-23T00:34:43.395+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: Invalid username or password]
2025-12-23T00:34:43.404+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resendPasswordResetOtp(String)
2025-12-23T00:34:43.406+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.407+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.SendOtpResponse@4700963e]
2025-12-23T00:34:43.415+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#googleSignIn(GoogleSignInRequest)
2025-12-23T00:34:43.416+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.GoogleSignInRequest@523f3c29]
2025-12-23T00:34:43.417+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.419+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.419+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.417998200, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.419+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.googleSignIn(com.petties.petties.dto.auth.GoogleSignInRequest): [Field error in object 'googleSignInRequest' on field 'platform': rejected value []; codes [NotBlank.googleSignInRequest.platform,NotBlank.platform,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [googleSignInRequest.platform,platform]; arguments []; default message [platform]]; default message [Platform is required]] ]
2025-12-23T00:34:43.432+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:43.433+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@7aef8000]
2025-12-23T00:34:43.435+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:43.435+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.435+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.435538200, status=400, error=Bad Request, message=Passwo (truncated)...]
2025-12-23T00:34:43.435+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Passwords do not match]
2025-12-23T00:34:43.446+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:43.447+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@7efba9b9]
2025-12-23T00:34:43.448+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.449+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.449+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.449499400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.450+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'role': rejected value [null]; codes [NotNull.sendOtpRequest.role,NotNull.role,NotNull.com.petties.petties.model.enums.Role,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.role,role]; arguments []; default message [role]]; default message [Vai trò không được để trống]] ]
2025-12-23T00:34:43.459+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#sendRegistrationOtp(SendOtpRequest)
2025-12-23T00:34:43.460+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.SendOtpRequest@25e203e6]
2025-12-23T00:34:43.464+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.465+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.465+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.465020100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.465+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.SendOtpResponse> com.petties.petties.controller.AuthController.sendRegistrationOtp(com.petties.petties.dto.auth.SendOtpRequest): [Field error in object 'sendOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.sendOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [sendOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@478cebdb,.*]; default message [Email không hợp lệ]] ]
2025-12-23T00:34:43.477+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#resetPassword(ResetPasswordRequest)
2025-12-23T00:34:43.477+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.ResetPasswordRequest@1b5d1d9]
2025-12-23T00:34:43.479+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:43.480+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.480+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.479124900, status=400, error=Bad Request, message=OTP ha (truncated)...]
2025-12-23T00:34:43.480+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: OTP has expired]
2025-12-23T00:34:43.489+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#verifyOtpAndRegister(VerifyOtpRequest)
2025-12-23T00:34:43.491+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.auth.VerifyOtpRequest@d17d554]
2025-12-23T00:34:43.492+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:43.493+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:43.493+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:43.492254500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:43.494+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.AuthResponse> com.petties.petties.controller.AuthController.verifyOtpAndRegister(com.petties.petties.dto.auth.VerifyOtpRequest): [Field error in object 'verifyOtpRequest' on field 'email': rejected value [not-an-email]; codes [Email.verifyOtpRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [verifyOtpRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@478cebdb,.*]; default message [Email không hợp lệ]] ]
2025-12-23T00:34:43.522+07:00  INFO 24740 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.ClinicServiceControllerUnitTest]: ClinicServiceControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-23T00:34:43.586+07:00  INFO 24740 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.ClinicServiceControllerUnitTest
2025-12-23T00:34:43.598+07:00  INFO 24740 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-23T00:34:43.709+07:00  INFO 24740 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 24740 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:34:43.711+07:00 DEBUG 24740 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:34:43.711+07:00  INFO 24740 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:34:43.716+07:00 DEBUG 24740 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5ca3acad
2025-12-23T00:34:44.463+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:34:44.531+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:34:44.541+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:34:44.552+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:34:44.590+07:00  WARN 24740 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:34:44.590+07:00 DEBUG 24740 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:34:44.613+07:00 DEBUG 24740 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:34:44.633+07:00  INFO 24740 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:34:44.633+07:00  INFO 24740 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:34:44.636+07:00  INFO 24740 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-12-23T00:34:44.650+07:00  INFO 24740 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 1.053 seconds (process running for 12.75)
2025-12-23T00:34:44.664+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:34:44.676+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.677+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@4b3e4253]
2025-12-23T00:34:44.696+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:34:44.698+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.698+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:34:44.723+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:34:44.735+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@535aa7c7]
2025-12-23T00:34:44.748+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.748+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@28d1b2f]
2025-12-23T00:34:44.761+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:34:44.764+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@35d145fb]
2025-12-23T00:34:44.773+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.774+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@71f042b1]
2025-12-23T00:34:44.785+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:34:44.787+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.787+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:34:44.795+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:34:44.796+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.796+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@202b5293]
2025-12-23T00:34:44.805+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:34:44.808+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.809+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@69346100]]
2025-12-23T00:34:44.828+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:34:44.829+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:44.829+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@22a8e87b]
2025-12-23T00:34:44.849+07:00  INFO 24740 --- [petties] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.petties.petties.controller.UserControllerUnitTest]: UserControllerUnitTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-23T00:34:44.880+07:00  INFO 24740 --- [petties] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.petties.petties.PettiesApplication for test class com.petties.petties.controller.UserControllerUnitTest
2025-12-23T00:34:44.888+07:00  INFO 24740 --- [petties] [main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
2025-12-23T00:34:44.945+07:00  INFO 24740 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Starting UserControllerUnitTest using Java 21.0.9 with PID 24740 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:34:44.945+07:00 DEBUG 24740 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:34:44.945+07:00  INFO 24740 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:34:44.951+07:00 DEBUG 24740 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@5bbb0a25
2025-12-23T00:34:45.540+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:34:45.588+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:34:45.597+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:34:45.604+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:34:45.628+07:00  WARN 24740 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:34:45.629+07:00 DEBUG 24740 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:34:45.645+07:00 DEBUG 24740 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:34:45.655+07:00  INFO 24740 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:34:45.656+07:00  INFO 24740 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:34:45.657+07:00  INFO 24740 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-23T00:34:45.667+07:00  INFO 24740 --- [petties] [main] c.p.p.controller.UserControllerUnitTest  : Started UserControllerUnitTest in 0.78 seconds (process running for 13.766)
2025-12-23T00:34:45.679+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:45.683+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=12345)]
2025-12-23T00:34:45.704+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.709+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.710+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.704823700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.710+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [12345]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:34:45.722+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:34:45.725+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@6ff05f85]
2025-12-23T00:34:45.729+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.730+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.730+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.730040700, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.730+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'phone': rejected value [not-a-number]; codes [Pattern.updateProfileRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^0\d{9,10}$]; default message [Số điện thoại không hợp lệ (10-11 số, bắt đầu bằng 0)]] ]
2025-12-23T00:34:45.741+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:34:45.747+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@1142843c]
2025-12-23T00:34:45.749+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.749+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.751+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.749496100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.751+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.updateProfile(com.petties.petties.dto.user.UpdateProfileRequest): [Field error in object 'updateProfileRequest' on field 'fullName': rejected value []; codes [Size.updateProfileRequest.fullName,Size.fullName,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateProfileRequest.fullName,fullName]; arguments []; default message [fullName],100,2]; default message [Họ tên phải từ 2-100 ký tự]] ]
2025-12-23T00:34:45.764+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-23T00:34:45.772+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.772+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@25131637]
2025-12-23T00:34:45.789+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-23T00:34:45.792+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.793+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@39adf4e6]
2025-12-23T00:34:45.805+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:34:45.806+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:45.807+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.810+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.806146600, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:45.810+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:45.818+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-23T00:34:45.819+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:45.819+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.819+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.819077200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:45.820+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:45.832+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:45.834+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=)]
2025-12-23T00:34:45.840+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.841+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.841+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.840558600, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.842+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-23T00:34:45.849+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:45.850+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=1234567)]
2025-12-23T00:34:45.851+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.852+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.852+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.851954400, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.852+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [1234567]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:34:45.863+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-23T00:34:45.866+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@2edc6690]
2025-12-23T00:34:45.873+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:45.873+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.873+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.873047, status=400, error=Bad Request, message=Mật khẩu  (truncated)...]
2025-12-23T00:34:45.874+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Mật khẩu hiện tại không chính xác]
2025-12-23T00:34:45.882+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:45.887+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=not-an-email)]
2025-12-23T00:34:45.889+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.889+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.889+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.889559100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.890+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.String>> com.petties.petties.controller.UserController.requestEmailChange(com.petties.petties.dto.user.EmailChangeRequest): [Field error in object 'emailChangeRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@478cebdb,.*]; default message [Email khong hop le]] ]
2025-12-23T00:34:45.896+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-23T00:34:45.898+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@19487d13]
2025-12-23T00:34:45.904+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.904+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Doi mat khau thanh cong}]
2025-12-23T00:34:45.916+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-23T00:34:45.918+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.919+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@453de9d0]
2025-12-23T00:34:45.946+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:45.947+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=)]
2025-12-23T00:34:45.949+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.952+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.953+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.949735500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.954+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest) with 2 errors: [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value []; codes [NotBlank.emailChangeVerifyRequest.otp,NotBlank.otp,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp]]; default message [Ma OTP khong duoc de trong]] ]
2025-12-23T00:34:45.965+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-23T00:34:45.966+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:45.966+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.966+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.966033500, status=400, error=Bad Request, message=File i (truncated)...]
2025-12-23T00:34:45.967+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: File is empty]
2025-12-23T00:34:45.987+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:45.988+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=not-an-email, otp=123456)]
2025-12-23T00:34:45.992+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:45.993+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:45.994+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:45.993849100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:45.995+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value [not-an-email]; codes [Email.emailChangeVerifyRequest.newEmail,Email.newEmail,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail],[Ljakarta.validation.constraints.Pattern$Flag;@478cebdb,.*]; default message [Email khong hop le]] ]
2025-12-23T00:34:46.005+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:34:46.005+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@4ecc4b43]
2025-12-23T00:34:46.007+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:46.007+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.007+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.007385200, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:46.007+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:46.018+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:46.019+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-23T00:34:46.020+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.021+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=OTP da duoc gui den email moi}]
2025-12-23T00:34:46.028+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#uploadAvatar(MultipartFile)
2025-12-23T00:34:46.029+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:46.030+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.030+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.029612800, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:46.030+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:46.039+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:34:46.040+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.041+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.041+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.040813700, status=400, error=Bad Request, message=Khong  (truncated)...]
2025-12-23T00:34:46.041+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Khong co yeu cau thay doi email. Vui long tao yeu cau moi.]
2025-12-23T00:34:46.049+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:46.049+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=test@example.com)]
2025-12-23T00:34:46.050+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.051+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.051+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.051446, status=400, error=Bad Request, message=Email moi (truncated)...]
2025-12-23T00:34:46.051+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi phai khac email hien tai]
2025-12-23T00:34:46.058+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:46.059+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-23T00:34:46.060+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:46.061+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.061+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.060773400, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:46.061+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:46.068+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#updateProfile(UpdateProfileRequest)
2025-12-23T00:34:46.069+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.UpdateProfileRequest@3bd1c7f0]
2025-12-23T00:34:46.070+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.070+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@76ea1cb5]
2025-12-23T00:34:46.077+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:46.077+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=newemail@example.com)]
2025-12-23T00:34:46.078+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.079+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.079+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.079282400, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-23T00:34:46.079+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 45 giay truoc khi gui lai ma OTP]
2025-12-23T00:34:46.087+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.089+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-23T00:34:46.090+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.091+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.091+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.090589600, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-23T00:34:46.091+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong chinh xac hoac da het han]
2025-12-23T00:34:46.098+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:34:46.099+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.099+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{message=Ma OTP moi da duoc gui den email moi}]
2025-12-23T00:34:46.107+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.107+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-23T00:34:46.109+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.109+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.109+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.109867600, status=400, error=Bad Request, message=Ban da (truncated)...]
2025-12-23T00:34:46.109+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ban da nhap sai ma OTP qua nhieu lan. Vui long yeu cau gui ma OTP moi.]
2025-12-23T00:34:46.117+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.117+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=, otp=123456)]
2025-12-23T00:34:46.118+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:46.119+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.119+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.118843100, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:46.120+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'newEmail': rejected value []; codes [NotBlank.emailChangeVerifyRequest.newEmail,NotBlank.newEmail,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.newEmail,newEmail]; arguments []; default message [newEmail]]; default message [Email moi khong duoc de trong]] ]
2025-12-23T00:34:46.128+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.129+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=different@example.com, otp=123456)]
2025-12-23T00:34:46.132+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.132+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.133+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.132958700, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:34:46.133+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email moi khong khop voi yeu cau truoc do]
2025-12-23T00:34:46.140+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#requestEmailChange(EmailChangeRequest)
2025-12-23T00:34:46.141+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeRequest(newEmail=existing@example.com)]
2025-12-23T00:34:46.143+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.144+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.144+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.143654800, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:34:46.144+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-23T00:34:46.151+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.152+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-23T00:34:46.152+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.153+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.auth.UserResponse@4a4352b4]
2025-12-23T00:34:46.160+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.160+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=999999)]
2025-12-23T00:34:46.160+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.160+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.163+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.160693100, status=400, error=Bad Request, message=Ma OTP (truncated)...]
2025-12-23T00:34:46.163+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Ma OTP khong dung. Ban con 4 lan thu.]
2025-12-23T00:34:46.170+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#deleteAvatar()
2025-12-23T00:34:46.171+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:46.172+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.172+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.172425, status=401, error=Unauthorized, message=User not (truncated)...]
2025-12-23T00:34:46.172+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:46.179+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:34:46.180+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.180+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.180+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.180080400, status=400, error=Bad Request, message=Vui lo (truncated)...]
2025-12-23T00:34:46.181+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Vui long doi 30 giay truoc khi gui lai ma OTP]
2025-12-23T00:34:46.188+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.188+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=abc123)]
2025-12-23T00:34:46.190+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:34:46.190+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.190+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.190925500, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:34:46.192+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.auth.UserResponse> com.petties.petties.controller.UserController.verifyEmailChange(com.petties.petties.dto.user.EmailChangeVerifyRequest): [Field error in object 'emailChangeVerifyRequest' on field 'otp': rejected value [abc123]; codes [Pattern.emailChangeVerifyRequest.otp,Pattern.otp,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [emailChangeVerifyRequest.otp,otp]; arguments []; default message [otp],[Ljakarta.validation.constraints.Pattern$Flag;@25587290,^\d{6}$]; default message [Ma OTP phai co dung 6 chu so]] ]
2025-12-23T00:34:46.200+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#changePassword(ChangePasswordRequest)
2025-12-23T00:34:46.201+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.user.ChangePasswordRequest@36e9fd4f]
2025-12-23T00:34:46.202+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:46.202+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.202+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.202198300, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:46.202+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:46.209+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#getProfile()
2025-12-23T00:34:46.209+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.209+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.209+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.209865200, status=400, error=Bad Request, message=User n (truncated)...]
2025-12-23T00:34:46.209+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: User not found]
2025-12-23T00:34:46.217+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#resendEmailChangeOtp()
2025-12-23T00:34:46.218+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:34:46.218+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.218+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.218737900, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-23T00:34:46.218+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Email da duoc su dung boi tai khoan khac]
2025-12-23T00:34:46.225+07:00 DEBUG 24740 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.UserController#verifyEmailChange(EmailChangeVerifyRequest)
2025-12-23T00:34:46.226+07:00 DEBUG 24740 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [EmailChangeVerifyRequest(newEmail=newemail@example.com, otp=123456)]
2025-12-23T00:34:46.228+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleUnauthorized(UnauthorizedException, HttpServletRequest)
2025-12-23T00:34:46.228+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:34:46.228+07:00 DEBUG 24740 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:34:46.228006100, status=401, error=Unauthorized, message=User  (truncated)...]
2025-12-23T00:34:46.229+07:00 DEBUG 24740 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.UnauthorizedException: User not authenticated]
2025-12-23T00:34:46.287+07:00 DEBUG 24740 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@34523d46, started on Tue Dec 23 00:34:34 ICT 2025
2025-12-23T00:34:46.291+07:00 DEBUG 24740 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5ca3acad, started on Tue Dec 23 00:34:43 ICT 2025
2025-12-23T00:34:46.294+07:00 DEBUG 24740 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@5bbb0a25, started on Tue Dec 23 00:34:44 ICT 2025
2025-12-23T00:36:24.398+07:00  INFO 3844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 3844 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:36:24.400+07:00 DEBUG 3844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:36:24.400+07:00  INFO 3844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:36:24.419+07:00 DEBUG 3844 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c
2025-12-23T00:36:27.119+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:36:27.366+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:36:27.596+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:36:27.675+07:00 DEBUG 3844 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:36:27.861+07:00  WARN 3844 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:36:27.861+07:00 DEBUG 3844 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:36:28.170+07:00 DEBUG 3844 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:36:28.279+07:00  INFO 3844 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:36:28.280+07:00  INFO 3844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:36:28.288+07:00  INFO 3844 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 8 ms
2025-12-23T00:36:28.420+07:00  INFO 3844 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 4.458 seconds (process running for 5.668)
2025-12-23T00:36:28.634+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:36:28.794+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:28.799+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5dc7391e]
2025-12-23T00:36:28.980+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:36:28.983+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:28.983+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:36:29.025+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:36:29.078+07:00 DEBUG 3844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@6cd6698b]
2025-12-23T00:36:29.206+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:29.206+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7d8d671b]
2025-12-23T00:36:29.234+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:36:29.238+07:00 DEBUG 3844 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@478fe415]
2025-12-23T00:36:29.252+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:29.252+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@50e0b472]
2025-12-23T00:36:29.269+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:36:29.271+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:29.272+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:36:29.283+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:36:29.288+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:29.289+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@510a2c7]
2025-12-23T00:36:29.308+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:36:29.311+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:29.313+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@2ae88712]]
2025-12-23T00:36:29.335+07:00 DEBUG 3844 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:36:29.335+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:36:29.337+07:00 DEBUG 3844 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@220f6a3c]
2025-12-23T00:36:29.427+07:00 DEBUG 3844 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c, started on Tue Dec 23 00:36:24 ICT 2025
2025-12-23T00:37:15.052+07:00  INFO 36300 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 36300 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:37:15.053+07:00 DEBUG 36300 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:37:15.054+07:00  INFO 36300 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:37:15.087+07:00 DEBUG 36300 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c
2025-12-23T00:37:19.075+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:37:19.466+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:37:19.778+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:37:19.916+07:00 DEBUG 36300 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:37:20.154+07:00  WARN 36300 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:37:20.154+07:00 DEBUG 36300 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:37:20.354+07:00 DEBUG 36300 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:37:20.461+07:00  INFO 36300 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:37:20.461+07:00  INFO 36300 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:37:20.465+07:00  INFO 36300 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2025-12-23T00:37:20.527+07:00  INFO 36300 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 6.229 seconds (process running for 8.203)
2025-12-23T00:37:20.691+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:37:20.834+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:20.838+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7455204c]
2025-12-23T00:37:20.983+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:37:20.985+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:20.985+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:37:21.043+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:37:21.091+07:00 DEBUG 36300 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@21780905]
2025-12-23T00:37:21.191+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:21.192+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@272c5abd]
2025-12-23T00:37:21.211+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:37:21.216+07:00 DEBUG 36300 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@1fa44f66]
2025-12-23T00:37:21.223+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:21.223+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5b80b41d]
2025-12-23T00:37:21.238+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:37:21.239+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:21.240+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:37:21.252+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:37:21.256+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:21.257+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5af641d3]
2025-12-23T00:37:21.270+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:37:21.274+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:21.275+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@510a2c7]]
2025-12-23T00:37:21.298+07:00 DEBUG 36300 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:37:21.300+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:37:21.301+07:00 DEBUG 36300 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@29fc83c5]
2025-12-23T00:37:21.416+07:00 DEBUG 36300 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c, started on Tue Dec 23 00:37:15 ICT 2025
2025-12-23T00:38:07.374+07:00  INFO 6088 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 6088 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:38:07.376+07:00 DEBUG 6088 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:38:07.376+07:00  INFO 6088 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:38:07.410+07:00 DEBUG 6088 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c
2025-12-23T00:38:11.445+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:38:11.770+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:38:12.089+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:38:12.201+07:00 DEBUG 6088 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:38:12.417+07:00  WARN 6088 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:38:12.418+07:00 DEBUG 6088 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:38:12.736+07:00 DEBUG 6088 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:38:12.877+07:00  INFO 6088 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:38:12.878+07:00  INFO 6088 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:38:12.880+07:00  INFO 6088 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-23T00:38:12.939+07:00  INFO 6088 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 6.226 seconds (process running for 8.836)
2025-12-23T00:38:13.114+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:38:13.249+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.254+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5dc7391e]
2025-12-23T00:38:13.480+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:38:13.485+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.485+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:38:13.545+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:38:13.618+07:00 DEBUG 6088 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@6cd6698b]
2025-12-23T00:38:13.760+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.761+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7d8d671b]
2025-12-23T00:38:13.799+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:38:13.804+07:00 DEBUG 6088 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@478fe415]
2025-12-23T00:38:13.814+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.814+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@50e0b472]
2025-12-23T00:38:13.832+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:38:13.834+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.834+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:38:13.852+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:38:13.855+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.855+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@510a2c7]
2025-12-23T00:38:13.887+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:38:13.893+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.893+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@2ae88712]]
2025-12-23T00:38:13.934+07:00 DEBUG 6088 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:38:13.936+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:38:13.937+07:00 DEBUG 6088 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@220f6a3c]
2025-12-23T00:38:14.121+07:00 DEBUG 6088 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c, started on Tue Dec 23 00:38:07 ICT 2025
2025-12-23T00:41:26.814+07:00  INFO 30664 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 30664 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:41:26.817+07:00 DEBUG 30664 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:41:26.819+07:00  INFO 30664 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:41:26.856+07:00 DEBUG 30664 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c
2025-12-23T00:41:31.227+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:41:31.687+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:41:32.225+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:41:32.344+07:00 DEBUG 30664 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:41:32.506+07:00  WARN 30664 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:41:32.507+07:00 DEBUG 30664 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:41:32.706+07:00 DEBUG 30664 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:41:32.827+07:00  INFO 30664 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:41:32.830+07:00  INFO 30664 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:41:32.832+07:00  INFO 30664 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-23T00:41:32.881+07:00  INFO 30664 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 6.725 seconds (process running for 8.179)
2025-12-23T00:41:33.046+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:41:33.165+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.167+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@68229a6]
2025-12-23T00:41:33.319+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:41:33.323+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.324+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:41:33.362+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:41:33.400+07:00 DEBUG 30664 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@dd77e0d]
2025-12-23T00:41:33.484+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.485+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@339cde4b]
2025-12-23T00:41:33.517+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:41:33.522+07:00 DEBUG 30664 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@29eaf100]
2025-12-23T00:41:33.536+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.536+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@747e8659]
2025-12-23T00:41:33.550+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:41:33.551+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.552+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:41:33.562+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:41:33.565+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.566+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@da11873]
2025-12-23T00:41:33.583+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:41:33.586+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.588+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@aaa7000]]
2025-12-23T00:41:33.608+07:00 DEBUG 30664 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:41:33.611+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:41:33.611+07:00 DEBUG 30664 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@29d563bd]
2025-12-23T00:41:33.679+07:00 DEBUG 30664 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c, started on Tue Dec 23 00:41:26 ICT 2025
2025-12-23T00:44:15.857+07:00  INFO 4516 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 4516 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:44:15.858+07:00 DEBUG 4516 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:44:15.859+07:00  INFO 4516 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:44:15.883+07:00 DEBUG 4516 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c
2025-12-23T00:44:19.021+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:44:19.238+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:44:19.428+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:44:19.527+07:00 DEBUG 4516 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:44:19.717+07:00  WARN 4516 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:44:19.718+07:00 DEBUG 4516 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:44:19.939+07:00 DEBUG 4516 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:44:20.015+07:00  INFO 4516 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:44:20.016+07:00  INFO 4516 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:44:20.018+07:00  INFO 4516 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
2025-12-23T00:44:20.092+07:00  INFO 4516 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 4.792 seconds (process running for 6.543)
2025-12-23T00:44:20.283+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:44:20.372+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.375+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5dc7391e]
2025-12-23T00:44:20.510+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:44:20.512+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.513+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:44:20.547+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:44:20.602+07:00 DEBUG 4516 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@6cd6698b]
2025-12-23T00:44:20.713+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.714+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@7d8d671b]
2025-12-23T00:44:20.763+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:44:20.769+07:00 DEBUG 4516 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@aaa7000]
2025-12-23T00:44:20.781+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.782+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@495f7ca4]
2025-12-23T00:44:20.802+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:44:20.804+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.804+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:44:20.818+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:44:20.821+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.821+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@2648aa1b]
2025-12-23T00:44:20.851+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:44:20.854+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.859+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@29d563bd]]
2025-12-23T00:44:20.881+07:00 DEBUG 4516 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:44:20.884+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:44:20.884+07:00 DEBUG 4516 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5862dda4]
2025-12-23T00:44:21.006+07:00 DEBUG 4516 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@3703bf3c, started on Tue Dec 23 00:44:15 ICT 2025
2025-12-23T00:47:32.527+07:00  INFO 20592 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Starting ClinicServiceControllerUnitTest using Java 21.0.9 with PID 20592 (started by TAN in D:\SEP490\petties\backend-spring\petties)
2025-12-23T00:47:32.529+07:00 DEBUG 20592 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Running with Spring Boot v3.4.0, Spring v6.2.0
2025-12-23T00:47:32.530+07:00  INFO 20592 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : The following 1 profile is active: "dev"
2025-12-23T00:47:32.554+07:00 DEBUG 20592 --- [petties] [main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6443b128
2025-12-23T00:47:35.796+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2025-12-23T00:47:36.046+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-23T00:47:36.340+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-23T00:47:36.438+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-23T00:47:36.641+07:00  WARN 20592 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Found 2 UserDetailsService beans, with names [inMemoryUserDetailsManager, com.petties.petties.config.UserDetailsServiceImpl#0]. Global Authentication Manager will not use a UserDetailsService for username/password login. Consider publishing a single UserDetailsService bean.
2025-12-23T00:47:36.642+07:00 DEBUG 20592 --- [petties] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-12-23T00:47:36.887+07:00 DEBUG 20592 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, BasicAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23T00:47:37.005+07:00  INFO 20592 --- [petties] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-23T00:47:37.006+07:00  INFO 20592 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-23T00:47:37.009+07:00  INFO 20592 --- [petties] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-12-23T00:47:37.054+07:00  INFO 20592 --- [petties] [main] c.p.p.c.ClinicServiceControllerUnitTest  : Started ClinicServiceControllerUnitTest in 5.064 seconds (process running for 7.194)
2025-12-23T00:47:37.210+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updatePricePerKm(UUID, BigDecimal)
2025-12-23T00:47:37.327+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.331+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@67a3394c]
2025-12-23T00:47:37.492+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#deleteService(UUID)
2025-12-23T00:47:37.495+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.496+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:47:37.543+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:47:37.589+07:00 DEBUG 20592 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@5870fc05]
2025-12-23T00:47:37.725+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.725+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5737d116]
2025-12-23T00:47:37.771+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:47:37.776+07:00 DEBUG 20592 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@470a446f]
2025-12-23T00:47:37.784+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.784+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@669daa93]
2025-12-23T00:47:37.808+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:47:37.815+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException, HttpServletRequest)
2025-12-23T00:47:37.840+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.846+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:47:37.818921100, status=400, error=Bad Request, message=Invali (truncated)...]
2025-12-23T00:47:37.849+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.BadRequestException: Invalid status transition]
2025-12-23T00:47:37.866+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateBulkPricePerKm(BigDecimal)
2025-12-23T00:47:37.867+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.867+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-23T00:47:37.884+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#createService(ClinicServiceRequest)
2025-12-23T00:47:37.885+07:00 DEBUG 20592 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceRequest@62159fd]
2025-12-23T00:47:37.905+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException, HttpServletRequest)
2025-12-23T00:47:37.908+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.908+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:47:37.907905900, status=400, error=Validation Failed, message= (truncated)...]
2025-12-23T00:47:37.916+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.petties.petties.dto.clinicService.ClinicServiceResponse> com.petties.petties.controller.ClinicServiceController.createService(com.petties.petties.dto.clinicService.ClinicServiceRequest) with 3 errors: [Field error in object 'clinicServiceRequest' on field 'name': rejected value [null]; codes [NotBlank.clinicServiceRequest.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.name,name]; arguments []; default message [name]]; default message [Tên dịch vụ không được để trống]] [Field error in object 'clinicServiceRequest' on field 'slotsRequired': rejected value [null]; codes [NotNull.clinicServiceRequest.slotsRequired,NotNull.slotsRequired,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.slotsRequired,slotsRequired]; arguments []; default message [slotsRequired]]; default message [Số slot yêu cầu không được để trống]] [Field error in object 'clinicServiceRequest' on field 'basePrice': rejected value [null]; codes [NotNull.clinicServiceRequest.basePrice,NotNull.basePrice,NotNull.java.math.BigDecimal,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [clinicServiceRequest.basePrice,basePrice]; arguments []; default message [basePrice]]; default message [Giá cơ bản không được để trống]] ]
2025-12-23T00:47:37.943+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateService(UUID, ClinicServiceUpdateRequest)
2025-12-23T00:47:37.944+07:00 DEBUG 20592 --- [petties] [main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json" to [com.petties.petties.dto.clinicService.ClinicServiceUpdateRequest@522fb69]
2025-12-23T00:47:37.949+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-23T00:47:37.950+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.950+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:47:37.950362200, status=404, error=Not Found, message=Service  (truncated)...]
2025-12-23T00:47:37.951+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-23T00:47:37.965+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:47:37.969+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.970+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@64e3bc2]
2025-12-23T00:47:37.990+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getServiceById(UUID)
2025-12-23T00:47:37.992+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleResourceNotFound(ResourceNotFoundException, HttpServletRequest)
2025-12-23T00:47:37.993+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:37.993+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-23T00:47:37.992637500, status=404, error=Not Found, message=Service  (truncated)...]
2025-12-23T00:47:37.994+07:00 DEBUG 20592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.petties.petties.exception.ResourceNotFoundException: Service not found]
2025-12-23T00:47:38.011+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#getAllServices()
2025-12-23T00:47:38.018+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:38.018+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[com.petties.petties.dto.clinicService.ClinicServiceResponse@424ec990]]
2025-12-23T00:47:38.040+07:00 DEBUG 20592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.ClinicServiceController#updateServiceStatus(UUID, Boolean)
2025-12-23T00:47:38.041+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-23T00:47:38.041+07:00 DEBUG 20592 --- [petties] [main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.petties.petties.dto.clinicService.ClinicServiceResponse@5c03eb4e]
2025-12-23T00:47:38.123+07:00 DEBUG 20592 --- [petties] [SpringApplicationShutdownHook] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@6443b128, started on Tue Dec 23 00:47:32 ICT 2025
