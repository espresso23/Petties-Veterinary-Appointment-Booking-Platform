2025-12-20T02:18:42.851+07:00  INFO 22592 --- [petties] [main] com.petties.petties.PettiesApplication   : Starting PettiesApplication using Java 21.0.9 with PID 22592 (G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes started by bearx in G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-20T02:18:42.855+07:00 DEBUG 22592 --- [petties] [main] com.petties.petties.PettiesApplication   : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-20T02:18:42.857+07:00  INFO 22592 --- [petties] [main] com.petties.petties.PettiesApplication   : The following 1 profile is active: "dev"
2025-12-20T02:18:44.459+07:00  INFO 22592 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:18:44.523+07:00  INFO 22592 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-20T02:18:44.746+07:00  INFO 22592 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 200 ms. Found 4 JPA repository interfaces.
2025-12-20T02:18:44.804+07:00  INFO 22592 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:18:44.806+07:00  INFO 22592 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-20T02:18:44.832+07:00  INFO 22592 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.BlacklistedTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:18:44.834+07:00  INFO 22592 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.ClinicRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:18:44.836+07:00  INFO 22592 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:18:44.839+07:00  INFO 22592 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:18:44.840+07:00  INFO 22592 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2025-12-20T02:18:45.898+07:00  INFO 22592 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2025-12-20T02:18:45.917+07:00  INFO 22592 --- [petties] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-20T02:18:45.918+07:00  INFO 22592 --- [petties] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-20T02:18:46.000+07:00  INFO 22592 --- [petties] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 3078 ms
2025-12-20T02:18:46.420+07:00  INFO 22592 --- [petties] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-20T02:18:46.481+07:00  INFO 22592 --- [petties] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-20T02:18:47.171+07:00  INFO 22592 --- [petties] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-20T02:18:47.207+07:00  INFO 22592 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-20T02:18:47.412+07:00  INFO 22592 --- [petties] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3c2188f
2025-12-20T02:18:47.416+07:00  INFO 22592 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-20T02:18:47.466+07:00  WARN 22592 --- [petties] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-20T02:18:47.499+07:00  INFO 22592 --- [petties] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5433/petties_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: petties_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-20T02:18:48.956+07:00  INFO 22592 --- [petties] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-20T02:18:48.961+07:00  INFO 22592 --- [petties] [main] org.hibernate.orm.jdbc.batch             : HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2025-12-20T02:18:49.216+07:00  INFO 22592 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:18:49.312+07:00  INFO 22592 --- [petties] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-20T02:18:50.279+07:00 DEBUG 22592 --- [petties] [main] c.p.p.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-20T02:18:50.282+07:00 DEBUG 22592 --- [petties] [main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-20T02:18:50.283+07:00 DEBUG 22592 --- [petties] [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-20T02:18:50.398+07:00  INFO 22592 --- [petties] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-20T02:18:50.400+07:00  WARN 22592 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-20T02:18:50.480+07:00  INFO 22592 --- [petties] [main] c.p.petties.service.GoogleAuthService    : GoogleAuthService initialized with client ID: YOUR_WEB_CLIENT_ID.a...
2025-12-20T02:18:51.876+07:00  WARN 22592 --- [petties] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-20T02:18:52.219+07:00 DEBUG 22592 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-20T02:18:52.452+07:00 DEBUG 22592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 35 mappings in 'requestMappingHandlerMapping'
2025-12-20T02:18:52.520+07:00 DEBUG 22592 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-20T02:18:52.574+07:00 DEBUG 22592 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-20T02:18:52.644+07:00 DEBUG 22592 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-20T02:18:53.359+07:00  INFO 22592 --- [petties] [main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-12-20T02:18:53.421+07:00  INFO 22592 --- [petties] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-20T02:18:53.588+07:00  INFO 22592 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/api'
2025-12-20T02:18:53.605+07:00  INFO 22592 --- [petties] [main] com.petties.petties.PettiesApplication   : Started PettiesApplication in 11.36 seconds (process running for 12.011)
2025-12-20T02:18:53.863+07:00 DEBUG 22592 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:18:54.096+07:00 DEBUG 22592 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:18:54.124+07:00 ERROR 22592 --- [petties] [main] c.p.petties.config.DataInitializer       : ❌ Failed to create default admin user: Unable to commit against JDBC Connection

org.springframework.orm.jpa.JpaSystemException: Unable to commit against JDBC Connection
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:223) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:557) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166) ~[spring-data-jpa-4.0.0.jar:4.0.0]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222) ~[spring-aop-7.0.1.jar:7.0.1]
	at jdk.proxy2/jdk.proxy2.$Proxy182.save(Unknown Source) ~[na:na]
	at com.petties.petties.config.DataInitializer.initializeAdminUser(DataInitializer.java:63) ~[classes/:na]
	at com.petties.petties.config.DataInitializer.run(DataInitializer.java:37) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-4.0.0.jar:4.0.0]
	at com.petties.petties.PettiesApplication.main(PettiesApplication.java:14) ~[classes/:na]
Caused by: org.hibernate.TransactionException: Unable to commit against JDBC Connection
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:98) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commitNoRollbackOnly(JdbcResourceLocalTransactionCoordinatorImpl.java:250) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:243) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:90) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:553) ~[spring-orm-7.0.1.jar:7.0.1]
	... 34 common frames omitted
Caused by: org.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.
	at org.postgresql.jdbc.PgConnection.commit(PgConnection.java:1004) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyConnection.commit(ProxyConnection.java:378) ~[HikariCP-7.0.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyConnection.commit(HikariProxyConnection.java) ~[HikariCP-7.0.2.jar:na]
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:88) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	... 38 common frames omitted

2025-12-20T02:19:31.612+07:00  INFO 22592 --- [petties] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-20T02:19:31.612+07:00  INFO 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-20T02:19:31.612+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-12-20T02:19:31.612+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-12-20T02:19:31.614+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6dfc2448
2025-12-20T02:19:31.614+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6b873080
2025-12-20T02:19:31.615+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-20T02:19:31.615+07:00  INFO 22592 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-12-20T02:19:31.632+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /clinics
2025-12-20T02:19:31.646+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-20T02:19:31.654+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-12-20T02:19:31.660+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-12-20T02:19:31.661+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-20T02:19:31.662+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-12-20T02:20:09.032+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /actuator/health
2025-12-20T02:20:09.032+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-20T02:20:09.035+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /actuator/health
2025-12-20T02:20:09.037+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/actuator/health", parameters={}
2025-12-20T02:20:09.058+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/octet-stream" to []
2025-12-20T02:20:09.528+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-12-20T02:20:09.529+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.springframework.boot.health.actuate.endpoint.SystemHealthDescriptor@dd8a5c]
2025-12-20T02:20:09.599+07:00 DEBUG 22592 --- [petties] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-12-20T02:22:55.749+07:00  INFO 21312 --- [petties] [main] com.petties.petties.PettiesApplication   : Starting PettiesApplication using Java 21.0.9 with PID 21312 (G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes started by bearx in G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-20T02:22:55.752+07:00 DEBUG 21312 --- [petties] [main] com.petties.petties.PettiesApplication   : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-20T02:22:55.754+07:00  INFO 21312 --- [petties] [main] com.petties.petties.PettiesApplication   : The following 1 profile is active: "dev"
2025-12-20T02:22:56.663+07:00  INFO 21312 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:22:56.666+07:00  INFO 21312 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-20T02:22:56.827+07:00  INFO 21312 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 150 ms. Found 4 JPA repository interfaces.
2025-12-20T02:22:56.868+07:00  INFO 21312 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:22:56.870+07:00  INFO 21312 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-20T02:22:56.885+07:00  INFO 21312 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.BlacklistedTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:22:56.887+07:00  INFO 21312 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.ClinicRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:22:56.887+07:00  INFO 21312 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:22:56.889+07:00  INFO 21312 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:22:56.889+07:00  INFO 21312 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-12-20T02:22:57.551+07:00  INFO 21312 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2025-12-20T02:22:57.565+07:00  INFO 21312 --- [petties] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-20T02:22:57.566+07:00  INFO 21312 --- [petties] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-20T02:22:57.628+07:00  INFO 21312 --- [petties] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 1821 ms
2025-12-20T02:22:57.836+07:00  INFO 21312 --- [petties] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-20T02:22:57.874+07:00  INFO 21312 --- [petties] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-20T02:22:58.265+07:00  INFO 21312 --- [petties] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-20T02:22:58.294+07:00  INFO 21312 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-20T02:22:58.451+07:00  INFO 21312 --- [petties] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2979c6ef
2025-12-20T02:22:58.453+07:00  INFO 21312 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-20T02:22:58.481+07:00  WARN 21312 --- [petties] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-20T02:22:58.503+07:00  INFO 21312 --- [petties] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5433/petties_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: petties_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-20T02:22:59.872+07:00  INFO 21312 --- [petties] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-20T02:22:59.878+07:00  INFO 21312 --- [petties] [main] org.hibernate.orm.jdbc.batch             : HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2025-12-20T02:23:00.095+07:00  INFO 21312 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:23:00.166+07:00  INFO 21312 --- [petties] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-20T02:23:00.781+07:00 DEBUG 21312 --- [petties] [main] c.p.p.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-20T02:23:00.782+07:00 DEBUG 21312 --- [petties] [main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-20T02:23:00.782+07:00 DEBUG 21312 --- [petties] [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-20T02:23:00.857+07:00  INFO 21312 --- [petties] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-20T02:23:00.858+07:00  WARN 21312 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-20T02:23:00.925+07:00  INFO 21312 --- [petties] [main] c.p.petties.service.GoogleAuthService    : GoogleAuthService initialized with client ID: YOUR_WEB_CLIENT_ID.a...
2025-12-20T02:23:01.786+07:00  WARN 21312 --- [petties] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-20T02:23:02.003+07:00 DEBUG 21312 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-20T02:23:02.167+07:00 DEBUG 21312 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 35 mappings in 'requestMappingHandlerMapping'
2025-12-20T02:23:02.207+07:00 DEBUG 21312 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-20T02:23:02.237+07:00 DEBUG 21312 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-20T02:23:02.287+07:00 DEBUG 21312 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-20T02:23:02.654+07:00  INFO 21312 --- [petties] [main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-12-20T02:23:02.677+07:00  INFO 21312 --- [petties] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-20T02:23:02.755+07:00  INFO 21312 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/api'
2025-12-20T02:23:02.763+07:00  INFO 21312 --- [petties] [main] com.petties.petties.PettiesApplication   : Started PettiesApplication in 7.421 seconds (process running for 7.824)
2025-12-20T02:23:02.913+07:00 DEBUG 21312 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:23:02.929+07:00  INFO 21312 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Admin user 'admin' already exists. Skipping initialization.
2025-12-20T02:24:15.963+07:00  INFO 21312 --- [petties] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-20T02:24:15.965+07:00  INFO 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-20T02:24:15.965+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-12-20T02:24:15.965+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-12-20T02:24:15.966+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@813cef
2025-12-20T02:24:15.967+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@485f3327
2025-12-20T02:24:15.967+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-20T02:24:15.967+07:00  INFO 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-12-20T02:24:15.985+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /auth/login
2025-12-20T02:24:15.998+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-20T02:24:16.004+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /auth/login
2025-12-20T02:24:16.007+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/login", parameters={}
2025-12-20T02:24:16.011+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.petties.petties.controller.AuthController#login(LoginRequest)
2025-12-20T02:24:16.108+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.petties.petties.dto.auth.LoginRequest@1e1e3686]
2025-12-20T02:24:16.224+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.avatar,
        u1_0.avatar_public_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
        and u1_0.deleted_at is null
2025-12-20T02:24:16.314+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user 'owner1'
2025-12-20T02:24:16.314+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-12-20T02:24:16.320+07:00 ERROR 21312 --- [petties] [http-nio-8080-exec-1] o.s.t.i.TransactionInterceptor           : Application exception overridden by rollback exception

org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:152) ~[spring-security-core-7.0.0.jar:7.0.0]
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:183) ~[spring-security-core-7.0.0.jar:7.0.0]
	at com.petties.petties.service.AuthService.login(AuthService.java:97) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719) ~[spring-aop-7.0.1.jar:7.0.1]
	at com.petties.petties.service.AuthService$$SpringCGLIB$$0.login(<generated>) ~[classes/:na]
	at com.petties.petties.controller.AuthController.login(AuthController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649) ~[tomcat-embed-core-11.0.14.jar:6.1]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874) ~[spring-webmvc-7.0.1.jar:7.0.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710) ~[tomcat-embed-core-11.0.14.jar:6.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-11.0.14.jar:11.0.14]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:493) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:354) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:86) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:132) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at com.petties.petties.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:63) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:231) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:244) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:337) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:141) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195) ~[spring-security-web-7.0.0.jar:7.0.0]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317) ~[spring-security-config-7.0.0.jar:7.0.0]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199) ~[spring-web-7.0.1.jar:7.0.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.1.jar:7.0.1]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57) ~[tomcat-embed-core-11.0.14.jar:11.0.14]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.security.core.userdetails.UsernameNotFoundException: User not found with username: owner1
	at com.petties.petties.config.UserDetailsServiceImpl.lambda$0(UserDetailsServiceImpl.java:28) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.petties.petties.config.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:28) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719) ~[spring-aop-7.0.1.jar:7.0.1]
	at com.petties.petties.config.UserDetailsServiceImpl$$SpringCGLIB$$0.loadUserByUsername(<generated>) ~[classes/:na]
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:104) ~[spring-security-core-7.0.0.jar:7.0.0]
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:143) ~[spring-security-core-7.0.0.jar:7.0.0]
	... 143 common frames omitted

2025-12-20T02:24:16.389+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.petties.petties.exception.GlobalExceptionHandler#handleGenericException(Exception, HttpServletRequest)
2025-12-20T02:24:16.411+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-20T02:24:16.413+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(timestamp=2025-12-20T02:24:16.392054800, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-20T02:24:16.448+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.orm.jpa.JpaSystemException: Unable to rollback against JDBC Connection]
2025-12-20T02:24:16.448+07:00 DEBUG 21312 --- [petties] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2025-12-20T02:25:40.361+07:00  INFO 10096 --- [petties] [main] com.petties.petties.PettiesApplication   : Starting PettiesApplication using Java 21.0.9 with PID 10096 (G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes started by bearx in G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-20T02:25:40.365+07:00 DEBUG 10096 --- [petties] [main] com.petties.petties.PettiesApplication   : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-20T02:25:40.366+07:00  INFO 10096 --- [petties] [main] com.petties.petties.PettiesApplication   : The following 1 profile is active: "dev"
2025-12-20T02:25:41.610+07:00  INFO 10096 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:25:41.628+07:00  INFO 10096 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-20T02:25:42.062+07:00  INFO 10096 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 400 ms. Found 4 JPA repository interfaces.
2025-12-20T02:25:42.106+07:00  INFO 10096 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:25:42.107+07:00  INFO 10096 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-20T02:25:42.127+07:00  INFO 10096 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.BlacklistedTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:25:42.129+07:00  INFO 10096 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.ClinicRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:25:42.129+07:00  INFO 10096 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:25:42.132+07:00  INFO 10096 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:25:42.132+07:00  INFO 10096 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-12-20T02:25:43.274+07:00  INFO 10096 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2025-12-20T02:25:43.294+07:00  INFO 10096 --- [petties] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-20T02:25:43.295+07:00  INFO 10096 --- [petties] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-20T02:25:43.364+07:00  INFO 10096 --- [petties] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 2940 ms
2025-12-20T02:25:43.655+07:00  INFO 10096 --- [petties] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-20T02:25:43.702+07:00  INFO 10096 --- [petties] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-20T02:25:44.128+07:00  INFO 10096 --- [petties] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-20T02:25:44.157+07:00  INFO 10096 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-20T02:25:44.319+07:00  INFO 10096 --- [petties] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e18876d
2025-12-20T02:25:44.322+07:00  INFO 10096 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-20T02:25:44.356+07:00  WARN 10096 --- [petties] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-20T02:25:44.382+07:00  INFO 10096 --- [petties] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5433/petties_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: petties_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-20T02:25:45.776+07:00  INFO 10096 --- [petties] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-20T02:25:45.781+07:00  INFO 10096 --- [petties] [main] org.hibernate.orm.jdbc.batch             : HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2025-12-20T02:25:45.995+07:00  INFO 10096 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:25:46.082+07:00  INFO 10096 --- [petties] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-20T02:25:46.966+07:00 DEBUG 10096 --- [petties] [main] c.p.p.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-20T02:25:46.968+07:00 DEBUG 10096 --- [petties] [main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-20T02:25:46.969+07:00 DEBUG 10096 --- [petties] [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-20T02:25:47.073+07:00  INFO 10096 --- [petties] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-20T02:25:47.074+07:00  WARN 10096 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-20T02:25:47.175+07:00  INFO 10096 --- [petties] [main] c.p.petties.service.GoogleAuthService    : GoogleAuthService initialized with client ID: YOUR_WEB_CLIENT_ID.a...
2025-12-20T02:25:48.676+07:00  WARN 10096 --- [petties] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-20T02:25:49.170+07:00 DEBUG 10096 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-20T02:25:49.422+07:00 DEBUG 10096 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 35 mappings in 'requestMappingHandlerMapping'
2025-12-20T02:25:49.475+07:00 DEBUG 10096 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-20T02:25:49.604+07:00 DEBUG 10096 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-20T02:25:49.700+07:00 DEBUG 10096 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-20T02:25:50.380+07:00  INFO 10096 --- [petties] [main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-12-20T02:25:50.428+07:00  INFO 10096 --- [petties] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-20T02:25:50.569+07:00  INFO 10096 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/api'
2025-12-20T02:25:50.580+07:00  INFO 10096 --- [petties] [main] com.petties.petties.PettiesApplication   : Started PettiesApplication in 10.73 seconds (process running for 11.165)
2025-12-20T02:25:50.655+07:00  INFO 10096 --- [petties] [main] c.p.petties.config.DataInitializer       : 🚀 Starting data initialization...
2025-12-20T02:25:50.785+07:00 DEBUG 10096 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.avatar,
        u1_0.avatar_public_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=?
2025-12-20T02:25:50.826+07:00 DEBUG 10096 --- [petties] [main] c.p.petties.config.DataInitializer       : User admin already exists, skipping...
2025-12-20T02:25:50.829+07:00 DEBUG 10096 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.avatar,
        u1_0.avatar_public_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=?
2025-12-20T02:25:50.835+07:00 DEBUG 10096 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.avatar,
        u1_0.avatar_public_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=?
2025-12-20T02:25:50.936+07:00 DEBUG 10096 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.avatar,
        u1_0.avatar_public_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.user_id=? 
        and (
            u1_0.deleted_at IS NULL
        )
2025-12-20T02:25:50.944+07:00 DEBUG 10096 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id,
        u1_0.avatar,
        u1_0.avatar_public_id,
        u1_0.created_at,
        u1_0.deleted_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.user_id=? 
        and (
            u1_0.deleted_at IS NULL
        )
2025-12-20T02:25:50.954+07:00 ERROR 10096 --- [petties] [main] o.s.t.i.TransactionInterceptor           : Application exception overridden by rollback exception

jakarta.persistence.OptimisticLockException: Row was already updated or deleted by another transaction for entity [com.petties.petties.model.User with id '35d97491-e5a9-4289-9cb7-bede7bdc39ca']
	at org.hibernate.internal.ExceptionConverterImpl.wrapStaleStateException(ExceptionConverterImpl.java:201) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:80) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:161) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:808) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:783) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317) ~[spring-orm-7.0.1.jar:7.0.1]
	at jdk.proxy2/jdk.proxy2.$Proxy180.merge(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-4.0.0.jar:4.0.0]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:708) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-4.0.0.jar:4.0.0]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166) ~[spring-data-jpa-4.0.0.jar:4.0.0]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222) ~[spring-aop-7.0.1.jar:7.0.1]
	at jdk.proxy2/jdk.proxy2.$Proxy182.save(Unknown Source) ~[na:na]
	at com.petties.petties.config.DataInitializer.createUserIfNotExists(DataInitializer.java:147) ~[classes/:na]
	at com.petties.petties.config.DataInitializer.run(DataInitializer.java:42) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-4.0.0.jar:4.0.0]
	at com.petties.petties.PettiesApplication.main(PettiesApplication.java:14) ~[classes/:na]
Caused by: org.hibernate.StaleObjectStateException: Row was already updated or deleted by another transaction for entity [com.petties.petties.model.User with id '35d97491-e5a9-4289-9cb7-bede7bdc39ca']
	at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:441) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.event.internal.DefaultMergeEventListener.merge(DefaultMergeEventListener.java:205) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.event.internal.DefaultMergeEventListener.doMerge(DefaultMergeEventListener.java:149) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:133) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:89) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:140) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:797) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	... 52 common frames omitted

2025-12-20T02:25:50.965+07:00  INFO 10096 --- [petties] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-20T02:25:50.986+07:00 ERROR 10096 --- [petties] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.orm.jpa.JpaSystemException: Unable to rollback against JDBC Connection
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:223) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.JpaTransactionManager.doRollback(JpaTransactionManager.java:584) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:896) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:865) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:702) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:374) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166) ~[spring-data-jpa-4.0.0.jar:4.0.0]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222) ~[spring-aop-7.0.1.jar:7.0.1]
	at jdk.proxy2/jdk.proxy2.$Proxy182.save(Unknown Source) ~[na:na]
	at com.petties.petties.config.DataInitializer.createUserIfNotExists(DataInitializer.java:147) ~[classes/:na]
	at com.petties.petties.config.DataInitializer.run(DataInitializer.java:42) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-4.0.0.jar:4.0.0]
	at com.petties.petties.PettiesApplication.main(PettiesApplication.java:14) ~[classes/:na]
Caused by: org.hibernate.TransactionException: Unable to rollback against JDBC Connection
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.rollback(AbstractLogicalConnectionImplementor.java:137) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.rollback(JdbcResourceLocalTransactionCoordinatorImpl.java:283) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.rollback(TransactionImpl.java:124) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doRollback(JpaTransactionManager.java:580) ~[spring-orm-7.0.1.jar:7.0.1]
	... 34 common frames omitted
Caused by: org.postgresql.util.PSQLException: Cannot rollback when autoCommit is enabled.
	at org.postgresql.jdbc.PgConnection.rollback(PgConnection.java:1025) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyConnection.rollback(ProxyConnection.java:386) ~[HikariCP-7.0.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyConnection.rollback(HikariProxyConnection.java) ~[HikariCP-7.0.2.jar:na]
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.rollback(AbstractLogicalConnectionImplementor.java:127) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	... 37 common frames omitted

2025-12-20T02:25:50.994+07:00  INFO 10096 --- [petties] [main] o.s.boot.tomcat.GracefulShutdown         : Commencing graceful shutdown. Waiting for active requests to complete
2025-12-20T02:25:51.002+07:00  INFO 10096 --- [petties] [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown         : Graceful shutdown complete
2025-12-20T02:25:51.022+07:00  INFO 10096 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:25:51.034+07:00  INFO 10096 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-20T02:25:51.039+07:00  INFO 10096 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-20T02:26:55.940+07:00  INFO 29840 --- [petties] [main] com.petties.petties.PettiesApplication   : Starting PettiesApplication using Java 21.0.9 with PID 29840 (G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes started by bearx in G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-20T02:26:55.944+07:00 DEBUG 29840 --- [petties] [main] com.petties.petties.PettiesApplication   : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-20T02:26:55.946+07:00  INFO 29840 --- [petties] [main] com.petties.petties.PettiesApplication   : The following 1 profile is active: "dev"
2025-12-20T02:26:57.876+07:00  INFO 29840 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:26:57.879+07:00  INFO 29840 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-20T02:26:58.057+07:00  INFO 29840 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 166 ms. Found 4 JPA repository interfaces.
2025-12-20T02:26:58.107+07:00  INFO 29840 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:26:58.109+07:00  INFO 29840 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-20T02:26:58.129+07:00  INFO 29840 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.BlacklistedTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:26:58.173+07:00  INFO 29840 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.ClinicRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:26:58.174+07:00  INFO 29840 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:26:58.175+07:00  INFO 29840 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:26:58.177+07:00  INFO 29840 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58 ms. Found 0 Redis repository interfaces.
2025-12-20T02:26:59.040+07:00  INFO 29840 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2025-12-20T02:26:59.051+07:00  INFO 29840 --- [petties] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-20T02:26:59.052+07:00  INFO 29840 --- [petties] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-20T02:26:59.109+07:00  INFO 29840 --- [petties] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 3077 ms
2025-12-20T02:26:59.326+07:00  INFO 29840 --- [petties] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-20T02:26:59.364+07:00  INFO 29840 --- [petties] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-20T02:26:59.721+07:00  INFO 29840 --- [petties] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-20T02:26:59.746+07:00  INFO 29840 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-20T02:26:59.898+07:00  INFO 29840 --- [petties] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2979c6ef
2025-12-20T02:26:59.901+07:00  INFO 29840 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-20T02:26:59.927+07:00  WARN 29840 --- [petties] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-20T02:26:59.949+07:00  INFO 29840 --- [petties] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5433/petties_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: petties_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-20T02:27:00.957+07:00  INFO 29840 --- [petties] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-20T02:27:00.960+07:00  INFO 29840 --- [petties] [main] org.hibernate.orm.jdbc.batch             : HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2025-12-20T02:27:01.126+07:00  INFO 29840 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:27:01.185+07:00  INFO 29840 --- [petties] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-20T02:27:01.782+07:00 DEBUG 29840 --- [petties] [main] c.p.p.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-20T02:27:01.784+07:00 DEBUG 29840 --- [petties] [main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-20T02:27:01.784+07:00 DEBUG 29840 --- [petties] [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-20T02:27:01.856+07:00  INFO 29840 --- [petties] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-20T02:27:01.857+07:00  WARN 29840 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-20T02:27:01.914+07:00  INFO 29840 --- [petties] [main] c.p.petties.service.GoogleAuthService    : GoogleAuthService initialized with client ID: YOUR_WEB_CLIENT_ID.a...
2025-12-20T02:27:02.713+07:00  WARN 29840 --- [petties] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-20T02:27:02.922+07:00 DEBUG 29840 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-20T02:27:03.061+07:00 DEBUG 29840 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 35 mappings in 'requestMappingHandlerMapping'
2025-12-20T02:27:03.094+07:00 DEBUG 29840 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-20T02:27:03.122+07:00 DEBUG 29840 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-20T02:27:03.181+07:00 DEBUG 29840 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-20T02:27:03.554+07:00  INFO 29840 --- [petties] [main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-12-20T02:27:03.580+07:00  INFO 29840 --- [petties] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-20T02:27:03.661+07:00  INFO 29840 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/api'
2025-12-20T02:27:03.670+07:00  INFO 29840 --- [petties] [main] com.petties.petties.PettiesApplication   : Started PettiesApplication in 8.494 seconds (process running for 8.986)
2025-12-20T02:27:03.730+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : 🚀 Starting data initialization...
2025-12-20T02:27:03.791+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:03.806+07:00 DEBUG 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : User admin already exists, skipping...
2025-12-20T02:27:03.807+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:03.812+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:03.919+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:03.928+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: owner1 (CLINIC_OWNER)
2025-12-20T02:27:03.928+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:03.931+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:03.997+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:04.002+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: owner2 (CLINIC_OWNER)
2025-12-20T02:27:04.003+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.006+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.069+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:04.075+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: vet1 (VET)
2025-12-20T02:27:04.076+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.079+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.151+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:04.156+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: vet2 (VET)
2025-12-20T02:27:04.157+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.160+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.225+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:04.230+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: petowner1 (PET_OWNER)
2025-12-20T02:27:04.232+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.235+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.305+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:04.310+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: petowner2 (PET_OWNER)
2025-12-20T02:27:04.312+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.314+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.email=? 
    fetch
        first ? rows only
2025-12-20T02:27:04.379+07:00 DEBUG 29840 --- [petties] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (avatar, avatar_public_id, created_at, deleted_at, email, full_name, password, phone, role, updated_at, username, user_type, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'User', ?)
2025-12-20T02:27:04.383+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Created user: manager1 (CLINIC_MANAGER)
2025-12-20T02:27:04.383+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : ✅ Data initialization completed!
2025-12-20T02:27:04.383+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       : 📝 Sample users created:
2025-12-20T02:27:04.383+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - admin / admin123 (ADMIN)
2025-12-20T02:27:04.384+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - owner1 / owner123 (CLINIC_OWNER)
2025-12-20T02:27:04.384+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - owner2 / owner123 (CLINIC_OWNER)
2025-12-20T02:27:04.384+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - vet1 / vet123 (VET)
2025-12-20T02:27:04.384+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - vet2 / vet123 (VET)
2025-12-20T02:27:04.385+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - petowner1 / petowner123 (PET_OWNER)
2025-12-20T02:27:04.385+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - petowner2 / petowner123 (PET_OWNER)
2025-12-20T02:27:04.385+07:00  INFO 29840 --- [petties] [main] c.p.petties.config.DataInitializer       :    - manager1 / manager123 (CLINIC_MANAGER)
2025-12-20T02:27:04.393+07:00  INFO 29840 --- [petties] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-20T02:27:04.404+07:00 ERROR 29840 --- [petties] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.orm.jpa.JpaSystemException: Unable to commit against JDBC Connection
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:223) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:557) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.1.jar:7.0.1]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719) ~[spring-aop-7.0.1.jar:7.0.1]
	at com.petties.petties.config.DataInitializer$$SpringCGLIB$$0.run(<generated>) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-4.0.0.jar:4.0.0]
	at com.petties.petties.PettiesApplication.main(PettiesApplication.java:14) ~[classes/:na]
Caused by: org.hibernate.TransactionException: Unable to commit against JDBC Connection
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:98) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commitNoRollbackOnly(JdbcResourceLocalTransactionCoordinatorImpl.java:250) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:243) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:90) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:553) ~[spring-orm-7.0.1.jar:7.0.1]
	... 28 common frames omitted
Caused by: org.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.
	at org.postgresql.jdbc.PgConnection.commit(PgConnection.java:1004) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyConnection.commit(ProxyConnection.java:378) ~[HikariCP-7.0.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyConnection.commit(HikariProxyConnection.java) ~[HikariCP-7.0.2.jar:na]
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:88) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	... 32 common frames omitted

2025-12-20T02:27:04.412+07:00  INFO 29840 --- [petties] [main] o.s.boot.tomcat.GracefulShutdown         : Commencing graceful shutdown. Waiting for active requests to complete
2025-12-20T02:27:04.419+07:00  INFO 29840 --- [petties] [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown         : Graceful shutdown complete
2025-12-20T02:27:04.433+07:00  INFO 29840 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:27:04.436+07:00  INFO 29840 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-20T02:27:04.438+07:00  INFO 29840 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-20T02:30:58.770+07:00  INFO 4236 --- [petties] [main] com.petties.petties.PettiesApplication   : Starting PettiesApplication using Java 21.0.9 with PID 4236 (G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes started by bearx in G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-20T02:30:58.774+07:00 DEBUG 4236 --- [petties] [main] com.petties.petties.PettiesApplication   : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-20T02:30:58.775+07:00  INFO 4236 --- [petties] [main] com.petties.petties.PettiesApplication   : The following 1 profile is active: "dev"
2025-12-20T02:31:00.279+07:00  INFO 4236 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:31:00.282+07:00  INFO 4236 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-20T02:31:00.600+07:00  INFO 4236 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 301 ms. Found 4 JPA repository interfaces.
2025-12-20T02:31:00.649+07:00  INFO 4236 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:31:00.651+07:00  INFO 4236 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-20T02:31:00.673+07:00  INFO 4236 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.BlacklistedTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:31:00.677+07:00  INFO 4236 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.ClinicRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:31:00.677+07:00  INFO 4236 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:31:00.680+07:00  INFO 4236 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:31:00.680+07:00  INFO 4236 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2025-12-20T02:31:01.516+07:00  INFO 4236 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2025-12-20T02:31:01.527+07:00  INFO 4236 --- [petties] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-20T02:31:01.528+07:00  INFO 4236 --- [petties] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-20T02:31:01.588+07:00  INFO 4236 --- [petties] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 2759 ms
2025-12-20T02:31:01.805+07:00  INFO 4236 --- [petties] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-20T02:31:01.843+07:00  INFO 4236 --- [petties] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-20T02:31:02.247+07:00  INFO 4236 --- [petties] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-20T02:31:02.293+07:00  INFO 4236 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-20T02:31:02.475+07:00  INFO 4236 --- [petties] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2979c6ef
2025-12-20T02:31:02.477+07:00  INFO 4236 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-20T02:31:02.507+07:00  WARN 4236 --- [petties] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-20T02:31:02.529+07:00  INFO 4236 --- [petties] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5433/petties_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: petties_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-20T02:31:03.661+07:00  INFO 4236 --- [petties] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-20T02:31:03.664+07:00  INFO 4236 --- [petties] [main] org.hibernate.orm.jdbc.batch             : HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2025-12-20T02:31:03.847+07:00  INFO 4236 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:31:03.924+07:00  INFO 4236 --- [petties] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-20T02:31:04.696+07:00 DEBUG 4236 --- [petties] [main] c.p.p.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-20T02:31:04.698+07:00 DEBUG 4236 --- [petties] [main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-20T02:31:04.698+07:00 DEBUG 4236 --- [petties] [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-20T02:31:04.793+07:00  INFO 4236 --- [petties] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-20T02:31:04.794+07:00  WARN 4236 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-20T02:31:04.863+07:00  INFO 4236 --- [petties] [main] c.p.petties.service.GoogleAuthService    : GoogleAuthService initialized with client ID: YOUR_WEB_CLIENT_ID.a...
2025-12-20T02:31:06.261+07:00  WARN 4236 --- [petties] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-20T02:31:06.636+07:00 DEBUG 4236 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-20T02:31:06.823+07:00 DEBUG 4236 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 35 mappings in 'requestMappingHandlerMapping'
2025-12-20T02:31:06.896+07:00 DEBUG 4236 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-20T02:31:06.953+07:00 DEBUG 4236 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-20T02:31:07.030+07:00 DEBUG 4236 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-20T02:31:07.542+07:00  INFO 4236 --- [petties] [main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-12-20T02:31:07.572+07:00  INFO 4236 --- [petties] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-20T02:31:07.676+07:00  INFO 4236 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/api'
2025-12-20T02:31:07.685+07:00  INFO 4236 --- [petties] [main] com.petties.petties.PettiesApplication   : Started PettiesApplication in 9.405 seconds (process running for 9.874)
2025-12-20T02:31:07.754+07:00  INFO 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : 🚀 Starting data initialization...
2025-12-20T02:31:07.860+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.888+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User admin already exists, skipping...
2025-12-20T02:31:07.890+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.894+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User owner1 already exists, skipping...
2025-12-20T02:31:07.895+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.899+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User owner2 already exists, skipping...
2025-12-20T02:31:07.899+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.903+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User vet1 already exists, skipping...
2025-12-20T02:31:07.904+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.908+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User vet2 already exists, skipping...
2025-12-20T02:31:07.909+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.914+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User petowner1 already exists, skipping...
2025-12-20T02:31:07.915+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.918+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User petowner2 already exists, skipping...
2025-12-20T02:31:07.919+07:00 DEBUG 4236 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:31:07.922+07:00 DEBUG 4236 --- [petties] [main] c.p.petties.config.DataInitializer       : User manager1 already exists, skipping...
2025-12-20T02:31:07.939+07:00  INFO 4236 --- [petties] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-20T02:31:07.965+07:00 ERROR 4236 --- [petties] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.orm.jpa.JpaSystemException: Unable to commit against JDBC Connection
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:223) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:557) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:149) ~[spring-tx-7.0.1.jar:7.0.1]
	at com.petties.petties.config.DataInitializer.run(DataInitializer.java:38) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-4.0.0.jar:4.0.0]
	at com.petties.petties.PettiesApplication.main(PettiesApplication.java:14) ~[classes/:na]
Caused by: org.hibernate.TransactionException: Unable to commit against JDBC Connection
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:98) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commitNoRollbackOnly(JdbcResourceLocalTransactionCoordinatorImpl.java:250) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:243) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:90) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:553) ~[spring-orm-7.0.1.jar:7.0.1]
	... 24 common frames omitted
Caused by: org.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.
	at org.postgresql.jdbc.PgConnection.commit(PgConnection.java:1004) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyConnection.commit(ProxyConnection.java:378) ~[HikariCP-7.0.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyConnection.commit(HikariProxyConnection.java) ~[HikariCP-7.0.2.jar:na]
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:88) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	... 28 common frames omitted

2025-12-20T02:31:07.978+07:00  INFO 4236 --- [petties] [main] o.s.boot.tomcat.GracefulShutdown         : Commencing graceful shutdown. Waiting for active requests to complete
2025-12-20T02:31:07.996+07:00  INFO 4236 --- [petties] [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown         : Graceful shutdown complete
2025-12-20T02:31:08.022+07:00  INFO 4236 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:31:08.026+07:00  INFO 4236 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-20T02:31:08.031+07:00  INFO 4236 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-20T02:43:31.648+07:00  INFO 29080 --- [petties] [main] com.petties.petties.PettiesApplication   : Starting PettiesApplication using Java 21.0.9 with PID 29080 (G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties\target\classes started by bearx in G:\Petties-Veterinary-Appointment-Booking-Platform\backend-spring\petties)
2025-12-20T02:43:31.650+07:00 DEBUG 29080 --- [petties] [main] com.petties.petties.PettiesApplication   : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-20T02:43:31.651+07:00  INFO 29080 --- [petties] [main] com.petties.petties.PettiesApplication   : The following 1 profile is active: "dev"
2025-12-20T02:43:32.560+07:00  INFO 29080 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:43:32.562+07:00  INFO 29080 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-20T02:43:32.700+07:00  INFO 29080 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 129 ms. Found 4 JPA repository interfaces.
2025-12-20T02:43:32.736+07:00  INFO 29080 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-20T02:43:32.738+07:00  INFO 29080 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-20T02:43:32.752+07:00  INFO 29080 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.BlacklistedTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:43:32.754+07:00  INFO 29080 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.ClinicRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:43:32.754+07:00  INFO 29080 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:43:32.757+07:00  INFO 29080 --- [petties] [main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.petties.petties.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-20T02:43:32.758+07:00  INFO 29080 --- [petties] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-12-20T02:43:33.440+07:00  INFO 29080 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2025-12-20T02:43:33.450+07:00  INFO 29080 --- [petties] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-20T02:43:33.451+07:00  INFO 29080 --- [petties] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-20T02:43:33.508+07:00  INFO 29080 --- [petties] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 1805 ms
2025-12-20T02:43:33.726+07:00  INFO 29080 --- [petties] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-20T02:43:33.766+07:00  INFO 29080 --- [petties] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-20T02:43:34.137+07:00  INFO 29080 --- [petties] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-20T02:43:34.165+07:00  INFO 29080 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-20T02:43:34.310+07:00  INFO 29080 --- [petties] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2979c6ef
2025-12-20T02:43:34.312+07:00  INFO 29080 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-20T02:43:34.345+07:00  WARN 29080 --- [petties] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-20T02:43:34.369+07:00  INFO 29080 --- [petties] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5433/petties_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: petties_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-20T02:43:35.412+07:00  INFO 29080 --- [petties] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-20T02:43:35.415+07:00  INFO 29080 --- [petties] [main] org.hibernate.orm.jdbc.batch             : HHH100501: Automatic JDBC statement batching enabled (maximum batch size 20)
2025-12-20T02:43:35.592+07:00  INFO 29080 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:43:35.655+07:00  INFO 29080 --- [petties] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-20T02:43:36.294+07:00 DEBUG 29080 --- [petties] [main] c.p.p.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-20T02:43:36.296+07:00 DEBUG 29080 --- [petties] [main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-20T02:43:36.296+07:00 DEBUG 29080 --- [petties] [main] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use
2025-12-20T02:43:36.391+07:00  INFO 29080 --- [petties] [main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-20T02:43:36.392+07:00  WARN 29080 --- [petties] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-20T02:43:36.450+07:00  INFO 29080 --- [petties] [main] c.p.petties.service.GoogleAuthService    : GoogleAuthService initialized with client ID: YOUR_WEB_CLIENT_ID.a...
2025-12-20T02:43:37.263+07:00  WARN 29080 --- [petties] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-20T02:43:37.477+07:00 DEBUG 29080 --- [petties] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-20T02:43:37.624+07:00 DEBUG 29080 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 35 mappings in 'requestMappingHandlerMapping'
2025-12-20T02:43:37.658+07:00 DEBUG 29080 --- [petties] [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-20T02:43:37.687+07:00 DEBUG 29080 --- [petties] [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-20T02:43:37.738+07:00 DEBUG 29080 --- [petties] [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-20T02:43:38.121+07:00  INFO 29080 --- [petties] [main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2025-12-20T02:43:38.145+07:00  INFO 29080 --- [petties] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-20T02:43:38.230+07:00  INFO 29080 --- [petties] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/api'
2025-12-20T02:43:38.238+07:00  INFO 29080 --- [petties] [main] com.petties.petties.PettiesApplication   : Started PettiesApplication in 7.016 seconds (process running for 7.411)
2025-12-20T02:43:38.293+07:00  INFO 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : 🚀 Starting data initialization...
2025-12-20T02:43:38.358+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.374+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User admin already exists, skipping...
2025-12-20T02:43:38.375+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.378+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User owner1 already exists, skipping...
2025-12-20T02:43:38.379+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.381+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User owner2 already exists, skipping...
2025-12-20T02:43:38.382+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.384+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User vet1 already exists, skipping...
2025-12-20T02:43:38.385+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.388+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User vet2 already exists, skipping...
2025-12-20T02:43:38.389+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.391+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User petowner1 already exists, skipping...
2025-12-20T02:43:38.392+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.393+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User petowner2 already exists, skipping...
2025-12-20T02:43:38.394+07:00 DEBUG 29080 --- [petties] [main] org.hibernate.SQL                        : 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        (
            u1_0.deleted_at IS NULL
        ) 
        and u1_0.username=? 
    fetch
        first ? rows only
2025-12-20T02:43:38.396+07:00 DEBUG 29080 --- [petties] [main] c.p.petties.config.DataInitializer       : User manager1 already exists, skipping...
2025-12-20T02:43:38.404+07:00  INFO 29080 --- [petties] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-20T02:43:38.417+07:00 ERROR 29080 --- [petties] [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.orm.jpa.JpaSystemException: Unable to commit against JDBC Connection
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:223) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:131) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:105) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:557) ~[spring-orm-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:794) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757) ~[spring-tx-7.0.1.jar:7.0.1]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:149) ~[spring-tx-7.0.1.jar:7.0.1]
	at com.petties.petties.config.DataInitializer.run(DataInitializer.java:34) ~[classes/:na]
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86) ~[spring-core-7.0.1.jar:7.0.1]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[na:na]
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[na:na]
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374) ~[spring-boot-4.0.0.jar:4.0.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-4.0.0.jar:4.0.0]
	at com.petties.petties.PettiesApplication.main(PettiesApplication.java:14) ~[classes/:na]
Caused by: org.hibernate.TransactionException: Unable to commit against JDBC Connection
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:98) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commitNoRollbackOnly(JdbcResourceLocalTransactionCoordinatorImpl.java:250) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:243) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:90) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:553) ~[spring-orm-7.0.1.jar:7.0.1]
	... 24 common frames omitted
Caused by: org.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.
	at org.postgresql.jdbc.PgConnection.commit(PgConnection.java:1004) ~[postgresql-42.7.8.jar:42.7.8]
	at com.zaxxer.hikari.pool.ProxyConnection.commit(ProxyConnection.java:378) ~[HikariCP-7.0.2.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyConnection.commit(HikariProxyConnection.java) ~[HikariCP-7.0.2.jar:na]
	at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.commit(AbstractLogicalConnectionImplementor.java:88) ~[hibernate-core-7.1.8.Final.jar:7.1.8.Final]
	... 28 common frames omitted

2025-12-20T02:43:38.430+07:00  INFO 29080 --- [petties] [main] o.s.boot.tomcat.GracefulShutdown         : Commencing graceful shutdown. Waiting for active requests to complete
2025-12-20T02:43:38.436+07:00  INFO 29080 --- [petties] [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown         : Graceful shutdown complete
2025-12-20T02:43:38.452+07:00  INFO 29080 --- [petties] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-20T02:43:38.454+07:00  INFO 29080 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-20T02:43:38.457+07:00  INFO 29080 --- [petties] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
