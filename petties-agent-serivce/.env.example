# ============================================
# PETTIES AGENT SERVICE - Environment Variables Template
# Architecture: Single Agent + ReAct + OpenRouter + Cohere + Qdrant Cloud
# Version: v1.0.0
# ============================================
#
# SECURITY NOTES:
# 1. NEVER commit .env files with real credentials to Git
# 2. Copy this file to .env and fill in your actual values
# 3. Use different .env files for each environment (dev/test/prod)
# 4. Keep DATABASE_URL and API keys in secrets manager for production
#
# ============================================

# ==================== Application Settings ====================
APP_NAME=Petties Agent Service
APP_ENV=development
APP_VERSION=1.0.0
APP_DEBUG=true
ENVIRONMENT=development

# ==================== Server Configuration ====================
HOST=0.0.0.0
PORT=8000
WORKERS=2

# CORS Origins (comma-separated)
# Development: localhost:5173 (React Web), localhost:3000
# Test: https://test.petties.world
# Production: https://www.petties.world
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ==================== Database - PostgreSQL (Neon) ====================
# CRITICAL: Use DATABASE_URL for Neon PostgreSQL connection
# Format: postgresql+asyncpg://USER:PASSWORD@HOST:PORT/DATABASE
#
# Development (Local Docker):
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/petties_agent_db
#
# Test Environment (Neon Test Branch):
# DATABASE_URL=postgresql+asyncpg://USER:PASSWORD@NEON_TEST_HOST/DATABASE
#
# Production (Neon Main):
# DATABASE_URL=postgresql+asyncpg://USER:PASSWORD@NEON_PROD_HOST/DATABASE
#
DATABASE_URL=

# Fallback: Individual DB variables (only if DATABASE_URL not set)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=petties_agent_db
DB_USERNAME=postgres
DB_PASSWORD=postgres

# ==================== Vector Database - Qdrant Cloud ====================
# Get credentials from: https://cloud.qdrant.io/
# CRITICAL: Qdrant Cloud is REQUIRED for RAG functionality
QDRANT_URL=https://your-cluster-id.qdrant.io
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=petties_knowledge_base

# ==================== AI/LLM Configuration ====================
# LLM_PROVIDER: openrouter (recommended), ollama (backup)
LLM_PROVIDER=openrouter

# ===== OpenRouter (RECOMMENDED - Cloud API) =====
# Get API key from: https://openrouter.ai/keys
# Free tier models: google/gemini-2.0-flash-exp:free
# Paid models: meta-llama/llama-3.3-70b-instruct, anthropic/claude-3.5-sonnet
OPENROUTER_API_KEY=
OPENROUTER_MODEL=google/gemini-2.0-flash-exp:free
OPENROUTER_FALLBACK_MODEL=meta-llama/llama-3.3-70b-instruct

# ===== Cohere Embeddings (RECOMMENDED) =====
# Get API key from: https://dashboard.cohere.com/api-keys
# Model: embed-multilingual-v3.0 (Vietnamese optimized, 1024 dims)
# CRITICAL: Required for RAG multilingual support
COHERE_API_KEY=
COHERE_EMBEDDING_MODEL=embed-multilingual-v3.0

# ===== OpenAI (Backup for embeddings) =====
OPENAI_API_KEY=
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4-turbo

# ===== Ollama (Backup - Self-hosted or Cloud) =====
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_API_KEY=
OLLAMA_MODEL=llama3.2
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# ==================== Agent Configuration (Single Agent + ReAct) ====================
# Temperature: 0.0 = deterministic, 1.0 = creative
AGENT_TEMPERATURE=0.7
AGENT_MAX_TOKENS=2000
AGENT_TOP_P=0.9
REACT_MAX_ITERATIONS=10

# Legacy (for backward compatibility)
MAX_TOKENS=2000

# ==================== RAG Configuration ====================
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
TOP_K_RETRIEVAL=5
SIMILARITY_THRESHOLD=0.7

# ==================== Web Search Configuration ====================
DUCKDUCKGO_MAX_RESULTS=5
YOUTUBE_API_KEY=

# ==================== MCP Integration ====================
# Spring Boot backend URL for API-based tools (Phase 2)
# Development: http://localhost:8080/api/v1
# Test: https://api-test.petties.world/api/v1
# Production: https://api.petties.world/api/v1
SPRING_BACKEND_URL=http://localhost:8080/api/v1
MCP_TIMEOUT=30

# ==================== Authentication & Security ====================
# CRITICAL: Generate a secure random key for production
# Command: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==================== File Upload Configuration ====================
UPLOAD_DIR=./storage/documents
MAX_UPLOAD_SIZE=10485760
ALLOWED_EXTENSIONS=.pdf,.docx,.txt,.md

# ==================== Logging & Monitoring ====================
LOG_LEVEL=INFO
LOG_FILE=./logs/agent_service.log
ENABLE_PROMETHEUS=true

# ==================== Redis (Optional - for caching) ====================
# Development: localhost
# Test/Production: Redis Cloud
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==================== Testing & Development ====================
TEST_MODE=false
MOCK_LLM_RESPONSES=false

# ============================================
# ENVIRONMENT-SPECIFIC EXAMPLES
# ============================================

# --- DEVELOPMENT (localhost) ---
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/petties_agent_db
# CORS_ORIGINS=http://localhost:3000,http://localhost:5173
# SPRING_BACKEND_URL=http://localhost:8080/api/v1
# APP_DEBUG=true

# --- TEST (test.petties.world) ---
# DATABASE_URL=postgresql+asyncpg://USER:PASSWORD@NEON_TEST_HOST/DATABASE
# CORS_ORIGINS=https://test.petties.world
# SPRING_BACKEND_URL=https://api-test.petties.world/api/v1
# APP_DEBUG=true

# --- PRODUCTION (www.petties.world) ---
# DATABASE_URL=postgresql+asyncpg://USER:PASSWORD@NEON_PROD_HOST/DATABASE
# CORS_ORIGINS=https://www.petties.world
# SPRING_BACKEND_URL=https://api.petties.world/api/v1
# APP_DEBUG=false
