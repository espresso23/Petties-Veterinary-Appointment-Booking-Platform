# PETTIES V0.0.1 - FEATURES & HAPPY FLOWS

---

## ğŸ¯ 5 ROLES & CORE FEATURES

### ğŸ• **ROLE 1: PET_OWNER (Customer Ä‘á»“ng thá»i lÃ  chá»§ thÃº cÆ°ng) MOBILE ONLY**
1. ÄÄƒng kÃ½ / ÄÄƒng nháº­p âœ…
2. Quáº£n lÃ½ há»“ sÆ¡ cÃ¡ nhÃ¢n âœ…
3. Táº¡o/sá»­a há»“ sÆ¡ thÃº cÆ°ng
4. TÃ¬m kiáº¿m phÃ²ng khÃ¡m
5. TÃ¬m kiáº¿m bÃ¡c sÄ©
6. Äáº·t lá»‹ch khÃ¡m táº¡i phÃ²ng (Clinic Visit)
7. Äáº·t lá»‹ch khÃ¡m táº¡i nhÃ  (Home Visit)
8. Xem lá»‹ch booking cá»§a tÃ´i
9. Xem chi tiáº¿t booking
10. Há»§y booking
11. Thanh toÃ¡n online.
12. Xem há»“ sÆ¡ y táº¿ thÃº cÆ°ng (EMR)
13. Xem sá»• tiÃªm chá»§ng
14. ÄÃ¡nh giÃ¡ & review bÃ¡c sÄ©
15. Chat vá»›i AI Chatbot (Pet Care Assistant)
16. SOS - Cáº¥p cá»©u kháº©n cáº¥p
17. Video Consultation (TÆ° váº¥n video tá»« xa)
18. Xem Ä‘Æ¡n thuá»‘c trong há»“ sÆ¡ bá»‡nh Ã¡n (EMR)
19. Nháº­n thÃ´ng bÃ¡o & nháº¯c nhá»Ÿ (Push/Email/SMS)
20. LÆ°u áº£nh, giá»‘ng, Ä‘á»™ tuá»•i, Ä‘áº·c Ä‘iá»ƒm thÃº cÆ°ng
21. **[Home Visit] Xem báº£n Ä‘á»“ realtime vá»‹ trÃ­ bÃ¡c sÄ©**
22. **[Home Visit] Tracking Ä‘Æ°á»ng di chuyá»ƒn cá»§a bÃ¡c sÄ©** (giá»‘ng tracking tÃ i xáº¿)
23. **[Home Visit] Nháº­n thÃ´ng bÃ¡o khi bÃ¡c sÄ© sáº¯p Ä‘áº¿n / Ä‘Ã£ Ä‘áº¿n nÆ¡i**

---

### ğŸ‘¨â€âš•ï¸ **ROLE 2: VET (BÃ¡c sÄ© thÃº y) MOBILE + WEB**
1. ÄÄƒng nháº­p tá»« account Ä‘Æ°á»£c cáº¥p âœ…
2. Xem há»“ sÆ¡ cá»§a tÃ´i âœ…
3. Xem lá»‹ch lÃ m viá»‡c cá»§a tÃ´i
4. Xem booking Ä‘Æ°á»£c gÃ¡n
5. PhÃª duyá»‡t booking
6. Tá»« chá»‘i booking
7. Check-in bá»‡nh nhÃ¢n
8. Check-out bá»‡nh nhÃ¢n
9. Xem há»“ sÆ¡ y táº¿ thÃº cÆ°ng
10. Xem sá»• tiÃªm chá»§ng cá»§a pet
11. **Tra cá»©u bá»‡nh nhÃ¢n cÅ©** (Patient Lookup): TÃ¬m kiáº¿m vÃ  xem há»“ sÆ¡ bá»‡nh nhÃ¢n cÅ© cá»§a phÃ²ng khÃ¡m 
12. Ghi chÃº há»“ sÆ¡ bá»‡nh Ã¡n (táº¡o EMR) - **[Báº¯t buá»™c gáº¯n vá»›i Booking]**
13. Cáº­p nháº­t sá»• tiÃªm chá»§ng - **[Báº¯t buá»™c gáº¯n vá»›i Booking]**
14. Video Consultation vá»›i pet owner(optionally)
15. Ghi Ä‘Æ¡n thuá»‘c vÃ o há»“ sÆ¡ bá»‡nh Ã¡n (EMR)
16. **[Home Visit] Báº¯t Ä‘áº§u di chuyá»ƒn (Start Travel)** â†’ Chuyá»ƒn booking sang ON_THE_WAY
17. **[Home Visit] Tá»± Ä‘á»™ng cáº­p nháº­t vá»‹ trÃ­ GPS realtime** khi Ä‘ang di chuyá»ƒn
18. **[Home Visit] ThÃ´ng bÃ¡o Ä‘áº¿n nÆ¡i** â†’ Pet Owner Ä‘Æ°á»£c notify

---

### ğŸ‘¨â€ğŸ’¼ **ROLE 3: CLINIC_MANAGER (Quáº£n lÃ½ phÃ²ng khÃ¡m) WEB-ONLY**
1. ÄÄƒng nháº­p âœ…
2. Xem danh sÃ¡ch bÃ¡c sÄ© âœ… (BE)
3. ThÃªm bÃ¡c sÄ© thá»§ cÃ´ng âœ… (BE)
4. XÃ³a/bá» liÃªn káº¿t bÃ¡c sÄ© âœ… (BE)
5. Import lá»‹ch bÃ¡c sÄ© tá»« Excel
6. Import lá»‹ch bÃ¡c sÄ© thá»§ cÃ´ng
7. Xem booking má»›i
8. GÃ¡n bÃ¡c sÄ© cho booking
9. GÃ¡n láº¡i booking (náº¿u bÃ¡c sÄ© tá»« chá»‘i)
10. Chat vá»›i pet owner tÆ° váº¥n
11. GÃ¡n dá»‹ch vá»¥ náº¿u user chÆ°a chá»n Ä‘Æ°á»£c
12. Quáº£n lÃ½ há»§y & hoÃ n tiá»n
13. Xem dashboard hÃ´m nay
14. Quáº£n lÃ½ ca lÃ m viá»‡c nhÃ¢n viÃªn
15. **Quáº£n lÃ½ Há»“ sÆ¡ Bá»‡nh nhÃ¢n (Patient Management)**:
    - Xem danh sÃ¡ch bá»‡nh nhÃ¢n tá»«ng khÃ¡m táº¡i phÃ²ng khÃ¡m
    - Xem chi tiáº¿t Lá»‹ch sá»­ EMR vÃ  Sá»• tiÃªm chá»§ng cá»§a bá»‡nh nhÃ¢n (Read-Only)

---

### ğŸ¥ **ROLE 4: CLINIC_OWNER (Chá»§ phÃ²ng khÃ¡m) WEB-ONLY**
1. ÄÄƒng nháº­p âœ…
2. Quáº£n lÃ½ thÃ´ng tin phÃ²ng khÃ¡m
3. **Quáº£n lÃ½ Danh má»¥c Dá»‹ch vá»¥ (Master Services):**
    - Táº¡o danh má»¥c dá»‹ch vá»¥ tiÃªu chuáº©n (TÃªn, Category, MÃ´ táº£, Icon, GiÃ¡ máº·c Ä‘á»‹nh).
    - Cáº¥u hÃ¬nh giÃ¡ sáºµn Ä‘á»ƒ gÃ¡n nhanh cho cÃ¡c phÃ²ng khÃ¡m.
4. **Quáº£n lÃ½ Dá»‹ch vá»¥ táº¡i PhÃ²ng khÃ¡m (Clinic Services):**
    - **Thá»«a hÆ°á»Ÿng (Inherit):** Ãp dá»¥ng tá»« Master Services vá»›i giÃ¡ Ä‘Ã£ cáº¥u hÃ¬nh sáºµn (cÃ³ thá»ƒ ghi Ä‘Ã¨/override giÃ¡ riÃªng náº¿u muá»‘n).
    - **Tá»± táº¡o (Custom):** Táº¡o cÃ¡c dá»‹ch vá»¥ riÃªng biá»‡t chá»‰ cÃ³ táº¡i phÃ²ng khÃ¡m Ä‘Ã³.
    - Cáº¥u hÃ¬nh giÃ¡ chi tiáº¿t (Base price, Price per KM) vÃ  tráº¡ng thÃ¡i (Active/Inactive) cho tá»«ng dá»‹ch vá»¥ cá»¥ thá»ƒ.
5. Xem Dashboard PhÃ²ng KhÃ¡m
6. Theo dÃµi doanh thu âœ… (BE)


---

### ğŸ‘¨â€ğŸ’» **ROLE 5: ADMIN (Admin ná»n táº£ng) WEB ONLY**

#### **Platform Management (Quáº£n lÃ½ Ná»n táº£ng)**
1. ÄÄƒng nháº­p âœ…
2. Xem danh sÃ¡ch cÃ¡c clinic pending chá» duyá»‡t
3. PhÃª duyá»‡t clinic
4. Tá»« chá»‘i clinic
5. Xem thá»‘ng kÃª ná»n táº£ng, doanh thu
6. Thá»‘ng kÃª ngÆ°á»i dÃ¹ng vÃ  giao dá»‹ch

#### **AI Agent Configuration (Single Agent + ReAct)**
7. **Agent Configuration**
    - Báº­t/táº¯t Agent (Enable/Disable)
    - Chá»‰nh sá»­a System Prompt (vá»›i version control)
    - Äiá»u chá»‰nh Model Hyperparameters (Temperature, Max Tokens, Top-P)
    - Chá»n LLM Model (gemini-2.0-flash, llama-3.3-70b, claude-3.5-sonnet)

8. **Tool Management (@mcp.tool)**
    - Xem danh sÃ¡ch Tools Ä‘Æ°á»£c code sáºµn
    - Báº­t/táº¯t tá»«ng Tool riÃªng láº»
    - Xem Request/Response Schema cho má»—i tool

9. **Knowledge Base Management (RAG)**
    - Upload tÃ i liá»‡u (PDF, DOCX, TXT, MD)
    - Theo dÃµi tráº¡ng thÃ¡i indexing (chunking & vectorization)
    - Test RAG retrieval vá»›i query examples
    - Xem vector count vÃ  storage usage

10. **Agent Testing & Debugging**
    - Interactive Chat Simulator Ä‘á»ƒ test agent
    - Xem ReAct Flow (Thought â†’ Action â†’ Observation)
    - Xem Tool Calls vÃ  Results
    - Citation View (RAG sources)
    - Feedback system (Good/Bad responses)


14. **System & Security Configuration**
    - Dynamic API Key Management (OpenRouter, Cohere, Qdrant, Tavily)
    - LLM Provider Configuration (OpenRouter Cloud API)
    - Model Selection (gemini-2.0-flash, llama-3.3-70b, claude-3.5-sonnet)
    - Embedding Provider (Cohere embed-multilingual-v3)
    - Test connections cho cÃ¡c Cloud services
    - Save & Reload Context (khÃ´ng cáº§n restart server)

---

## ğŸ¤– AI & AGENT FEATURES (Petties AI Layer)

> **Architecture:** Single Agent + ReAct Pattern + MCP Tools
> 
> **Note:** MVP sá»­ dá»¥ng **Single Agent** (khÃ´ng pháº£i Multi-Agent) vá»›i nhiá»u skills/tools, cÃ³ thá»ƒ config bá»Ÿi Admin.

### AI Chatbot - Pet Care Assistant
- ğŸ¤– Chat vá»›i AI Chatbot thÃ´ng minh âœ…
- ğŸ¤– TÆ° váº¥n chÄƒm sÃ³c thÃº cÆ°ng âœ…
- ğŸ¤– Há»— trá»£ tÃ¬m kiáº¿m triá»‡u chá»©ng (Symptom Search) âœ…
- ğŸ¤– RAG Engine - Tra cá»©u kiáº¿n thá»©c y táº¿ thÃº y (LlamaIndex + Qdrant) âœ…
- ğŸ¤– Booking via Chat - Äáº·t lá»‹ch qua há»™i thoáº¡i âœ…
- ğŸ¤– Citation & Attribution - TrÃ­ch dáº«n nguá»“n
- ğŸ¤– Web Search - TÃ¬m kiáº¿m realtime ğŸ”„
- ğŸ¤– EMR Integration - Xem bá»‡nh Ã¡n Ä‘iá»‡n tá»­ âœ… (FE/BE)
- ğŸ¤– Vaccination Tracker - Xem sá»• tiÃªm chá»§ng âœ… (FE/BE)
- ğŸ¤– Home Visit Tracking âœ… (FE/BE)
- ğŸ¤– Dynamic Pricing âœ… (BE)
- ğŸ¤– Manual Scheduling âœ… (FE/BE)
- ğŸ¤– Admin AI Config Board âœ… (FE/BE)
- ğŸ¤– Knowledge Base Management âœ… (FE/BE)
- ğŸ¤– Tool Registry âœ… (FE/BE)
- ğŸ¤– Agent Playground âœ… (FE/BE)

### Single Agent Architecture (ReAct Pattern)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PETTIES AI AGENT (ReAct)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ§  LLM Core (OpenRouter / Cohere)                                  â”‚
â”‚  â”œâ”€â”€ ReAct Pattern: Thought â†’ Action â†’ Observation â†’ Loop          â”‚
â”‚  â”œâ”€â”€ Chain-of-Thought Reasoning                                     â”‚
â”‚  â””â”€â”€ System Prompt (Admin Configurable)                             â”‚
â”‚                                                                     â”‚
â”‚  ğŸ”§ Skills/Tools (FastMCP @mcp.tool)                                â”‚
â”‚  â”œâ”€â”€ @mcp.tool: pet_care_qa       â†’ RAG-based Q&A                  â”‚
â”‚  â”œâ”€â”€ @mcp.tool: symptom_search    â†’ Symptom â†’ Disease lookup       â”‚
â”‚  â”œâ”€â”€ @mcp.tool: search_clinics    â†’ Find nearby clinics            â”‚
â”‚  â”œâ”€â”€ @mcp.tool: check_slots       â†’ Check available slots          â”‚
â”‚  â””â”€â”€ @mcp.tool: create_booking    â†’ Create booking via chat        â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“š RAG Engine (LlamaIndex + Qdrant)                                â”‚
â”‚  â”œâ”€â”€ LlamaIndex: Document processing, chunking, retrieval          â”‚
â”‚  â”œâ”€â”€ Qdrant Cloud: Vector storage vá»›i Binary Quantization          â”‚
â”‚  â””â”€â”€ Cohere Embeddings (embed-multilingual-v3)                      â”‚
â”‚                                                                     â”‚
â”‚  âš™ï¸ Admin Config                                                    â”‚
â”‚  â”œâ”€â”€ Enable/Disable Agent                                           â”‚
â”‚  â”œâ”€â”€ System Prompt (editable)                                       â”‚
â”‚  â”œâ”€â”€ Parameters: Temperature, Max Tokens, Top-P                     â”‚
â”‚  â”œâ”€â”€ Tool Management: Enable/Disable individual tools              â”‚
â”‚  â””â”€â”€ Knowledge Base: Upload/Remove documents                        â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ReAct Pattern (Reason + Act)

- ğŸ§  **Thought**: Agent suy luáº­n vá» cÃ¢u há»i/yÃªu cáº§u cá»§a user
- ğŸ”§ **Action**: Gá»i tool phÃ¹ há»£p (RAG search, symptom lookup, booking, etc.)
- ğŸ‘ï¸ **Observation**: Nháº­n káº¿t quáº£ tá»« tool
- ğŸ”„ **Loop**: Láº·p láº¡i cho Ä‘áº¿n khi cÃ³ Ä‘á»§ thÃ´ng tin Ä‘á»ƒ tráº£ lá»i
- âœ… **Answer**: Tá»•ng há»£p vÃ  tráº£ lá»i user

### AI Tools (FastMCP Protocol)
- ğŸ”§ `pet_care_qa` - Há»i Ä‘Ã¡p vá» chÄƒm sÃ³c thÃº cÆ°ng (RAG-based)
- ğŸ”§ `symptom_search` - TÃ¬m bá»‡nh dá»±a trÃªn triá»‡u chá»©ng
- ğŸ”§ `search_clinics` - TÃ¬m phÃ²ng khÃ¡m gáº§n Ä‘Ã¢y
- ğŸ”§ `check_slots` - Kiá»ƒm tra slot trá»‘ng
- ğŸ”§ `create_booking` - Táº¡o lá»‹ch háº¹n qua chat

### Admin Agent Configuration (Simple UI)
- âš™ï¸ **Agent Status** - Báº­t/Táº¯t Agent
- ğŸ“ **System Prompt** - Chá»‰nh sá»­a prompt hÆ°á»›ng dáº«n Agent
- ğŸ›ï¸ **Model Parameters** - Temperature, Max Tokens, Top-P, Model selection
- ğŸ”§ **Tool Management** - Báº­t/Táº¯t tá»«ng tool riÃªng láº»
- ğŸ“š **Knowledge Base** - Upload/Remove documents cho RAG

### RAG Engine (LlamaIndex + Qdrant)
- ğŸ“„ **Document Ingestion** - Upload PDF, DOCX, TXT, MD
- âœ‚ï¸ **Chunking** - Tá»± Ä‘á»™ng chia nhá» documents
- ğŸ”¢ **Embedding** - Cohere embed-multilingual-v3
- ğŸ” **Vector Search** - Qdrant Cloud vá»›i Binary Quantization
- ğŸ“– **Retrieval** - Top-K similarity search

---

## ğŸ“± ADVANCED FEATURES

### ğŸš¨ SOS - Cáº¥p Cá»©u Kháº©n Cáº¥p
- XÃ¡c Ä‘á»‹nh phÃ²ng khÃ¡m thÃº y (Clinic) kháº©n cáº¥p gáº§n nháº¥t
- LiÃªn há»‡ tá»©c thÃ¬ cho tÆ° váº¥n
- Äáº·t lá»‹ch kháº©n cáº¥p

### ğŸ“¹ Video Consultation (TÆ° Váº¥n Video)
- Gá»i video trá»±c tiáº¿p vá»›i bÃ¡c sÄ©
- Cháº©n Ä‘oÃ¡n tá»« xa

###  Electronic Medical Records (EMR)
- Há»‡ thá»‘ng Há»“ sÆ¡ Bá»‡nh Ã¡n Äiá»‡n tá»­
- LÆ°u trá»¯ táº­p trung lá»‹ch sá»­ bá»‡nh táº­t
- **ÄÆ¡n thuá»‘c (Prescription)** Ä‘Æ°á»£c ghi trá»±c tiáº¿p vÃ o EMR
- Shared EMR - Táº¥t cáº£ phÃ²ng khÃ¡m xem Ä‘Æ°á»£c lá»‹ch sá»­ y táº¿
- Truy cáº­p báº¥t ká»³ lÃºc nÃ o, báº¥t ká»³ nÆ¡i Ä‘Ã¢u

> **ğŸ“Œ Scope:** Petties lÃ  **ná»n táº£ng booking**, KHÃ”NG bao gá»“m quáº£n lÃ½ kho thuá»‘c hay quáº£n lÃ½ nhÃ¢n sá»± chuyÃªn sÃ¢u.

### ğŸ’‰ Vaccination Tracker (Sá»• TiÃªm Chá»§ng)
- Lá»‹ch sá»­ tiÃªm chá»§ng Ä‘áº§y Ä‘á»§
- Shared across clinics - Chia sáº» giá»¯a cÃ¡c phÃ²ng khÃ¡m
- Nháº¯c nhá»Ÿ lá»‹ch tiÃªm Ä‘á»‹nh ká»³

### ğŸ”” Notification System
- ThÃ´ng bÃ¡o appointment sáº¯p tá»›i
- Nháº¯c nhá»Ÿ lá»‹ch uá»‘ng thuá»‘c
- Email, SMS, Push notification (Firebase)

### ğŸ’° Dynamic Pricing (Äá»‹nh GiÃ¡ Äá»™ng)
- Base price + fees
- TÃ­nh giÃ¡ dá»±a trÃªn khoáº£ng cÃ¡ch (Home Visit)
- PhÃ­ dá»‹ch vá»¥ linh hoáº¡t

### ğŸŒ Multi-language Support
- Há»— trá»£ Ä‘a ngÃ´n ngá»¯
- Timezone support - MÃºi giá»

### ğŸ‘¨â€âš•ï¸ Vet/Manager Account Creation Flow (Quick Add) âœ… (Backend Done)
**MÃ´ táº£:** Quy trÃ¬nh Ä‘á»ƒ CLINIC_OWNER/MANAGER thÃªm nhanh vÃ  cáº¥p tÃ i khoáº£n cho nhÃ¢n sá»± (thÃ´ng qua SÄT).

#### Screen Flows:
1. Owner/Manager truy cáº­p mÃ n hÃ¬nh "Quáº£n lÃ½ nhÃ¢n sá»±" (Staff Management).
2. Chá»n "ThÃªm nhÃ¢n viÃªn" (Quick Add).
3. Nháº­p cÃ¡c thÃ´ng tin tá»‘i giáº£n:
    - Há» vÃ  tÃªn
    - Sá»‘ Ä‘iá»‡n thoáº¡i (Báº¯t buá»™c, dÃ¹ng lÃ m Username)
    - Vai trÃ² (Clinic Manager hoáº·c Vet)
4. Há»‡ thá»‘ng:
    - Kiá»ƒm tra SÄT Ä‘Ã£ tá»“n táº¡i chÆ°a.
    - Táº¡o tÃ i khoáº£n vá»›i `username = phone`.
    - Táº¡o máº­t kháº©u máº·c Ä‘á»‹nh = **6 sá»‘ cuá»‘i SÄT**.
    - GÃ¡n `workingClinic` trá» vá» chi nhÃ¡nh hiá»‡n táº¡i.
5. NhÃ¢n viÃªn sá»­ dá»¥ng SÄT vÃ  máº­t kháº©u máº·c Ä‘á»‹nh Ä‘á»ƒ Ä‘Äƒng nháº­p vÃ o Web/Mobile ngay láº­p tá»©c.

#### Form thÃªm nhanh (Quick Add Form):
| Field | Required | Description |
|-------|----------|-------------|
| Há» vÃ  tÃªn | âœ… | TÃªn Ä‘áº§y Ä‘á»§ |
| Sá»‘ Ä‘iá»‡n thoáº¡i | âœ… | Äá»‹nh danh Ä‘Äƒng nháº­p, mÃ£ xÃ¡c thá»±c sau nÃ y |
| Vai trÃ² | âœ… | Chá»n Clinic Manager hoáº·c Vet |

#### Account States:
| Status | MÃ´ táº£ | ÄÄƒng nháº­p? |
|--------|-------|------------|
| `ACTIVE` | Hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng | âœ… |
| `DEACTIVATED` | Nghá»‰ viá»‡c / Bá»‹ vÃ´ hiá»‡u hÃ³a | âŒ |

---

### ğŸ‘¨â€ğŸ’¼ Quáº£n lÃ½ Lá»‹ch lÃ m viá»‡c (Manual Scheduling Flow)
**MÃ´ táº£:** Quy trÃ¬nh CLINIC_MANAGER táº¡o lá»‹ch lÃ m viá»‡c cho bÃ¡c sÄ© vÃ  há»‡ thá»‘ng tá»± Ä‘á»™ng sinh Slot.

#### Quy trÃ¬nh chi tiáº¿t:
1. **Manager chá»n BÃ¡c sÄ© & NgÃ y**: Chá»n bÃ¡c sÄ© tá»« danh sÃ¡ch vÃ  chá»n ngÃ y trÃªn Calendar.
2. **Nháº­p thá»i gian**:
    - Giá» báº¯t Ä‘áº§u (Start Time): vÃ­ dá»¥ 08:00
    - Giá» káº¿t thÃºc (End Time): vÃ­ dá»¥ 17:00
    - Thá»i gian nghá»‰ (Break Start/End): vÃ­ dá»¥ 12:00 - 13:00 (Há»‡ thá»‘ng sáº½ khÃ´ng táº¡o Slot trong lÃºc nÃ y).
3. **Há»‡ thá»‘ng xá»­ lÃ½ (Background)**:
    - Kiá»ƒm tra Overlap: BÃ¡c sÄ© Ä‘Ã£ cÃ³ lá»‹ch táº¡i chi nhÃ¡nh nÃ y hoáº·c chi nhÃ¡nh khÃ¡c chÆ°a.
    - Chia nhá» thá»i gian thÃ nh cÃ¡c Slot 30 phÃºt.
    - LÆ°u vÃ o DB: 1 báº£n ghi `VetShift` vÃ  danh sÃ¡ch cÃ¡c `Slot`.
4. **Káº¿t quáº£**: Lá»‹ch vÃ  cÃ¡c Ã´ trá»‘ng hiá»‡n lÃªn Dashboard Ä‘á»ƒ Pet Owner Ä‘áº·t lá»‹ch.


## ğŸ”‘ KEY FEATURES SUMMARY (MVP 1-Month Scope)

### âœ… CORE FEATURES (In Scope)
âœ… **Clinic-based vets** (NO freelancers)  
âœ… **Shared EMR** (All clinics see medical history)  
âœ… **Shared vaccination records** (Across clinics)  
âœ… **Dynamic pricing** (Base + Weight-based + Distance fees)  
âœ… **Hybrid Service Model** (Master Services + Custom Services)  
âœ… **Slot management** (Auto reduce/restore)  
âœ… **Manual scheduling** (Manager táº¡o lá»‹ch thá»§ cÃ´ng)  
âœ… **Multiple appointment types** (IN_CLINIC, HOME_VISIT)  
âœ… Quy trÃ¬nh Booking (Booking workflow): (PENDING â†’ ASSIGNED â†’ CONFIRMED â†’ ON_THE_WAY â†’ ARRIVED â†’ CHECK_IN â†’ IN_PROGRESS â†’ CHECK_OUT â†’ COMPLETED)
  
âœ… **Rating system** (Pet owner Ä‘Ã¡nh giÃ¡ Clinic/Vet)  
âœ… **Chat 1-1** (Pet Owner â†” Manager/Vet)  
âœ… **Home Visit Geo-Tracking** (GPS realtime tracking)  
âœ… **AI Chatbot** (Single Agent + ReAct Pattern + MCP Tools)  
âœ… **EMR vá»›i Ä‘Æ¡n thuá»‘c** (Prescription trong há»“ sÆ¡ bá»‡nh Ã¡n)  
âœ… **Push Notifications** (Firebase)  
âœ… **Admin Agent Config** (Prompt, Parameters, Tools, Knowledge Base)  
âœ… **Knowledge Base RAG** (LlamaIndex + Qdrant Cloud)  

### âŒ DEFERRED (Phase 2)
âŒ ~~SOS Emergency~~ (Deferred - Logic phá»©c táº¡p)  
âŒ ~~Video Consultation~~ (Deferred - WebRTC phá»©c táº¡p)  
âŒ ~~Excel Import~~ (Deferred - Manual Ä‘á»§ cho MVP)  
âŒ ~~Multi-Agent Architecture~~ (Simplified to Single Agent)  
âŒ ~~Email/SMS Notifications~~ (Push Ä‘á»§ cho MVP)  

---

## ğŸ› ï¸ TECH STACK (Reference)

| Layer | Technologies |
|-------|-------------|
| **Web Frontend** | React 19+ Vite, TypeScript, Tailwind CSS, Zustand |
| **Mobile** | Flutter 3.5, iOS & Android |
| **Backend** | Java 21, Spring Boot 4.x, Spring Security (JWT) |
| **AI Layer** | Python 3.12, FastAPI, Single Agent (ReAct), FastMCP, LlamaIndex |
| **Databases** | PostgreSQL, MongoDB, Redis, Qdrant Cloud (Vector) |
| **Infrastructure** | Docker, Cloudinary, GitHub Actions |
| **Payment** | Stripe | 
| **Notifications** | Firebase (Push) |

---

**Version: 8.0 - PETTIES MVP SCOPE (1-MONTH)**  
**Status: âœ… READY FOR DEV**  
**Total Features: ~48 (MVP Scope)**  
**Last Updated: December 26, 2025**
