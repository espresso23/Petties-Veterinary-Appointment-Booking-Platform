# PETTIES V0.0.1 - FEATURES & HAPPY FLOWS

---

## ğŸ¯ 5 ROLES & CORE FEATURES

### ğŸ• **ROLE 1: PET_OWNER (Customer Ä‘á»“ng thá»i lÃ  chá»§ thÃº cÆ°ng) MOBILE ONLY**
1. ÄÄƒng kÃ½ / ÄÄƒng nháº­p
2. Quáº£n lÃ½ há»“ sÆ¡ cÃ¡ nhÃ¢n
3. Táº¡o/sá»­a há»“ sÆ¡ thÃº cÆ°ng
4. TÃ¬m kiáº¿m phÃ²ng khÃ¡m
5. TÃ¬m kiáº¿m bÃ¡c sÄ©
6. Äáº·t lá»‹ch khÃ¡m táº¡i phÃ²ng (Clinic Visit)
7. Äáº·t lá»‹ch khÃ¡m táº¡i nhÃ  (Home Visit)
8. Xem lá»‹ch booking cá»§a tÃ´i
9. Xem chi tiáº¿t booking
10. Há»§y booking
11. Thanh toÃ¡n online.
12. Xem há»“ sÆ¡ y táº¿ thÃº cÆ°ng (EMR)
13. Xem sá»• tiÃªm chá»§ng
14. ÄÃ¡nh giÃ¡ & review bÃ¡c sÄ©
15. ğŸ†• Chat vá»›i AI Chatbot (Pet Care Assistant)
16. ğŸ†• SOS - Cáº¥p cá»©u kháº©n cáº¥p
17. ğŸ†• Video Consultation (TÆ° váº¥n video tá»« xa)
18. ğŸ†• Xem Ä‘Æ¡n thuá»‘c trong há»“ sÆ¡ bá»‡nh Ã¡n (EMR)
19. ğŸ†• Nháº­n thÃ´ng bÃ¡o & nháº¯c nhá»Ÿ (Push/Email/SMS)
20. ğŸ†• LÆ°u áº£nh, giá»‘ng, Ä‘á»™ tuá»•i, Ä‘áº·c Ä‘iá»ƒm thÃº cÆ°ng

---

### ğŸ‘¨â€âš•ï¸ **ROLE 2: VET (BÃ¡c sÄ© thÃº y) MOBILE + WEB**
1. ÄÄƒng nháº­p tá»« account Ä‘Æ°á»£c cáº¥p
2. Xem há»“ sÆ¡ cá»§a tÃ´i
3. Xem lá»‹ch lÃ m viá»‡c cá»§a tÃ´i
4. Xem booking Ä‘Æ°á»£c gÃ¡n
5. PhÃª duyá»‡t booking
6. Tá»« chá»‘i booking
7. Check-in bá»‡nh nhÃ¢n
8. Check-out bá»‡nh nhÃ¢n
9. Xem há»“ sÆ¡ y táº¿ thÃº cÆ°ng (Náº¿u Ä‘Æ°á»£c pet owner SHARED)
10. Xem sá»• tiÃªm chá»§ng cá»§a pet
11. Ghi chÃº há»“ sÆ¡ bá»‡nh Ã¡n (táº¡o EMR)
12. Cáº­p nháº­t sá»• tiÃªm chá»§ng
13. ğŸ†• Video Consultation vá»›i pet owner
14. ğŸ†• Ghi Ä‘Æ¡n thuá»‘c vÃ o há»“ sÆ¡ bá»‡nh Ã¡n (EMR)
15. ğŸ†• Cáº­p nháº­t EMR tá»« xa

---

### ğŸ‘¨â€ğŸ’¼ **ROLE 3: CLINIC_MANAGER (Quáº£n lÃ½ phÃ²ng khÃ¡m) WEB-ONLY**
1. ÄÄƒng nháº­p
2. Xem danh sÃ¡ch bÃ¡c sÄ©
3. ThÃªm bÃ¡c sÄ© thá»§ cÃ´ng (bÃ¡c sÄ© sáº½ Ä‘Æ°á»£c cáº¥p tÃ i khoáº£n Ä‘á»ƒ Ä‘Äƒng nháº­p sau khi thÃªm)
4. XÃ³a/bá» liÃªn káº¿t bÃ¡c sÄ©
5. Import lá»‹ch bÃ¡c sÄ© tá»« Excel
6. Import lá»‹ch bÃ¡c sÄ© thá»§ cÃ´ng
7. Xem booking má»›i
8. GÃ¡n bÃ¡c sÄ© cho booking
9. GÃ¡n láº¡i booking (náº¿u bÃ¡c sÄ© tá»« chá»‘i)
10. Chat vá»›i pet owner tÆ° váº¥n
11. GÃ¡n dá»‹ch vá»¥ náº¿u user chÆ°a chá»n Ä‘Æ°á»£c
12. Quáº£n lÃ½ há»§y & hoÃ n tiá»n
13. Xem dashboard hÃ´m nay
14. Quáº£n lÃ½ ca lÃ m viá»‡c nhÃ¢n viÃªn

---

### ğŸ¥ **ROLE 4: CLINIC_OWNER (Chá»§ phÃ²ng khÃ¡m) WEB-ONLY**
1. ÄÄƒng nháº­p
2. Quáº£n lÃ½ thÃ´ng tin phÃ²ng khÃ¡m
3. Táº¡o dá»‹ch vá»¥
4. Sá»­a dá»‹ch vá»¥
5. XÃ³a dá»‹ch vá»¥
6. Cáº¥u hÃ¬nh giÃ¡ dá»‹ch vá»¥(giÃ¡ cÆ¡ báº£n + giÃ¡ theo sá»‘ km)
7. Xem Dashboard PhÃ²ng KhÃ¡m
8. Theo dÃµi doanh thu


---

### ğŸ‘¨â€ğŸ’» **ROLE 5: ADMIN (Admin ná»n táº£ng) WEB ONLY**

#### **Platform Management (Quáº£n lÃ½ Ná»n táº£ng)**
1. ÄÄƒng nháº­p
2. Xem danh sÃ¡ch cÃ¡c clinic pending chá» duyá»‡t
3. PhÃª duyá»‡t clinic
4. Tá»« chá»‘i clinic
5. Xem thá»‘ng kÃª ná»n táº£ng, doanh thu
6. Thá»‘ng kÃª ngÆ°á»i dÃ¹ng vÃ  giao dá»‹ch
9. Xem Ä‘Æ¡n tá»‘ cÃ¡o xá»­ lÃ½ vi pháº¡m cá»§a clinic, ngÆ°á»i dÃ¹ng.
10. ğŸ†• **Agent Configuration**
    - Quáº£n lÃ½ Agent theo cáº¥u trÃºc phÃ¢n cáº¥p (Main Agent + Sub-Agents)
    - Chá»‰nh sá»­a System Prompt vá»›i version control (khÃ´ng Æ°u tiÃªn)
    - Äiá»u chá»‰nh Model Hyperparameters (Temperature, Max Tokens, Top-P)
    - Báº­t/táº¯t Agent (Enable/Disable)

11. ğŸ†• **Tool Management (Code-based)**
    - QuÃ©t vÃ  Ä‘á»“ng bá»™ Code-based Tools tá»« Python (@mcp.tool)
    - Xem Request/Response Schema cho má»—i tool
    - GÃ¡n Tools cho Agents
    - Báº­t/táº¯t Tools (Enable/Disable)

12. ğŸ†• **Knowledge Base Management (RAG)**
    - Upload tÃ i liá»‡u (PDF, DOCX, TXT, MD)
    - Theo dÃµi tráº¡ng thÃ¡i indexing (chunking & vectorization)
    - Test RAG retrieval vá»›i query examples
    - Xem vector count vÃ  storage usage

13. ğŸ†• **Agent Playground & Debugging**
    - Interactive Chat Simulator Ä‘á»ƒ test agents
    - Hierarchical Flow Visualization (agent handoffs)
    - Xem Thinking Process vÃ  Tool Calls
    - Citation View (RAG sources + Web URLs)
    - Feedback system (Good/Bad responses)

14. ğŸ†• **System & Security Configuration**
    - Dynamic API Key Management (Qdrant, Tavily, etc.)
    - Ollama Connection Configuration
    - Model Selection (kimi-k2, llama3, etc.)
    - Test connections cho cÃ¡c services
    - Save & Reload Context (khÃ´ng cáº§n restart server)

---

## ğŸ¤– AI & AGENT FEATURES (Petties AI Layer)

### AI Chatbot - Pet Care Assistant
- ğŸ¤– Chat vá»›i AI Chatbot thÃ´ng minh
- ğŸ¤– TÆ° váº¥n chÄƒm sÃ³c thÃº cÆ°ng
- ğŸ¤– Há»— trá»£ tÃ¬m kiáº¿m triá»‡u chá»©ng (Symptom Search)
- ğŸ¤– RAG Engine - Tra cá»©u kiáº¿n thá»©c y táº¿ thÃº y
- ğŸ¤– Multi-agent Architecture (LangGraph)

### Multi-Agent Architecture
- ğŸ§  **Main Agent (Supervisor/Orchestrator)**
  - Single Point of Contact - Má»i tÆ°Æ¡ng tÃ¡c báº¯t Ä‘áº§u vÃ  káº¿t thÃºc táº¡i Ä‘Ã¢y
  - Intent Classification - PhÃ¢n loáº¡i Ã½ Ä‘á»‹nh user (TÆ° váº¥n? Äáº·t lá»‹ch? TÃ¬m kiáº¿m thÃ´ng tin?)
  - Context-Aware Routing - Äiá»u phá»‘i Ä‘áº¿n Ä‘Ãºng Sub-Agent vá»›i context Ä‘áº§y Ä‘á»§
  - Response Synthesis - Tá»•ng há»£p vÃ  lÃ m mÆ°á»£t cÃ¢u tráº£ lá»i tá»« Sub-Agents
  - Quality Control - ÄÃ¡nh giÃ¡ vÃ  tá»« chá»‘i cÃ¢u tráº£ lá»i khÃ´ng Ä‘áº¡t cháº¥t lÆ°á»£ng

- ğŸ¥ **Medical/Triage Agent (Semi-Autonomous)**
  - Cháº©n Ä‘oÃ¡n sÆ¡ bá»™ dá»±a trÃªn triá»‡u chá»©ng
  - Internal RAG Search - Tra cá»©u kiáº¿n thá»©c ná»™i bá»™ trÆ°á»›c
  - Confidence Check - Tá»± Ä‘á»™ng gá»i Research Agent náº¿u confidence < 80%
  - Solution Expansion - TÃ¬m máº¹o chÄƒm sÃ³c vÃ  video hÆ°á»›ng dáº«n

- ğŸ” **Research Agent (Web Researcher)**
  - **Vai trÃ²:** ChuyÃªn gia tÃ¬m kiáº¿m thÃ´ng tin Internet (Web Researcher)
  - **Web Search Strategy:** Sá»­ dá»¥ng Search Engine (Tavily/DuckDuckGo) Ä‘á»ƒ tÃ¬m kiáº¿m real-time
  - **Phá»¥c vá»¥ Main Agent:** Khi user cáº§n thÃ´ng tin chung, tin tá»©c, kiáº¿n thá»©c bÃªn ngoÃ i
  - **Phá»¥c vá»¥ Medical Agent:** Khi cáº§n tra cá»©u bá»‡nh láº¡, tÃ¬m bÃ i viáº¿t y khoa má»›i nháº¥t, biá»‡n phÃ¡p sÆ¡ cá»©u
  - **Use Cases:**
    - TÃ¬m kiáº¿m bÃ i viáº¿t y khoa vÃ  tÃ i liá»‡u tham kháº£o uy tÃ­n
    - TÃ¬m máº¹o chÄƒm sÃ³c, kinh nghiá»‡m tá»« chuyÃªn gia (Tips & Tricks)
    - TÃ¬m video hÆ°á»›ng dáº«n trÃªn YouTube
    - Tra cá»©u home remedies vÃ  biá»‡n phÃ¡p dÃ¢n gian
  - **Video Integration:** Tá»± Ä‘á»™ng tÃ¬m vÃ  nhÃºng link YouTube videos vÃ o cÃ¢u tráº£ lá»i
  - **Attribution Required:** Báº¯t buá»™c trÃ­ch dáº«n nguá»“n (URL) cho má»i thÃ´ng tin tÃ¬m Ä‘Æ°á»£c

- ğŸ“… **Booking Agent**
  - Xá»­ lÃ½ Ä‘áº·t lá»‹ch khÃ¡m
  - Kiá»ƒm tra slot trá»‘ng
  - Há»§y lá»‹ch háº¹n

### AI Tools (FastMCP Protocol)
- ğŸ”§ `check_slot` - Kiá»ƒm tra slot trá»‘ng cho booking
- ğŸ”§ `search_symptoms` - TÃ¬m bá»‡nh dá»±a trÃªn triá»‡u chá»©ng
- ğŸ”§ `create_booking` - Táº¡o lá»‹ch háº¹n tá»± Ä‘á»™ng
- ğŸ”§ `RAG_search` - Tra cá»©u thÃ´ng tin y táº¿

### Admin Tool Management
- ğŸ“Š **Tool Scanner** - Tá»± Ä‘á»™ng quÃ©t vÃ  Ä‘á»“ng bá»™ Code-based tools tá»« Python (@mcp.tool)
- ğŸ“Š **Tool Assignment** - GÃ¡n tools cho specific agents (Main Agent hoáº·c Sub-Agents)
- ğŸ“Š **Schema Viewer** - Xem Request/Response schema cho má»—i tool
- ğŸ“Š **Tool Enable/Disable** - Báº­t/táº¯t tools cho tá»«ng agent

### Agent Architecture
- ğŸ—ï¸ **Hierarchical Agent System** - Main Agent (Supervisor) + Sub-Agents (Workers)
- ğŸ—ï¸ **Main Agent (Supervisor)** - Intent Classification, Context-Aware Routing, Response Synthesis
- ğŸ—ï¸ **Sub-Agents** - Booking Agent, Medical/Triage Agent, Research Agent
- ğŸ—ï¸ **Semi-Autonomous Flow** - Medical Agent tá»± Ä‘á»™ng gá»i Research Agent khi confidence tháº¥p
- ğŸ—ï¸ **State Management** - Main Agent quáº£n lÃ½ toÃ n bá»™ conversation context


### Monitoring & Debugging
- ğŸ” **Agent Playground** - Test agents trong mÃ´i trÆ°á»ng an toÃ n
- ğŸ” **Flow Visualization** - Xem hierarchical execution flow (Main â†’ Sub-Agent â†’ Tool calls)
- ğŸ” **Thinking Process Log** - Xem quÃ¡ trÃ¬nh suy luáº­n cá»§a agents
- ğŸ” **Citation Tracking** - Theo dÃµi nguá»“n trÃ­ch dáº«n (RAG chunks + Web URLs)
- ğŸ” **Response Feedback** - ÄÃ¡nh giÃ¡ cháº¥t lÆ°á»£ng cÃ¢u tráº£ lá»i (Good/Bad)

---

## ğŸ“± ADVANCED FEATURES

### ğŸš¨ SOS - Cáº¥p Cá»©u Kháº©n Cáº¥p
- XÃ¡c Ä‘á»‹nh phÃ²ng khÃ¡m thÃº y (Clinic) kháº©n cáº¥p gáº§n nháº¥t
- LiÃªn há»‡ tá»©c thÃ¬ cho tÆ° váº¥n
- Äáº·t lá»‹ch kháº©n cáº¥p

### ğŸ“¹ Video Consultation (TÆ° Váº¥n Video)
- Gá»i video trá»±c tiáº¿p vá»›i bÃ¡c sÄ©
- Cháº©n Ä‘oÃ¡n tá»« xa

###  Electronic Medical Records (EMR)
- Há»‡ thá»‘ng Há»“ sÆ¡ Bá»‡nh Ã¡n Äiá»‡n tá»­
- LÆ°u trá»¯ táº­p trung lá»‹ch sá»­ bá»‡nh táº­t
- **ÄÆ¡n thuá»‘c (Prescription)** Ä‘Æ°á»£c ghi trá»±c tiáº¿p vÃ o EMR
- Shared EMR - Táº¥t cáº£ phÃ²ng khÃ¡m xem Ä‘Æ°á»£c lá»‹ch sá»­ y táº¿
- Truy cáº­p báº¥t ká»³ lÃºc nÃ o, báº¥t ká»³ nÆ¡i Ä‘Ã¢u

> **ğŸ“Œ Scope:** Petties lÃ  **ná»n táº£ng booking**, KHÃ”NG bao gá»“m quáº£n lÃ½ kho thuá»‘c hay quáº£n lÃ½ nhÃ¢n sá»± chuyÃªn sÃ¢u.

### ğŸ’‰ Vaccination Tracker (Sá»• TiÃªm Chá»§ng)
- Lá»‹ch sá»­ tiÃªm chá»§ng Ä‘áº§y Ä‘á»§
- Shared across clinics - Chia sáº» giá»¯a cÃ¡c phÃ²ng khÃ¡m
- Nháº¯c nhá»Ÿ lá»‹ch tiÃªm Ä‘á»‹nh ká»³

### ğŸ”” Notification System
- ThÃ´ng bÃ¡o appointment sáº¯p tá»›i
- Nháº¯c nhá»Ÿ lá»‹ch uá»‘ng thuá»‘c
- Email, SMS, Push notification (Firebase)

### ğŸ’° Dynamic Pricing (Äá»‹nh GiÃ¡ Äá»™ng)
- Base price + fees
- TÃ­nh giÃ¡ dá»±a trÃªn khoáº£ng cÃ¡ch (Home Visit)
- PhÃ­ dá»‹ch vá»¥ linh hoáº¡t

### ğŸŒ Multi-language Support
- Há»— trá»£ Ä‘a ngÃ´n ngá»¯
- Timezone support - MÃºi giá»

---

## ğŸ”‘ KEY FEATURES SUMMARY

âœ… **Clinic-based vets** (NO freelancers)  
âœ… **Shared EMR** (All clinics see medical history)  
âœ… **Shared vaccination records** (Across clinics)  
âœ… **Dynamic pricing** (Base + fees)  
âœ… **Slot management** (Auto reduce/restore)  
âœ… **Excel import** (Batch schedule)  
âœ… **Manual import** (ThÃªm lá»‹ch thá»§ cÃ´ng)  
âœ… **Multiple appointment types** (IN_CLINIC, HOME_VISIT)  
âœ… **Booking workflow** (PENDING â†’ ASSIGNED â†’ CONFIRMED â†’ CHECK_IN -> IN_PROGRESS â†’ CHECK_OUT/COMPLETED)  
âœ… **Rating system** (Pet owner Ä‘Ã¡nh giÃ¡ Dr)  
âœ… **AI Chatbot** (Pet Care Assistant vá»›i Multi-agent Architecture)  
âœ… **SOS Emergency** (Cáº¥p cá»©u kháº©n cáº¥p)  
âœ… **Video Consultation** (TÆ° váº¥n tá»« xa)  
âœ… **EMR vá»›i Ä‘Æ¡n thuá»‘c** (Prescription trong há»“ sÆ¡ bá»‡nh Ã¡n)  
âœ… **Push/Email/SMS Notifications** (Firebase)  
âœ… **Multi-language & Timezone** (Äa ngÃ´n ngá»¯)  
âœ… **Admin Agent Management Dashboard** (Quáº£n lÃ½, Tinh chá»‰nh & GiÃ¡m sÃ¡t Agents)  
âœ… **Dynamic Few-Shot Routing** (Zero Training, Cross-lingual)  
âœ… **Tool Management** (Code-based Tools only)  
âœ… **Knowledge Base RAG** (Qdrant Cloud vá»›i Binary Quantization)  
âœ… **Agent Playground** (Interactive Testing & Debugging)  
âœ… **Dynamic Secrets Management** (API Keys, Ollama Config)

---

## ğŸ› ï¸ TECH STACK (Reference)

| Layer | Technologies |
|-------|-------------|
| **Web Frontend** | React 18+ Vite, TypeScript, Tailwind CSS, Zustand |
| **Mobile** | Flutter 3.5, iOS & Android |
| **Backend** | Java 21, Spring Boot 3.x, Spring Security (JWT) |
| **AI Layer** | Python 3.12, FastAPI, LangGraph, FastMCP, LlamaIndex |
| **Databases** | PostgreSQL, MongoDB, Redis, Qdrant (Vector) |
| **Infrastructure** | Docker, Cloudinary, GitHub Actions |
| **Payment** | Stripe | 
| **Notifications** | Firebase (Push), Email, SMS |

---

**Version: 7.0 - PETTIES COMPREHENSIVE FEATURES + AI AGENT MANAGEMENT**  
**Status: âœ… READY FOR DEV**  
**Total Features: 90+ (V0.0.1)**  
**Last Updated: December 6, 2025**
